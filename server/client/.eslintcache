[{"C:\\projects\\kijiji\\server\\client\\src\\index.tsx":"1","C:\\projects\\kijiji\\server\\client\\src\\components\\App.tsx":"2","C:\\projects\\kijiji\\server\\client\\src\\browserHistory.tsx":"3","C:\\projects\\kijiji\\server\\client\\src\\components\\Routes.tsx":"4","C:\\projects\\kijiji\\server\\client\\src\\components\\Header.tsx":"5","C:\\projects\\kijiji\\server\\client\\src\\Root.tsx":"6","C:\\projects\\kijiji\\server\\client\\src\\reducers\\index.tsx":"7","C:\\projects\\kijiji\\server\\client\\src\\components\\PostAd.tsx":"8","C:\\projects\\kijiji\\server\\client\\src\\components\\Register.tsx":"9","C:\\projects\\kijiji\\server\\client\\src\\components\\SignIn.tsx":"10","C:\\projects\\kijiji\\server\\client\\src\\reducers\\authReducer.tsx":"11","C:\\projects\\kijiji\\server\\client\\src\\components\\requireAuth.tsx":"12","C:\\projects\\kijiji\\server\\client\\src\\components\\RegisterForm.tsx":"13","C:\\projects\\kijiji\\server\\client\\src\\components\\SignInForm.tsx":"14","C:\\projects\\kijiji\\server\\client\\src\\actions\\index.tsx":"15","C:\\projects\\kijiji\\server\\client\\src\\actions\\types.tsx":"16","C:\\projects\\kijiji\\server\\client\\src\\actions\\auth.tsx":"17","C:\\projects\\kijiji\\server\\client\\src\\actions\\axiosConfig.tsx":"18","C:\\projects\\kijiji\\server\\client\\src\\CookieService.tsx":"19","C:\\projects\\kijiji\\server\\client\\src\\reducers\\categoryReducer.tsx":"20","C:\\projects\\kijiji\\server\\client\\src\\reducers\\listingReducer.tsx":"21","C:\\projects\\kijiji\\server\\client\\src\\components\\PostAdForm.tsx":"22","C:\\projects\\kijiji\\server\\client\\src\\actions\\listing.tsx":"23","C:\\projects\\kijiji\\server\\client\\src\\components\\Loading.tsx":"24","C:\\projects\\kijiji\\server\\client\\src\\constants.tsx":"25","C:\\projects\\kijiji\\server\\client\\src\\components\\Listings.tsx":"26","C:\\projects\\kijiji\\server\\client\\src\\components\\Listing.tsx":"27","C:\\projects\\kijiji\\server\\client\\src\\components\\Pagination.tsx":"28","C:\\projects\\kijiji\\server\\client\\src\\components\\Searchbar.tsx":"29","C:\\projects\\kijiji\\server\\client\\src\\windowDimensions.tsx":"30","C:\\projects\\kijiji\\server\\client\\src\\components\\Modal.tsx":"31","C:\\projects\\kijiji\\server\\client\\src\\components\\SearchFilterForm.tsx":"32","C:\\projects\\kijiji\\server\\client\\src\\components\\LoadingDots.tsx":"33","C:\\projects\\kijiji\\server\\client\\src\\components\\ListingDetail.tsx":"34","C:\\projects\\kijiji\\server\\client\\src\\components\\Profile.tsx":"35","C:\\projects\\kijiji\\server\\client\\src\\reducers\\profileReducer.tsx":"36","C:\\projects\\kijiji\\server\\client\\src\\actions\\profile.tsx":"37"},{"size":317,"mtime":1608593598124,"results":"38","hashOfConfig":"39"},{"size":364,"mtime":1607913470313,"results":"40","hashOfConfig":"39"},{"size":89,"mtime":1607912608008,"results":"41","hashOfConfig":"39"},{"size":962,"mtime":1610646702157,"results":"42","hashOfConfig":"39"},{"size":4067,"mtime":1610647334092,"results":"43","hashOfConfig":"39"},{"size":1832,"mtime":1608593598103,"results":"44","hashOfConfig":"39"},{"size":811,"mtime":1610675471005,"results":"45","hashOfConfig":"39"},{"size":1510,"mtime":1610646702155,"results":"46","hashOfConfig":"39"},{"size":2320,"mtime":1610399332837,"results":"47","hashOfConfig":"39"},{"size":1824,"mtime":1610399332841,"results":"48","hashOfConfig":"39"},{"size":954,"mtime":1609367265394,"results":"49","hashOfConfig":"39"},{"size":1791,"mtime":1608593598118,"results":"50","hashOfConfig":"39"},{"size":6636,"mtime":1609367265379,"results":"51","hashOfConfig":"39"},{"size":5098,"mtime":1608593598117,"results":"52","hashOfConfig":"39"},{"size":107,"mtime":1610646702147,"results":"53","hashOfConfig":"39"},{"size":1165,"mtime":1610646702151,"results":"54","hashOfConfig":"39"},{"size":3441,"mtime":1609367265353,"results":"55","hashOfConfig":"39"},{"size":3816,"mtime":1609367265357,"results":"56","hashOfConfig":"39"},{"size":1288,"mtime":1608593598101,"results":"57","hashOfConfig":"39"},{"size":457,"mtime":1609367265397,"results":"58","hashOfConfig":"39"},{"size":977,"mtime":1610675453490,"results":"59","hashOfConfig":"39"},{"size":14709,"mtime":1610399332835,"results":"60","hashOfConfig":"39"},{"size":7580,"mtime":1610676666310,"results":"61","hashOfConfig":"39"},{"size":244,"mtime":1609367265371,"results":"62","hashOfConfig":"39"},{"size":11158,"mtime":1610670751241,"results":"63","hashOfConfig":"39"},{"size":9797,"mtime":1610680796583,"results":"64","hashOfConfig":"39"},{"size":2340,"mtime":1610664331655,"results":"65","hashOfConfig":"39"},{"size":1796,"mtime":1610399332832,"results":"66","hashOfConfig":"39"},{"size":6788,"mtime":1610649111345,"results":"67","hashOfConfig":"39"},{"size":727,"mtime":1610399332854,"results":"68","hashOfConfig":"39"},{"size":1189,"mtime":1610399332830,"results":"69","hashOfConfig":"39"},{"size":5955,"mtime":1610399332839,"results":"70","hashOfConfig":"39"},{"size":224,"mtime":1610399332829,"results":"71","hashOfConfig":"39"},{"size":6403,"mtime":1610676517391,"results":"72","hashOfConfig":"39"},{"size":3657,"mtime":1610674390557,"results":"73","hashOfConfig":"39"},{"size":641,"mtime":1610673687044,"results":"74","hashOfConfig":"39"},{"size":1391,"mtime":1610675631792,"results":"75","hashOfConfig":"39"},{"filePath":"76","messages":"77","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"78"},"1pba2ji",{"filePath":"79","messages":"80","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"78"},{"filePath":"81","messages":"82","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"78"},{"filePath":"83","messages":"84","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"78"},{"filePath":"85","messages":"86","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"78"},{"filePath":"87","messages":"88","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"78"},{"filePath":"89","messages":"90","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"91","messages":"92","errorCount":0,"warningCount":8,"fixableErrorCount":0,"fixableWarningCount":0,"source":"93","usedDeprecatedRules":"78"},{"filePath":"94","messages":"95","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"78"},{"filePath":"96","messages":"97","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"78"},{"filePath":"98","messages":"99","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"78"},{"filePath":"100","messages":"101","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"102","usedDeprecatedRules":"78"},{"filePath":"103","messages":"104","errorCount":0,"warningCount":5,"fixableErrorCount":0,"fixableWarningCount":0,"source":"105","usedDeprecatedRules":"78"},{"filePath":"106","messages":"107","errorCount":0,"warningCount":4,"fixableErrorCount":0,"fixableWarningCount":0,"source":"108","usedDeprecatedRules":"78"},{"filePath":"109","messages":"110","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"78"},{"filePath":"111","messages":"112","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"113","usedDeprecatedRules":"78"},{"filePath":"114","messages":"115","errorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"116","usedDeprecatedRules":"78"},{"filePath":"117","messages":"118","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"78"},{"filePath":"119","messages":"120","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"78"},{"filePath":"121","messages":"122","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"78"},{"filePath":"123","messages":"124","errorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"125","messages":"126","errorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"127","usedDeprecatedRules":"78"},{"filePath":"128","messages":"129","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"130","messages":"131","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"132","usedDeprecatedRules":"78"},{"filePath":"133","messages":"134","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"135","messages":"136","errorCount":0,"warningCount":5,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"137","messages":"138","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"139","messages":"140","errorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"141","usedDeprecatedRules":"78"},{"filePath":"142","messages":"143","errorCount":0,"warningCount":6,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"144","messages":"145","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"146","usedDeprecatedRules":"78"},{"filePath":"147","messages":"148","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"78"},{"filePath":"149","messages":"150","errorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"151","usedDeprecatedRules":"78"},{"filePath":"152","messages":"153","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"78"},{"filePath":"154","messages":"155","errorCount":0,"warningCount":5,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"156","messages":"157","errorCount":0,"warningCount":6,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"158","messages":"159","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"160","messages":"161","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},"C:\\projects\\kijiji\\server\\client\\src\\index.tsx",[],["162","163"],"C:\\projects\\kijiji\\server\\client\\src\\components\\App.tsx",[],"C:\\projects\\kijiji\\server\\client\\src\\browserHistory.tsx",[],"C:\\projects\\kijiji\\server\\client\\src\\components\\Routes.tsx",[],"C:\\projects\\kijiji\\server\\client\\src\\components\\Header.tsx",[],"C:\\projects\\kijiji\\server\\client\\src\\Root.tsx",[],"C:\\projects\\kijiji\\server\\client\\src\\reducers\\index.tsx",[],"C:\\projects\\kijiji\\server\\client\\src\\components\\PostAd.tsx",["164","165","166","167","168","169","170","171"],"import React, { useEffect, useState } from \"react\";\r\nimport { Link, useLocation } from \"react-router-dom\";\r\nimport requireAuth from \"./requireAuth\";\r\nimport PostAdForm from \"./PostAdForm\";\r\nimport { connect } from \"react-redux\";\r\nimport { StoreState } from \"../reducers\";\r\nimport { createListing, Listing } from \"../actions/listing\";\r\nimport jwt_decode from \"jwt-decode\";\r\nimport CookieService from \"../CookieService\";\r\n\r\nexport interface PostAdFormProps {\r\n    onSubmit(formValues: any): void;\r\n    fetchCategoriesForListing(): void;\r\n    initialValues: Object;\r\n    provinceValue: string;\r\n    categories: [];\r\n    dispatch: any;\r\n}\r\n\r\nexport interface PostAdProps {\r\n    createListing(formValues: any): void;\r\n}\r\n\r\nconst PostAd: React.FC<PostAdProps> = (props) => {\r\n    // useEffect(() => {\r\n    //     const cookieService = CookieService.getService();\r\n    //     console.log(\"JWT DECODE\", jwt_decode(cookieService.getAccessToken()));\r\n    // }, []);\r\n    const onSubmitPostListing = async (formValues: any) => {\r\n        props.createListing(formValues);\r\n    };\r\n\r\n    return (\r\n        <div className=\"postAdPageContainer\">\r\n            <h1>Post Your Ad, it's fast and easy</h1>\r\n            <PostAdForm\r\n                onSubmit={onSubmitPostListing}\r\n                // initialValues={{\r\n                //     title: \"bye\",\r\n                //     image: \"\",\r\n                // }}\r\n            />\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default connect(null, { createListing })(requireAuth(PostAd));\r\n","C:\\projects\\kijiji\\server\\client\\src\\components\\Register.tsx",[],"C:\\projects\\kijiji\\server\\client\\src\\components\\SignIn.tsx",[],"C:\\projects\\kijiji\\server\\client\\src\\reducers\\authReducer.tsx",[],"C:\\projects\\kijiji\\server\\client\\src\\components\\requireAuth.tsx",["172"],"import React, { Component } from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport { StoreState } from \"../reducers\";\r\nimport { History } from \"history\";\r\nimport { validateToken } from \"../actions\";\r\nimport { useLocation } from \"react-router-dom\";\r\n\r\nimport history from \"../browserHistory\";\r\n\r\nexport interface IHoc {\r\n    authStatus?: string | null;\r\n    history: History;\r\n    validateToken(path: string, retriedCalling: boolean): void;\r\n}\r\n\r\nconst hoc = (ChildComponent: any) => {\r\n    class ComposedComponent extends Component<IHoc> {\r\n        // Our component just got rendered\r\n        //Check for redux store's authStatus\r\n        componentDidMount() {\r\n            this.shouldNavigateAway();\r\n        }\r\n\r\n        // Our component just got updated\r\n        //If our redux store's authStatus changes\r\n        componentDidUpdate() {\r\n            this.shouldNavigateAway();\r\n        }\r\n\r\n        shouldNavigateAway() {\r\n            if (!this.props.authStatus) {\r\n                //if authStatus is empty string\r\n                //history is automatically passed due to React-router\r\n                //If done loading\r\n                this.props.history.push(\"/\");\r\n            } else {\r\n                //When user enter a page,\r\n                //validate access token, if it's not valid, redux's authStatus would be empty\r\n\r\n                this.props.validateToken(history.location.pathname, false);\r\n            }\r\n        }\r\n\r\n        render() {\r\n            return <ChildComponent {...this.props} />;\r\n        }\r\n    }\r\n\r\n    function mapStateToProps(state: StoreState) {\r\n        return {\r\n            authStatus: state.authStatus.authenticated,\r\n        };\r\n    }\r\n\r\n    return connect(mapStateToProps, { validateToken })(ComposedComponent);\r\n};\r\n\r\nexport default hoc;\r\n","C:\\projects\\kijiji\\server\\client\\src\\components\\RegisterForm.tsx",["173","174","175","176","177"],"import React, { ComponentType, useEffect } from \"react\";\r\nimport {\r\n    Field,\r\n    reduxForm,\r\n    reset,\r\n    change,\r\n    FormErrors,\r\n    InjectedFormProps,\r\n} from \"redux-form\";\r\n//compose is used to make it easier to \"organize\" mapStateToProps and redux form\r\nimport { StoreState } from \"../reducers\";\r\nimport { connect } from \"react-redux\";\r\nimport { RegisterFormProps } from \"./Register\";\r\n//Re-usable component\r\nexport interface RegisterFormValues {\r\n    email: string;\r\n    firstName: string;\r\n    lastName: string;\r\n    password: string;\r\n}\r\n\r\n//Typescriptand redux form:\r\n//https://levelup.gitconnected.com/react-js-typescript-redux-redux-form-jest-e522995ebe36\r\n\r\n//Need to hoist render methods up or else it will give error where it will unfocus after first characther is typed\r\n//https://stackoverflow.com/questions/39839051/using-redux-form-im-losing-focus-after-typing-the-first-character\r\n\r\nconst renderError = ({ error, touched }: any) => {\r\n    if (touched && error) {\r\n        //Touched (for input) will be false at first\r\n        //When clicked and then clicked otuside of the input, it will be true\r\n        return <div className=\"errorText\">{error}</div>;\r\n    }\r\n};\r\n\r\nconst renderTextInput = ({ input, label, meta, placeHolder }: any) => {\r\n    //\"component\" property automatically passes props to argument, it has {input properties and meta properties}\r\n    //\"label\" automatically passes props to arguments\r\n    return (\r\n        <div>\r\n            <label>{label}</label>\r\n            <input\r\n                data-testid=\"registerTextInput\"\r\n                className=\"createAuthInputs\"\r\n                {...input}\r\n                autoComplete=\"off\"\r\n            />\r\n            {renderError(meta)}\r\n        </div>\r\n    );\r\n    //{..input} is shortcut for redux-form; where you take all the input from \"component's\" props and pass it as\r\n    //props to <input>\r\n};\r\n\r\nconst renderPasswordInput = ({ input, label, meta, placeHolder }: any) => {\r\n    return (\r\n        <div>\r\n            <label>{label}</label>\r\n            <input\r\n                className=\"createAuthInputs\"\r\n                type=\"password\"\r\n                {...input}\r\n                autoComplete=\"off\"\r\n            />\r\n            {renderError(meta)}\r\n        </div>\r\n    );\r\n};\r\n\r\nconst RegisterForm: React.FC<\r\n    RegisterFormProps & InjectedFormProps<{}, RegisterFormProps>\r\n> = (props) => {\r\n    const onSubmit = (formValues: any, dispatch: any) => {\r\n        //onSubmit's default param is any\r\n        //event.preventDefault() is automatically called with handleSubmit, a redux-form property\r\n        //form values are the values from the fields that redux-form automatiacally passes\r\n        //after clicking the submit button\r\n        //dispatch(reset(\"registerForm\"));\r\n        props.onSubmit(formValues);\r\n\r\n        //dispatch(change(\"registerForm\", \"password\", \"\"));\r\n    };\r\n\r\n    return (\r\n        <React.Fragment>\r\n            <form className=\"authForm\" onSubmit={props.handleSubmit(onSubmit)}>\r\n                <h1>Register</h1>\r\n                <div className=\"authFieldSection\">\r\n                    <div className=\"authFormFieldTitleWrap\">\r\n                        <h1>Email</h1>\r\n                        <h3 className=\"authFormFieldTitleEmailInUse\">\r\n                            {props.authStatus}\r\n                        </h3>\r\n                    </div>\r\n                    <Field\r\n                        name=\"email\"\r\n                        type=\"text\"\r\n                        component={renderTextInput}\r\n                    />\r\n                </div>\r\n                <div className=\"authFieldSection\">\r\n                    <div className=\"authFormFieldTitleWrap\">\r\n                        <h1>First Name</h1>\r\n                        <h3 className=\"authFormFieldTitleEmailInUse\">\r\n                            {props.authStatus}\r\n                        </h3>\r\n                    </div>\r\n                    <Field\r\n                        name=\"firstName\"\r\n                        type=\"text\"\r\n                        component={renderTextInput}\r\n                    />\r\n                </div>\r\n                <div className=\"authFieldSection\">\r\n                    <div className=\"authFormFieldTitleWrap\">\r\n                        <h1>Last Name</h1>\r\n                        <h3 className=\"authFormFieldTitleEmailInUse\">\r\n                            {props.authStatus}\r\n                        </h3>\r\n                    </div>\r\n                    <Field\r\n                        name=\"lastName\"\r\n                        type=\"text\"\r\n                        component={renderTextInput}\r\n                    />\r\n                </div>\r\n                <div className=\"authFieldSection\">\r\n                    <div className=\"authFormFieldTitleWrap\">\r\n                        <h1>Password</h1>\r\n                        <h3 className=\"authFormFieldTitleEmailInUse\">\r\n                            {props.authStatus}\r\n                        </h3>\r\n                    </div>\r\n                    <Field\r\n                        name=\"password\"\r\n                        type=\"password\"\r\n                        component={renderPasswordInput}\r\n                    />\r\n                </div>\r\n\r\n                <button data-testid=\"registerButton\" className=\"authButton\">\r\n                    Register\r\n                </button>\r\n            </form>\r\n        </React.Fragment>\r\n    );\r\n};\r\n\r\nconst validate = (\r\n    formValues: RegisterFormValues\r\n): FormErrors<RegisterFormValues> => {\r\n    //MUST BE NAMED VALIDATE! Other names would be ignored by reduxForm(..)\r\n    const errors: FormErrors<RegisterFormValues> = {};\r\n    //If you return an empty object, redux form will assume everything is ok\r\n    if (!formValues.email) {\r\n        //user did not enter title, so undefined\r\n        errors.email = \"You must enter an email\";\r\n        //Must be the same name as field name! The \"error\" property in {meta} would receive this\r\n    }\r\n\r\n    if (!formValues.firstName) {\r\n        errors.firstName = \"You must enter your first name\";\r\n    }\r\n\r\n    if (!formValues.lastName) {\r\n        errors.lastName = \"You must enter your last name\";\r\n    }\r\n    if (!formValues.password) {\r\n        errors.password = \"You must enter a password\";\r\n    }\r\n\r\n    return errors;\r\n    //Erors is going to be passed to renderInput's meta\r\n};\r\n\r\n// const mapStateToProps = (state: StoreState) => {\r\n//     return {\r\n//         authStatus: state.authStatus.errorMessage,\r\n//     };\r\n// };\r\n\r\nexport default connect()(\r\n    reduxForm<{}, RegisterFormProps>({\r\n        form: \"registerForm\",\r\n        validate,\r\n    })(RegisterForm)\r\n);\r\n","C:\\projects\\kijiji\\server\\client\\src\\components\\SignInForm.tsx",["178","179","180","181"],"import React, { ComponentType, useEffect } from \"react\";\r\nimport {\r\n    Field,\r\n    reduxForm,\r\n    reset,\r\n    change,\r\n    FormErrors,\r\n    InjectedFormProps,\r\n} from \"redux-form\";\r\n//compose is used to make it easier to \"organize\" mapStateToProps and redux form\r\nimport { StoreState } from \"../reducers\";\r\nimport { connect } from \"react-redux\";\r\nimport { SignInFormProps } from \"./SignIn\";\r\n//Re-usable component\r\nexport interface SignInFormValues {\r\n    email: string;\r\n    password: string;\r\n}\r\n\r\n//Typescriptand redux form:\r\n//https://levelup.gitconnected.com/react-js-typescript-redux-redux-form-jest-e522995ebe36\r\n\r\n//Need to hoist render methods up or else it will give error where it will unfocus after first characther is typed\r\n//https://stackoverflow.com/questions/39839051/using-redux-form-im-losing-focus-after-typing-the-first-character\r\n\r\nconst renderError = ({ error, touched }: any) => {\r\n    if (touched && error) {\r\n        //Touched (for input) will be false at first\r\n        //When clicked and then clicked otuside of the input, it will be true\r\n        return <div className=\"errorText\">{error}</div>;\r\n    }\r\n};\r\n\r\nconst renderTextInput = ({ input, label, meta, placeHolder }: any) => {\r\n    //\"component\" property automatically passes props to argument, it has {input properties and meta properties}\r\n    //\"label\" automatically passes props to arguments\r\n    return (\r\n        <div>\r\n            <label>{label}</label>\r\n            <input className=\"createAuthInputs\" {...input} autoComplete=\"off\" />\r\n            {renderError(meta)}\r\n        </div>\r\n    );\r\n    //{..input} is shortcut for redux-form; where you take all the input from \"component's\" props and pass it as\r\n    //props to <input>\r\n};\r\n\r\nconst renderPasswordInput = ({ input, label, meta, placeHolder }: any) => {\r\n    return (\r\n        <div>\r\n            <label>{label}</label>\r\n            <input\r\n                className=\"createAuthInputs\"\r\n                type=\"password\"\r\n                {...input}\r\n                autoComplete=\"off\"\r\n            />\r\n            {renderError(meta)}\r\n        </div>\r\n    );\r\n};\r\n\r\nconst SignInForm: React.FC<\r\n    SignInFormProps & InjectedFormProps<{}, SignInFormProps>\r\n> = (props) => {\r\n    const onSubmit = (formValues: any, dispatch: any) => {\r\n        //onSubmit's default param is any\r\n        //event.preventDefault() is automatically called with handleSubmit, a redux-form property\r\n        //form values are the values from the fields that redux-form automatiacally passes\r\n        //after clicking the submit button\r\n        //dispatch(reset(\"registerForm\"));\r\n        props.onSubmit(formValues);\r\n        // dispatch(change(\"signInForm\", \"password\", \"\"));\r\n    };\r\n\r\n    return (\r\n        <React.Fragment>\r\n            <form className=\"authForm\" onSubmit={props.handleSubmit(onSubmit)}>\r\n                <h1>Sign In</h1>\r\n                <div className=\"authFieldSection\">\r\n                    <div className=\"authFormFieldTitleWrap\">\r\n                        <h1>Email</h1>\r\n                        <h3 className=\"authFormFieldTitleEmailInUse\">\r\n                            {props.authStatus}\r\n                        </h3>\r\n                    </div>\r\n                    <Field\r\n                        name=\"email\"\r\n                        type=\"text\"\r\n                        component={renderTextInput}\r\n                    />\r\n                </div>\r\n                <div className=\"authFieldSection\">\r\n                    <div className=\"authFormFieldTitleWrap\">\r\n                        <h1>Password</h1>\r\n                        <h3 className=\"authFormFieldTitleEmailInUse\">\r\n                            {props.authStatus}\r\n                        </h3>\r\n                    </div>\r\n                    <Field\r\n                        name=\"password\"\r\n                        type=\"password\"\r\n                        component={renderPasswordInput}\r\n                    />\r\n                </div>\r\n\r\n                <button className=\"authButton\">Sign In</button>\r\n            </form>\r\n        </React.Fragment>\r\n    );\r\n};\r\n\r\nconst validate = (\r\n    formValues: SignInFormValues\r\n): FormErrors<SignInFormValues> => {\r\n    //MUST BE NAMED VALIDATE! Other names would be ignored by reduxForm(..)\r\n    const errors: FormErrors<SignInFormValues> = {};\r\n    //If you return an empty object, redux form will assume everything is ok\r\n    if (!formValues.email) {\r\n        //user did not enter title, so undefined\r\n        errors.email = \"You must enter an email\";\r\n        //Must be the same name as field name! The \"error\" property in {meta} would receive this\r\n    }\r\n    if (!formValues.password) {\r\n        errors.password = \"You must enter a password\";\r\n    }\r\n    return errors;\r\n    //Erors is going to be passed to renderInput's meta\r\n};\r\n\r\nconst mapStateToProps = (state: StoreState) => {\r\n    return {\r\n        authStatus: state.authStatus.errorMessage,\r\n    };\r\n};\r\n\r\nexport default connect(\r\n    mapStateToProps,\r\n    {}\r\n)(\r\n    reduxForm<{}, SignInFormProps>({\r\n        form: \"signInForm\",\r\n        validate,\r\n    })(SignInForm)\r\n);\r\n","C:\\projects\\kijiji\\server\\client\\src\\actions\\index.tsx",[],"C:\\projects\\kijiji\\server\\client\\src\\actions\\types.tsx",["182"],"import {\r\n    AuthUserAction,\r\n    AuthErrorAction,\r\n    FetchCategoriesForListingAction,\r\n    FetchCategoriesForListingErrorAction,\r\n    UploadImageToCloudinaryAction,\r\n    CreateListingAction,\r\n    ListingErrorAction,\r\n    FetchListingsAction,\r\n    FetchListingDetailAction,\r\n} from \"../actions\";\r\nimport { FetchUserProfileAction, FetchUserProfileErrorAction } from \"./listing\";\r\nexport enum ActionTypes {\r\n    AUTH_USER,\r\n    AUTH_ERROR,\r\n    FETCH_CATEGORIES_FOR_LISTING,\r\n    FETCH_CATEGORIES_FOR_LISTING_ERROR,\r\n    UPLOAD_IMAGE_TO_CLOUDINARY,\r\n    CREATE_LISTING,\r\n    LISTING_ERROR,\r\n    FETCH_LISTINGS,\r\n    FETCH_LISTING_DETAIL,\r\n    FETCH_USER_PROFILE,\r\n    FETCH_USER_PROFILE_ERROR,\r\n}\r\nexport type AuthActions = AuthUserAction | AuthErrorAction;\r\nexport type FetchCategoriesActions =\r\n    | FetchCategoriesForListingAction\r\n    | FetchCategoriesForListingErrorAction;\r\nexport type ListingAction =\r\n    // | UploadImageToCloudinaryAction\r\n    | CreateListingAction\r\n    | ListingErrorAction\r\n    | FetchListingsAction\r\n    | FetchListingDetailAction;\r\n\r\nexport type UserProfileAction =\r\n    | FetchUserProfileAction\r\n    | FetchUserProfileErrorAction;\r\n","C:\\projects\\kijiji\\server\\client\\src\\actions\\auth.tsx",["183","184"],"import { ActionTypes } from \"./types\";\r\nimport auth from \"./axiosConfig\";\r\nimport { Dispatch } from \"redux\";\r\nimport history from \"../browserHistory\";\r\nimport CookieService from \"../CookieService\";\r\n\r\nexport interface JWTType {\r\n    token: string;\r\n}\r\nexport interface AuthUserAction {\r\n    type: ActionTypes.AUTH_USER;\r\n    payload: JWTType;\r\n}\r\nexport interface AuthErrorAction {\r\n    type: ActionTypes.AUTH_ERROR;\r\n    payload: string;\r\n}\r\n\r\nexport const signUp = (formValues: any) => async (dispatch: Dispatch) => {\r\n    try {\r\n        const response = await auth.post<JWTType>(\"/signup\", formValues);\r\n        dispatch<AuthUserAction>({\r\n            type: ActionTypes.AUTH_USER,\r\n            payload: response.data,\r\n        });\r\n        //Save token to local storage so that we could persist login state, keep user log in\r\n        // localStorage.setItem(\"token\", response.data.token);\r\n        // history.push(\"/walkman\");\r\n    } catch (err) {\r\n        dispatch<AuthErrorAction>({\r\n            type: ActionTypes.AUTH_ERROR,\r\n            payload: \"- Email is in use\",\r\n        });\r\n    }\r\n};\r\nexport const signIn = (formValues: any) => async (dispatch: Dispatch) => {\r\n    try {\r\n        const response = await auth.post<JWTType>(\"/signin\", formValues);\r\n        dispatch<AuthUserAction>({\r\n            type: ActionTypes.AUTH_USER,\r\n            payload: response.data,\r\n        });\r\n        //Save token to local storage so that we could persist login state, keep user log in\r\n        //localStorage.setItem(\"token\", response.data.token);\r\n        //history.push(\"/walkman\");\r\n    } catch (err) {\r\n        // if (err.message === \"Network Error\") {\r\n        //     console.log(\"check error\", err);\r\n        // }\r\n\r\n        dispatch<AuthErrorAction>({\r\n            type: ActionTypes.AUTH_ERROR,\r\n            payload: \"- Invalid login credentials\",\r\n        });\r\n    }\r\n};\r\n\r\nexport const signOut = () => async (dispatch: Dispatch) => {\r\n    try {\r\n        const response = await auth.post<JWTType>(\"/signout\");\r\n        dispatch<AuthUserAction>({\r\n            type: ActionTypes.AUTH_USER,\r\n            payload: response.data,\r\n        });\r\n        alert(\"Logged out succesfully\");\r\n    } catch (err) {\r\n        alert(\"Log out failed, try again\");\r\n    }\r\n};\r\n\r\nexport const validateToken = (path: string, retriedCalling: boolean) => async (\r\n    dispatch: Dispatch\r\n) => {\r\n    try {\r\n        const response = await auth.post<JWTType>(\r\n            path,\r\n            {}\r\n            // { headers: { Authorization: cookieService.getAccessToken() } } //assigned in axios' interceptors.request\r\n        );\r\n        //Ensures that our current access token is the newest one; if a new access token is given,\r\n        //we will update our current access token\r\n\r\n        //requireAuth HOC relies on the dispatch below\r\n        dispatch<AuthUserAction>({\r\n            type: ActionTypes.AUTH_USER,\r\n            payload: response.data,\r\n        });\r\n    } catch (err) {\r\n        if (retriedCalling === true) {\r\n            // If it fails again with the new access token (might be a forged token)\r\n            // Invalid token, kick our users out from a certain resource only accecible to signed in users\r\n            // dispatch<AuthErrorAction>({\r\n            //     type: ActionTypes.AUTH_ERROR,\r\n            //     payload: \"\",\r\n            // });\r\n\r\n            //Log them out\r\n            dispatch(signOut() as any);\r\n        }\r\n    }\r\n};\r\n","C:\\projects\\kijiji\\server\\client\\src\\actions\\axiosConfig.tsx",[],"C:\\projects\\kijiji\\server\\client\\src\\CookieService.tsx",[],"C:\\projects\\kijiji\\server\\client\\src\\reducers\\categoryReducer.tsx",[],"C:\\projects\\kijiji\\server\\client\\src\\reducers\\listingReducer.tsx",["185","186"],"C:\\projects\\kijiji\\server\\client\\src\\components\\PostAdForm.tsx",["187","188"],"import React, { useRef, useEffect, useState } from \"react\";\r\nimport {\r\n    Field,\r\n    reduxForm,\r\n    reset,\r\n    change,\r\n    FormErrors,\r\n    InjectedFormProps,\r\n} from \"redux-form\";\r\n//compose is used to make it easier to \"organize\" mapStateToProps and redux form\r\nimport { StoreState } from \"../reducers\";\r\nimport { connect } from \"react-redux\";\r\nimport { PostAdFormProps } from \"./PostAd\";\r\nimport postAdListingImagePlaceHolder from \"../img/postAdListingImagePlaceHolder.png\";\r\nimport { CANADIAN_PROVINCES, CANADIAN_PROVINCE_AND_CITIES } from \"../constants\";\r\nimport { formValueSelector } from \"redux-form\";\r\nimport { fetchCategoriesForListing } from \"../actions\";\r\nimport Loading from \"./Loading\";\r\nexport interface PostAdFormValues {\r\n    title: string;\r\n    description: string;\r\n    category: string;\r\n    image: any;\r\n    province: string;\r\n    city: string;\r\n    street: string;\r\n    price: number;\r\n}\r\n\r\nconst renderError = ({ error, touched }: any) => {\r\n    if (touched && error) {\r\n        //Touched (for input) will be false at first\r\n        //When clicked and then clicked otuside of the input, it will be true\r\n        return <div className=\"errorText\">{error}</div>;\r\n    }\r\n};\r\n\r\nconst renderTextInput = ({ input, label, meta, placeHolder }: any) => {\r\n    //\"component\" property automatically passes props to argument, it has {input properties and meta properties}\r\n    //\"label\" automatically passes props to arguments\r\n    return (\r\n        <div>\r\n            {/* <label>{label}</label> */}\r\n            <input\r\n                className=\"createPostAdInputs\"\r\n                {...input}\r\n                autoComplete=\"off\"\r\n            />\r\n            {renderError(meta)}\r\n        </div>\r\n    );\r\n    //{..input} is shortcut for redux-form; where you take all the input from \"component's\" props and pass it as\r\n    //props to <input>\r\n};\r\n\r\nconst renderTextArea = ({ input, label, meta, placeHolder }: any) => {\r\n    return (\r\n        <div className=\"postAdTextAreaWrap\">\r\n            {/* <label>{label}</label> */}\r\n            <textarea\r\n                className=\"createPostAdTextArea\"\r\n                {...input}\r\n                autoComplete=\"off\"\r\n            />\r\n            {renderError(meta)}\r\n        </div>\r\n    );\r\n};\r\n\r\nconst renderDropDown = ({\r\n    input,\r\n    label,\r\n    meta,\r\n    placeHolder,\r\n    optionValues,\r\n}: any) => {\r\n    return (\r\n        <div>\r\n            {/* <label>{label}</label> */}\r\n            <select\r\n                className=\"createPostAdDropDown\"\r\n                {...input}\r\n                autoComplete=\"off\"\r\n            >\r\n                <option></option>\r\n                {optionValues.map((val) => (\r\n                    <option key={val} value={val}>\r\n                        {val}\r\n                    </option>\r\n                ))}\r\n            </select>\r\n\r\n            {renderError(meta)}\r\n        </div>\r\n    );\r\n};\r\n\r\nconst formatAmount = (input) => {\r\n    //For price input, from: https://blog.harveydelaney.com/redux-form-lifecycle-example/\r\n    if (!input) return;\r\n    if (isNaN(parseInt(input[input.length - 1], 10))) {\r\n        return input.slice(0, -1);\r\n    }\r\n    return input.replace(/,/g, \"\").replace(/\\B(?=(\\d{3})+(?!\\d))/g, \",\");\r\n};\r\n\r\nconst normalizeAmount = (val) => {\r\n    //For price input, from: https://blog.harveydelaney.com/redux-form-lifecycle-example/\r\n    return val.replace(/,/g, \"\");\r\n};\r\n\r\nconst renderFieldSectionLayout = (title: string, children: JSX.Element) => {\r\n    return (\r\n        <div className=\"postAdFieldSection\">\r\n            <div className=\"postAdFieldTitleWrap\">\r\n                <h1>{title}</h1>\r\n            </div>\r\n            {children}\r\n        </div>\r\n    );\r\n};\r\nconst PostAdForm: React.FC<\r\n    PostAdFormProps & InjectedFormProps<{}, PostAdFormProps>\r\n> = (props) => {\r\n    const onSubmit = (formValues: any, dispatch: any) => {\r\n        props.onSubmit(formValues);\r\n    };\r\n\r\n    const renderFields = (): JSX.Element => {\r\n        if (props.categories.length === 0)\r\n            return (\r\n                <div className=\"loadingCenter\">\r\n                    <Loading />\r\n                </div>\r\n            );\r\n        else {\r\n            return (\r\n                <form\r\n                    className=\"postAdForm\"\r\n                    onSubmit={props.handleSubmit(onSubmit)}\r\n                >\r\n                    {renderFieldSectionLayout(\r\n                        \"Ad Title\",\r\n                        <Field\r\n                            name=\"title\"\r\n                            type=\"text\"\r\n                            // label=\"Ad Title\"\r\n                            component={renderTextInput}\r\n                        />\r\n                    )}\r\n\r\n                    {renderFieldSectionLayout(\r\n                        \"Description\",\r\n                        <Field\r\n                            name=\"description\"\r\n                            type=\"text\"\r\n                            component={renderTextArea}\r\n                        />\r\n                    )}\r\n\r\n                    {renderFieldSectionLayout(\r\n                        \"Category\",\r\n                        <Field\r\n                            name=\"category\"\r\n                            component={renderDropDown}\r\n                            optionValues={props.categories}\r\n                        ></Field>\r\n                    )}\r\n\r\n                    {renderFieldSectionLayout(\r\n                        \"Add a photo for your ad\",\r\n                        <React.Fragment>\r\n                            <Field\r\n                                name=\"image\"\r\n                                type=\"file\"\r\n                                component={renderImageUpload}\r\n                                ref={openFileExplorer}\r\n                                value={listingImage}\r\n                                onChange={(event) => {\r\n                                    //For some reason,\r\n                                    //The input's text dosen't change but the input is actually inserted (do formValues.image below)\r\n                                    setListingImage(\r\n                                        URL.createObjectURL(\r\n                                            event.target.files[0]\r\n                                        )\r\n                                    );\r\n                                    // console.log(\r\n                                    //     `Selected file - ${event.target.files[0].name}`\r\n                                    // );\r\n                                    //https://medium.com/@650egor/react-30-day-challenge-day-2-image-upload-preview-2d534f8eaaa\r\n                                }}\r\n                                withRef\r\n                            />\r\n                            <div className=\"imageUploadWrapper\">\r\n                                <input\r\n                                    type=\"button\"\r\n                                    value={listingImage ? \"\" : \"Choose Files!\"}\r\n                                    className=\"postAdChooseListingImage\"\r\n                                    onClick={() =>\r\n                                        openFileExplorer.current.click()\r\n                                    }\r\n                                    style={\r\n                                        listingImage\r\n                                            ? {\r\n                                                  backgroundImage: `url(${listingImage})`,\r\n                                                  backgroundPosition: \"center\",\r\n                                                  backgroundSize: \"cover\",\r\n                                                  backgroundColor: \"white\",\r\n                                              }\r\n                                            : {\r\n                                                  backgroundImage: `url(${postAdListingImagePlaceHolder})`,\r\n                                              }\r\n                                    }\r\n                                />\r\n                                {listingImage && (\r\n                                    <h3\r\n                                        className=\"removeUploadedImage\"\r\n                                        onClick={() => {\r\n                                            setListingImage(null);\r\n                                            props.dispatch(\r\n                                                change(\r\n                                                    \"postAdForm\",\r\n                                                    \"image\",\r\n                                                    null\r\n                                                )\r\n                                            );\r\n                                        }}\r\n                                    >\r\n                                        Remove\r\n                                    </h3>\r\n                                )}\r\n                            </div>\r\n                        </React.Fragment>\r\n                    )}\r\n                    {renderFieldSectionLayout(\r\n                        \"Province\",\r\n                        <Field\r\n                            name=\"province\"\r\n                            type=\"text\"\r\n                            component={renderDropDown}\r\n                            optionValues={CANADIAN_PROVINCES.map((province) => {\r\n                                return province.name;\r\n                            })}\r\n                        />\r\n                    )}\r\n\r\n                    {renderFieldSectionLayout(\r\n                        \"City\",\r\n                        <Field\r\n                            name=\"city\"\r\n                            type=\"text\"\r\n                            component={renderDropDown}\r\n                            optionValues={\r\n                                !props.provinceValue\r\n                                    ? []\r\n                                    : CANADIAN_PROVINCE_AND_CITIES.filter(\r\n                                          (provinceAndCity) =>\r\n                                              provinceAndCity.province ===\r\n                                              props.provinceValue\r\n                                      )[0].cities\r\n                            }\r\n                        />\r\n                    )}\r\n\r\n                    {renderFieldSectionLayout(\r\n                        \"Street\",\r\n                        <Field\r\n                            name=\"street\"\r\n                            type=\"text\"\r\n                            component={renderTextInput}\r\n                        />\r\n                    )}\r\n                    {renderFieldSectionLayout(\r\n                        \"Price ($ CAD)\",\r\n                        <Field\r\n                            name=\"price\"\r\n                            type=\"text\"\r\n                            format={formatAmount}\r\n                            normalize={normalizeAmount}\r\n                            component={renderTextInput}\r\n                        />\r\n                    )}\r\n\r\n                    <button className=\"postAdFormSubmit\">Post Your Ad</button>\r\n                </form>\r\n            );\r\n        }\r\n    };\r\n\r\n    useEffect(() => {\r\n        props.fetchCategoriesForListing();\r\n        //props.dispatch(change(\"postAdForm\", \"image\", \"hi\"));\r\n        // props.dispatch(change(\"postAdForm\", \"description\", \"hi\"));\r\n    }, []);\r\n\r\n    const renderImageUpload = ({\r\n        input,\r\n        label,\r\n        meta,\r\n        placeHolder,\r\n        optionValues,\r\n    }: any) => {\r\n        //We cannot pass in {...input} (so that the input is submited when onSubmit button is clicked) like our other renders because <input> has type=\"file\"\r\n        //Must do this instead: https://github.com/redux-form/redux-form/issues/3686\r\n        //We do not have a name in <input> so that redux won't complain with validate (thus making this input optional)\r\n        return (\r\n            <input\r\n                type=\"file\"\r\n                accept=\"image/*\"\r\n                style={{ display: \"none\" }}\r\n                ref={openFileExplorer}\r\n                onChange={(...args) => {\r\n                    //The input's text dosen't change but the input is actually inserted (do formValues.image below)\r\n                    //  let event = args.map((val) => val.nativeEvent)[0];\r\n                    input.onChange(...args);\r\n                    //@ts-ignore\r\n                    // setListingImage(URL.createObjectURL(event.target.files[0]));\r\n                    //chagne also dosen't change the textbox input\r\n                    // props.dispatch(\r\n                    //     change(\"postAdForm\", \"image\", event.target.files[0])\r\n                    // );\r\n                }}\r\n            />\r\n        );\r\n    };\r\n\r\n    const [listingImage, setListingImage] = useState(null);\r\n\r\n    const openFileExplorer = useRef(null);\r\n\r\n    return <React.Fragment>{renderFields()}</React.Fragment>;\r\n};\r\n\r\nconst validate = (\r\n    formValues: PostAdFormValues\r\n): FormErrors<PostAdFormValues> => {\r\n    //MUST BE NAMED VALIDATE! Other names would be ignored by reduxForm(..)\r\n    const errors: FormErrors<PostAdFormValues> = {};\r\n    //If you return an empty object, redux form will assume everything is ok\r\n    // console.log(\"FILE UPLOAD VALUE\", formValues.image);\r\n    if (!formValues.title) {\r\n        //user did not enter title, so undefined\r\n        errors.title = \"You must enter a title\";\r\n        //Must be the same name as field name! The \"error\" property in {meta} would receive this\r\n    }\r\n\r\n    if (!formValues.description) {\r\n        errors.description = \"You must enter a description\";\r\n    }\r\n\r\n    if (!formValues.category) {\r\n        errors.category = \"You must enter a category\";\r\n    }\r\n\r\n    if (!formValues.province) {\r\n        errors.province = \"You must enter a province\";\r\n    }\r\n\r\n    if (!formValues.city) {\r\n        errors.city = \"You must enter a city\";\r\n    }\r\n\r\n    if (!formValues.street) {\r\n        errors.street = \"You must enter a street\";\r\n    }\r\n    if (!formValues.price) {\r\n        errors.price = \"You must enter a price\";\r\n    }\r\n\r\n    return errors;\r\n    //Erors is going to be passed to renderInput's meta\r\n};\r\nconst selector = formValueSelector(\"postAdForm\");\r\n//get form values with formvalueSelector\r\n//https://redux-form.com/6.6.0/docs/api/formvalueselector.md/\r\nconst mapStateToProps = (state: StoreState) => {\r\n    return {\r\n        categories: state.categories,\r\n        provinceValue: selector(state, \"province\"),\r\n    };\r\n};\r\n\r\nexport default connect(mapStateToProps, { fetchCategoriesForListing })(\r\n    reduxForm<{}, PostAdFormProps>({\r\n        form: \"postAdForm\",\r\n        validate,\r\n    })(PostAdForm)\r\n);\r\n","C:\\projects\\kijiji\\server\\client\\src\\actions\\listing.tsx",[],"C:\\projects\\kijiji\\server\\client\\src\\components\\Loading.tsx",["189"],"import React from \"react\";\r\nimport { css } from \"@emotion/core\";\r\nimport ClipLoader from \"react-spinners/ClipLoader\";\r\nconst Loading = (): JSX.Element => {\r\n    return <ClipLoader color={\"grey\"} loading={true} />;\r\n};\r\nexport default Loading;\r\n","C:\\projects\\kijiji\\server\\client\\src\\constants.tsx",[],"C:\\projects\\kijiji\\server\\client\\src\\components\\Listings.tsx",["190","191","192","193","194"],"C:\\projects\\kijiji\\server\\client\\src\\components\\Listing.tsx",["195"],"C:\\projects\\kijiji\\server\\client\\src\\components\\Pagination.tsx",["196","197"],"import React, { useState } from \"react\";\r\nimport history from \"../browserHistory\";\r\n\r\ninterface PaginationProps {\r\n    totalItems: number;\r\n    itemLimit: number;\r\n    currentPage: number;\r\n    onClickCallback(pageNumber: number): void;\r\n    query: string;\r\n}\r\n\r\nconst Pagination: React.FC<PaginationProps> = (props) => {\r\n    const renderPageItems = (totalItems: number, itemLimit: number) => {\r\n        let numberOfPageItems = Math.ceil(totalItems / itemLimit); //rounds up\r\n        let pageItems = [];\r\n        for (let i = 0; i < numberOfPageItems; i++) {\r\n            pageItems.push(i + 1);\r\n        }\r\n\r\n        return (\r\n            <ul className=\"pagination\">\r\n                {pageItems.map((pageNumber) => {\r\n                    return (\r\n                        <li\r\n                            key={pageNumber}\r\n                            onClick={() => {\r\n                                props.onClickCallback(pageNumber);\r\n                                history.push({\r\n                                    pathname: `/listings/${pageNumber}`,\r\n                                    search: `${props.query}`,\r\n                                });\r\n                            }}\r\n                            className={\r\n                                props.currentPage == pageNumber\r\n                                    ? \"pageItemSelected\"\r\n                                    : \"pageItem\"\r\n                            }\r\n                        >\r\n                            {pageNumber}\r\n                        </li>\r\n                    );\r\n                })}\r\n            </ul>\r\n        );\r\n    };\r\n    return (\r\n        <React.Fragment>\r\n            {renderPageItems(props.totalItems, props.itemLimit)}\r\n        </React.Fragment>\r\n    );\r\n};\r\n\r\nexport default Pagination;\r\n","C:\\projects\\kijiji\\server\\client\\src\\components\\Searchbar.tsx",["198","199","200","201","202","203"],"C:\\projects\\kijiji\\server\\client\\src\\windowDimensions.tsx",["204"],"import React from \"react\";\r\n\r\nimport { useState, useEffect } from \"react\";\r\n\r\nconst getWindowDimensions = () => {\r\n    const { innerWidth: width, innerHeight: height } = window;\r\n    return {\r\n        width,\r\n        height,\r\n    };\r\n};\r\n\r\nconst useWindowDimensions = () => {\r\n    const [windowDimensions, setWindowDimensions] = useState(\r\n        getWindowDimensions()\r\n    );\r\n\r\n    useEffect(() => {\r\n        function handleResize() {\r\n            setWindowDimensions(getWindowDimensions());\r\n        }\r\n\r\n        window.addEventListener(\"resize\", handleResize);\r\n        return () => window.removeEventListener(\"resize\", handleResize);\r\n    }, []);\r\n\r\n    return windowDimensions;\r\n};\r\nexport default useWindowDimensions;\r\n","C:\\projects\\kijiji\\server\\client\\src\\components\\Modal.tsx",[],"C:\\projects\\kijiji\\server\\client\\src\\components\\SearchFilterForm.tsx",["205","206","207"],"import React, { ComponentType, useState, useEffect } from \"react\";\r\nimport {\r\n    Field,\r\n    reduxForm,\r\n    InjectedFormProps,\r\n    formValueSelector,\r\n} from \"redux-form\";\r\n//compose is used to make it easier to \"organize\" mapStateToProps and redux form\r\nimport { StoreState } from \"../reducers\";\r\nimport { connect } from \"react-redux\";\r\nimport { SearchFilterFormProps } from \"./Searchbar\";\r\nimport { fetchCategoriesForListing } from \"../actions\";\r\nimport LoadingDots from \"./LoadingDots\";\r\nimport { CANADIAN_PROVINCES, CANADIAN_PROVINCE_AND_CITIES } from \"../constants\";\r\n\r\n//Typescriptand redux form:\r\n//https://levelup.gitconnected.com/react-js-typescript-redux-redux-form-jest-e522995ebe36\r\n\r\n//Need to hoist render methods up or else it will give error where it will unfocus after first characther is typed\r\n//https://stackoverflow.com/questions/39839051/using-redux-form-im-losing-focus-after-typing-the-first-character\r\n\r\nexport interface SearchFilterFormValues {\r\n    search?: string;\r\n    category?: string;\r\n    province?: string;\r\n    city?: string;\r\n}\r\n\r\nconst SearchFilterForm: React.FC<\r\n    SearchFilterFormProps & InjectedFormProps<{}, SearchFilterFormProps>\r\n> = (props) => {\r\n    const renderDropDown = ({\r\n        name,\r\n        input,\r\n        label,\r\n        meta,\r\n        placeHolder,\r\n        optionValues,\r\n    }: any) => {\r\n        return (\r\n            <select\r\n                className=\"modalFilterCategoriesDropdown\"\r\n                autoComplete=\"off\"\r\n                {...input}\r\n            >\r\n                <option value=\"\"></option>\r\n                {optionValues.map((val) => (\r\n                    <option key={val} value={val}>\r\n                        {val}\r\n                    </option>\r\n                ))}\r\n            </select>\r\n        );\r\n    };\r\n\r\n    const onSubmit = (formValues: SearchFilterFormValues, dispatch: any) => {\r\n        if (!formValues.province) {\r\n            //City field does not get reseted to \" \" if user makes province an empty field first\r\n            formValues.city = \"\";\r\n        }\r\n        props.onSubmit(formValues);\r\n    };\r\n\r\n    useEffect(() => {\r\n        props.fetchCategoriesForListing();\r\n    }, []);\r\n\r\n    const renderFields = () => {\r\n        if (props.categories.length === 0) {\r\n            return (\r\n                <div className=\"centerLoadingForModal\">\r\n                    <LoadingDots />\r\n                </div>\r\n            );\r\n        } else {\r\n            return (\r\n                <form onSubmit={props.handleSubmit(onSubmit)}>\r\n                    <h3>Categories</h3>\r\n                    <Field\r\n                        type=\"text\"\r\n                        name=\"category\"\r\n                        label=\"category\"\r\n                        component={renderDropDown}\r\n                        optionValues={props.categories}\r\n                    />\r\n                    <div className=\"modalFilterLocationWrap\">\r\n                        <div className=\"modalLocationDropdownWrap\">\r\n                            <h3>Province</h3>\r\n                            <Field\r\n                                name=\"province\"\r\n                                label=\"province\"\r\n                                type=\"text\"\r\n                                component={renderDropDown}\r\n                                optionValues={CANADIAN_PROVINCES.map(\r\n                                    (province) => {\r\n                                        return province.name;\r\n                                    }\r\n                                )}\r\n                            />\r\n                        </div>\r\n                        <div className=\"modalLocationDropdownWrap\">\r\n                            <h3>City</h3>\r\n                            <Field\r\n                                name=\"city\"\r\n                                label=\"city\"\r\n                                type=\"text\"\r\n                                component={renderDropDown}\r\n                                optionValues={\r\n                                    !props.provinceValue\r\n                                        ? []\r\n                                        : CANADIAN_PROVINCE_AND_CITIES.filter(\r\n                                              (provinceAndCity) =>\r\n                                                  provinceAndCity.province ===\r\n                                                  props.provinceValue\r\n                                          )[0].cities\r\n                                }\r\n                            />\r\n                        </div>\r\n                    </div>\r\n                    <button className=\"modalAcceptButton\">Accept</button>\r\n                    {/* https://stackoverflow.com/questions/41590766/redux-form-always-validates-even-on-a-normal-button-press */}\r\n                    {/* By adding type=\"button\" the button will not be a \"submit\" button */}\r\n                    <button\r\n                        type=\"button\"\r\n                        className=\"modalCancelButton\"\r\n                        onClick={props.onCancel}\r\n                    >\r\n                        Cancel\r\n                    </button>\r\n                </form>\r\n            );\r\n        }\r\n    };\r\n    return <React.Fragment>{renderFields()}</React.Fragment>;\r\n};\r\n\r\nconst validate = (formValues: SearchFilterFormValues) => {\r\n    //MUST BE NAMED VALIDATE! Other names would be ignored by reduxForm(..)\r\n    const errors = {};\r\n    //If you return an empty object, redux form will assume everything is ok\r\n    return errors;\r\n};\r\n\r\nconst selector = formValueSelector(\"searchFilterForm\");\r\nconst mapStateToProps = (state: StoreState) => {\r\n    return {\r\n        categories: state.categories,\r\n        provinceValue: selector(state, \"province\"),\r\n    };\r\n};\r\n\r\nexport default connect(mapStateToProps, { fetchCategoriesForListing })(\r\n    reduxForm<{}, SearchFilterFormProps>({\r\n        form: \"searchFilterForm\",\r\n        validate,\r\n    })(SearchFilterForm)\r\n);\r\n","C:\\projects\\kijiji\\server\\client\\src\\components\\LoadingDots.tsx",[],"C:\\projects\\kijiji\\server\\client\\src\\components\\ListingDetail.tsx",["208","209","210","211","212"],"C:\\projects\\kijiji\\server\\client\\src\\components\\Profile.tsx",["213","214","215","216","217","218"],"C:\\projects\\kijiji\\server\\client\\src\\reducers\\profileReducer.tsx",["219"],"C:\\projects\\kijiji\\server\\client\\src\\actions\\profile.tsx",[],{"ruleId":"220","replacedBy":"221"},{"ruleId":"222","replacedBy":"223"},{"ruleId":"224","severity":1,"message":"225","line":1,"column":17,"nodeType":"226","messageId":"227","endLine":1,"endColumn":26},{"ruleId":"224","severity":1,"message":"228","line":1,"column":28,"nodeType":"226","messageId":"227","endLine":1,"endColumn":36},{"ruleId":"224","severity":1,"message":"229","line":2,"column":10,"nodeType":"226","messageId":"227","endLine":2,"endColumn":14},{"ruleId":"224","severity":1,"message":"230","line":2,"column":16,"nodeType":"226","messageId":"227","endLine":2,"endColumn":27},{"ruleId":"224","severity":1,"message":"231","line":6,"column":10,"nodeType":"226","messageId":"227","endLine":6,"endColumn":20},{"ruleId":"224","severity":1,"message":"232","line":7,"column":25,"nodeType":"226","messageId":"227","endLine":7,"endColumn":32},{"ruleId":"224","severity":1,"message":"233","line":8,"column":8,"nodeType":"226","messageId":"227","endLine":8,"endColumn":18},{"ruleId":"224","severity":1,"message":"234","line":9,"column":8,"nodeType":"226","messageId":"227","endLine":9,"endColumn":21},{"ruleId":"224","severity":1,"message":"230","line":6,"column":10,"nodeType":"226","messageId":"227","endLine":6,"endColumn":21},{"ruleId":"224","severity":1,"message":"235","line":1,"column":17,"nodeType":"226","messageId":"227","endLine":1,"endColumn":30},{"ruleId":"224","severity":1,"message":"225","line":1,"column":32,"nodeType":"226","messageId":"227","endLine":1,"endColumn":41},{"ruleId":"224","severity":1,"message":"236","line":5,"column":5,"nodeType":"226","messageId":"227","endLine":5,"endColumn":10},{"ruleId":"224","severity":1,"message":"237","line":6,"column":5,"nodeType":"226","messageId":"227","endLine":6,"endColumn":11},{"ruleId":"224","severity":1,"message":"231","line":11,"column":10,"nodeType":"226","messageId":"227","endLine":11,"endColumn":20},{"ruleId":"224","severity":1,"message":"235","line":1,"column":17,"nodeType":"226","messageId":"227","endLine":1,"endColumn":30},{"ruleId":"224","severity":1,"message":"225","line":1,"column":32,"nodeType":"226","messageId":"227","endLine":1,"endColumn":41},{"ruleId":"224","severity":1,"message":"236","line":5,"column":5,"nodeType":"226","messageId":"227","endLine":5,"endColumn":10},{"ruleId":"224","severity":1,"message":"237","line":6,"column":5,"nodeType":"226","messageId":"227","endLine":6,"endColumn":11},{"ruleId":"224","severity":1,"message":"238","line":6,"column":5,"nodeType":"226","messageId":"227","endLine":6,"endColumn":34},{"ruleId":"224","severity":1,"message":"239","line":4,"column":8,"nodeType":"226","messageId":"227","endLine":4,"endColumn":15},{"ruleId":"224","severity":1,"message":"234","line":5,"column":8,"nodeType":"226","messageId":"227","endLine":5,"endColumn":21},{"ruleId":"224","severity":1,"message":"232","line":2,"column":10,"nodeType":"226","messageId":"227","endLine":2,"endColumn":17},{"ruleId":"224","severity":1,"message":"240","line":3,"column":8,"nodeType":"226","messageId":"227","endLine":3,"endColumn":9},{"ruleId":"224","severity":1,"message":"236","line":5,"column":5,"nodeType":"226","messageId":"227","endLine":5,"endColumn":10},{"ruleId":"241","severity":1,"message":"242","line":294,"column":8,"nodeType":"243","endLine":294,"endColumn":10,"suggestions":"244"},{"ruleId":"224","severity":1,"message":"245","line":2,"column":10,"nodeType":"226","messageId":"227","endLine":2,"endColumn":13},{"ruleId":"224","severity":1,"message":"229","line":2,"column":10,"nodeType":"226","messageId":"227","endLine":2,"endColumn":14},{"ruleId":"224","severity":1,"message":"239","line":3,"column":8,"nodeType":"226","messageId":"227","endLine":3,"endColumn":15},{"ruleId":"224","severity":1,"message":"246","line":16,"column":8,"nodeType":"226","messageId":"227","endLine":16,"endColumn":19},{"ruleId":"224","severity":1,"message":"247","line":17,"column":23,"nodeType":"226","messageId":"227","endLine":17,"endColumn":32},{"ruleId":"241","severity":1,"message":"248","line":203,"column":8,"nodeType":"243","endLine":203,"endColumn":41,"suggestions":"249"},{"ruleId":"224","severity":1,"message":"229","line":2,"column":10,"nodeType":"226","messageId":"227","endLine":2,"endColumn":14},{"ruleId":"224","severity":1,"message":"228","line":1,"column":17,"nodeType":"226","messageId":"227","endLine":1,"endColumn":25},{"ruleId":"250","severity":1,"message":"251","line":34,"column":51,"nodeType":"252","messageId":"253","endLine":34,"endColumn":53},{"ruleId":"224","severity":1,"message":"229","line":2,"column":10,"nodeType":"226","messageId":"227","endLine":2,"endColumn":14},{"ruleId":"224","severity":1,"message":"254","line":11,"column":10,"nodeType":"226","messageId":"227","endLine":11,"endColumn":16},{"ruleId":"224","severity":1,"message":"255","line":11,"column":18,"nodeType":"226","messageId":"227","endLine":11,"endColumn":25},{"ruleId":"256","severity":1,"message":"257","line":46,"column":29,"nodeType":"258","messageId":"259","endLine":46,"endColumn":31},{"ruleId":"241","severity":1,"message":"260","line":97,"column":8,"nodeType":"243","endLine":97,"endColumn":10,"suggestions":"261"},{"ruleId":"256","severity":1,"message":"257","line":103,"column":48,"nodeType":"258","messageId":"259","endLine":103,"endColumn":50},{"ruleId":"224","severity":1,"message":"262","line":1,"column":8,"nodeType":"226","messageId":"227","endLine":1,"endColumn":13},{"ruleId":"224","severity":1,"message":"235","line":1,"column":17,"nodeType":"226","messageId":"227","endLine":1,"endColumn":30},{"ruleId":"224","severity":1,"message":"228","line":1,"column":32,"nodeType":"226","messageId":"227","endLine":1,"endColumn":40},{"ruleId":"241","severity":1,"message":"242","line":66,"column":8,"nodeType":"243","endLine":66,"endColumn":10,"suggestions":"263"},{"ruleId":"224","severity":1,"message":"229","line":2,"column":10,"nodeType":"226","messageId":"227","endLine":2,"endColumn":14},{"ruleId":"224","severity":1,"message":"239","line":3,"column":8,"nodeType":"226","messageId":"227","endLine":3,"endColumn":15},{"ruleId":"224","severity":1,"message":"264","line":9,"column":5,"nodeType":"226","messageId":"227","endLine":9,"endColumn":16},{"ruleId":"241","severity":1,"message":"242","line":25,"column":8,"nodeType":"243","endLine":25,"endColumn":10,"suggestions":"265"},{"ruleId":"224","severity":1,"message":"266","line":49,"column":17,"nodeType":"226","messageId":"227","endLine":49,"endColumn":27},{"ruleId":"224","severity":1,"message":"228","line":1,"column":28,"nodeType":"226","messageId":"227","endLine":1,"endColumn":36},{"ruleId":"224","severity":1,"message":"229","line":2,"column":10,"nodeType":"226","messageId":"227","endLine":2,"endColumn":14},{"ruleId":"224","severity":1,"message":"239","line":3,"column":8,"nodeType":"226","messageId":"227","endLine":3,"endColumn":15},{"ruleId":"224","severity":1,"message":"267","line":6,"column":27,"nodeType":"226","messageId":"227","endLine":6,"endColumn":44},{"ruleId":"224","severity":1,"message":"268","line":7,"column":8,"nodeType":"226","messageId":"227","endLine":7,"endColumn":37},{"ruleId":"241","severity":1,"message":"242","line":22,"column":8,"nodeType":"243","endLine":22,"endColumn":10,"suggestions":"269"},{"ruleId":"224","severity":1,"message":"240","line":3,"column":8,"nodeType":"226","messageId":"227","endLine":3,"endColumn":9},"no-native-reassign",["270"],"no-negated-in-lhs",["271"],"@typescript-eslint/no-unused-vars","'useEffect' is defined but never used.","Identifier","unusedVar","'useState' is defined but never used.","'Link' is defined but never used.","'useLocation' is defined but never used.","'StoreState' is defined but never used.","'Listing' is defined but never used.","'jwt_decode' is defined but never used.","'CookieService' is defined but never used.","'ComponentType' is defined but never used.","'reset' is defined but never used.","'change' is defined but never used.","'UploadImageToCloudinaryAction' is defined but never used.","'history' is defined but never used.","'_' is defined but never used.","react-hooks/exhaustive-deps","React Hook useEffect has a missing dependency: 'props'. Either include it or remove the dependency array. However, 'props' will change when *any* prop changes, so the preferred fix is to destructure the 'props' object outside of the useEffect call and refer to those specific props inside useEffect.","ArrayExpression",["272"],"'css' is defined but never used.","'queryString' is defined but never used.","'useParams' is defined but never used.","React Hook useEffect has missing dependencies: 'currentPage', 'props', and 'selectedSort'. Either include them or remove the dependency array. However, 'props' will change when *any* prop changes, so the preferred fix is to destructure the 'props' object outside of the useEffect call and refer to those specific props inside useEffect.",["273"],"eqeqeq","Expected '===' and instead saw '=='.","BinaryExpression","unexpected","'filter' is defined but never used.","'initial' is defined but never used.","array-callback-return","Array.prototype.map() expects a return value from arrow function.","ArrowFunctionExpression","expectedInside","React Hook useEffect has missing dependencies: 'queryValues.category', 'queryValues.city', 'queryValues.province', and 'queryValues.search'. Either include them or remove the dependency array.",["274"],"'React' is defined but never used.",["275"],"'ServerError' is defined but never used.",["276"],"'listing_id' is assigned a value but never used.","'ListingDetailType' is defined but never used.","'postAdListingImagePlaceHolder' is defined but never used.",["277"],"no-global-assign","no-unsafe-negation",{"desc":"278","fix":"279"},{"desc":"280","fix":"281"},{"desc":"282","fix":"283"},{"desc":"278","fix":"284"},{"desc":"278","fix":"285"},{"desc":"278","fix":"286"},"Update the dependencies array to be: [props]",{"range":"287","text":"288"},"Update the dependencies array to be: [currentPage, props, props.match.params.page, search, selectedSort]",{"range":"289","text":"290"},"Update the dependencies array to be: [queryValues.category, queryValues.city, queryValues.province, queryValues.search]",{"range":"291","text":"292"},{"range":"293","text":"288"},{"range":"294","text":"288"},{"range":"295","text":"288"},[11396,11398],"[props]",[9329,9362],"[currentPage, props, props.match.params.page, search, selectedSort]",[3505,3507],"[queryValues.category, queryValues.city, queryValues.province, queryValues.search]",[2181,2183],[901,903],[883,885]]