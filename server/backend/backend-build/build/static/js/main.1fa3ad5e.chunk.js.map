{"version":3,"sources":["actions/types.tsx","browserHistory.tsx","CookieService.tsx","reducers/authReducer.tsx","reducers/categoryReducer.tsx","reducers/listingReducer.tsx","reducers/profileReducer.tsx","reducers/index.tsx","Root.tsx","actions/axiosConfig.tsx","actions/auth.tsx","constants.tsx","actions/listing.tsx","components/Modal.tsx","components/LoadingDots.tsx","components/SearchFilterForm.tsx","components/Searchbar.tsx","windowDimensions.tsx","components/Header.tsx","img/kijijiLogo.png","components/RegisterForm.tsx","components/Register.tsx","components/SignInForm.tsx","components/SignIn.tsx","components/requireAuth.tsx","img/postAdListingImagePlaceHolder.png","components/Loading.tsx","components/EditOrPostAdForm.tsx","components/PostAd.tsx","components/Listing.tsx","components/Pagination.tsx","components/Listings.tsx","img/defaultProfilePic.jpg","components/ListingDetail.tsx","img/emptyBox.svg","components/Profile.tsx","actions/profile.tsx","components/EditAd.tsx","components/NotFound.tsx","components/Routes.tsx","components/App.tsx","index.tsx"],"names":["ActionTypes","createBrowserHistory","ACCESS_TOKEN","CookieService","_service","getService","this","setToken","tokenObj","Cookies","set","getAccessToken","get","AUTH_STATE","authenticated","errorMessage","authReducer","state","action","type","AUTH_USER","payload","token","AUTH_ERROR","categoryReducer","FETCH_CATEGORIES_FOR_LISTING","FETCH_CATEGORIES_FOR_LISTING_ERROR","listingReducer","CREATE_LISTING","LISTING_ERROR","FETCH_LISTINGS","FETCH_LISTING_DETAIL","EDIT_LISTING","DELETE_LISTING","data","FETCH_USER_PROFILE","FETCH_USER_PROFILE_ERROR","combineReducers","authStatus","categories","listingInfo","profileInfo","profileReducer","form","formReducer","store","createStore","reducers","composeWithDevTools","applyMiddleware","reduxThunk","provider","initialState","children","cookieService","axiosConfig","axios","create","withCredentials","baseURL","interceptors","request","use","config","headers","error","Promise","reject","response","originalRequest","status","_retry","post","then","res","dispatch","validateToken","url","catch","signOut","a","auth","history","push","alert","path","retriedCalling","SERVER_ERROR_MESSAGE","CANADIAN_PROVINCES","name","abbreviation","CANADIAN_PROVINCE_AND_CITIES","province","cities","fetchCategoriesForListing","Modal","props","ReactDOM","createPortal","onClick","onDismiss","className","e","stopPropagation","title","content","document","querySelector","LoadingDots","size","color","loading","selector","formValueSelector","connect","provinceValue","reduxForm","validate","formValues","renderDropDown","input","optionValues","label","meta","placeHolder","autoComplete","value","map","val","onSubmit","city","useEffect","Fragment","length","handleSubmit","Field","component","filter","provinceAndCity","onCancel","Searchbar","useState","showFilterModal","setShowFilterModal","filterQueries","setFilterQueries","searchValue","setSearchValue","initialLoad","setInitialLoad","onSubmitFilter","console","log","category","setFilterCategory","setFilterProvince","setFilterCity","keyNames","Object","keys","filterQuery","editedFilterQuery","slice","onCancelFilter","filterCategory","filterProvince","filterCity","search","useLocation","queryValues","queryString","parse","renderInitialValuesForFilter","initialValues","directToListingsPage","pathname","data-testid","icon","faSlidersH","placeholder","onChange","event","target","trim","onKeyDown","key","preventDefault","faSearch","getWindowDimensions","window","width","innerWidth","height","innerHeight","useWindowDimensions","windowDimensions","setWindowDimensions","handleResize","addEventListener","removeEventListener","src","alt","renderError","touched","renderTextInput","renderPasswordInput","errors","email","firstName","lastName","password","signUp","onSubmitRegister","signIn","onSubmitSignIn","hoc","ChildComponent","ComposedComponent","shouldNavigateAway","location","Component","Loading","renderAutoFocusTextInput","autoFocus","renderTextArea","formatAmount","isNaN","parseInt","replace","normalizeAmount","renderFieldSectionLayout","description","street","price","enableReinitialize","openFileExplorer","useRef","listingImage","setListingImage","cloudinaryImage","setCloudinaryImage","renderImageUpload","accept","style","display","ref","withRef","URL","createObjectURL","files","current","click","backgroundImage","postAdListingImagePlaceHolder","backgroundPosition","backgroundSize","backgroundColor","change","format","normalize","onDelete","createListing","jwtInfo","jwt_decode","cloudinaryImagePath","image","formData","FormData","append","imagePathResponse","UPLOAD_IMAGE_TO_CLOUDINARY","listingResponse","requireAuth","onSubmitPostListing","EditOrPostAdForm","listing_id","listing_name","listing_image","listing_price","listing_description","listing_date","faPencilAlt","onError","moment","Pagination","totalItems","itemLimit","numberOfPageItems","Math","ceil","pageItems","i","pageNumber","onClickCallback","query","currentPage","renderPageItems","ORDER_BY_OLDEST_DATE","ORDER_BY_NEWEST_DATE","ORDER_BY_LOWEST_PRICE","ORDER_BY_HIGHEST_PRICE","fetchListingsByOldestDate","queryPath","fetchListingsByNewestDate","fetchListingsByLowestPrice","fetchListingsByHighestPrice","match","params","page","setCurrentPage","selectedSort","setSelectedSort","handleDropdownChange","valueOfSelectedOption","pageNumberClicked","backAndForwardButtonClicked","onpopstate","listings","totalListings","limitPerPage","listing","listingDetail","fetchListingDetail","listingId","showMore","setShowMore","id","first_name","last_name","member_since","category_name","defaultProfilePic","renderListingDetail","fetchUserProfile","renderListings","emptyBox","validateUserAndGetListingDetail","deleteListing","cloudinaryPublicId","delete","editListing","FileList","put","patch","onEditListing","cloudinaryPaths","split","cloudinaryLastPath","pop","onDeleteListing","renderContent","NotFound","Routes","exact","Register","SignIn","PostAd","Listings","ListingDetail","Profile","EditAd","App","listen","_","scrollTo","render","StrictMode","Root","getElementById"],"mappings":"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KAAM,WAAYC,aAAc,MAClC,CAAED,KAAM,gBAAiBC,aAAc,MACvC,CAAED,KAAM,4BAA6BC,aAAc,MACnD,CAAED,KAAM,wBAAyBC,aAAc,MAC/C,CAAED,KAAM,cAAeC,aAAc,MACrC,CAAED,KAAM,UAAWC,aAAc,MACjC,CAAED,KAAM,UAAWC,aAAc,MACjC,CAAED,KAAM,uBAAwBC,aAAc,MAC9C,CAAED,KAAM,SAAUC,aAAc,MAChC,CAAED,KAAM,eAAgBC,aAAc,MACtC,CAAED,KAAM,kBAAmBC,aAAc,OAGhCC,EAA+B,CACxC,CACIC,SAAU,UACVC,OAAQ,CACJ,UACA,iBACA,WACA,WACA,QACA,aACA,aACA,SACA,eACA,UACA,WACA,oBACA,SACA,UACA,aACA,UACA,QACA,cACA,UACA,aACA,aACA,UACA,WACA,QACA,WACA,eACA,gBACA,iBACA,OACA,aACA,WACA,SACA,eACA,mBACA,YAGR,CACID,SAAU,mBACVC,OAAQ,CACJ,UACA,QACA,qBACA,cACA,cACA,gBACA,YACA,UACA,gBACA,YACA,UACA,WACA,aACA,UACA,UACA,aACA,SACA,QACA,UACA,kBACA,WACA,YACA,iBACA,SACA,YACA,UACA,eACA,kBACA,UACA,QACA,UACA,SACA,aACA,YACA,YACA,cACA,SACA,WACA,YACA,WACA,QACA,eACA,WACA,UACA,eAGR,CACID,SAAU,WACVC,OAAQ,CACJ,SACA,YACA,aACA,UACA,YACA,UACA,oBACA,YACA,WACA,UACA,YACA,aAGR,CACID,SAAU,gBACVC,OAAQ,CACJ,WACA,YACA,aACA,cACA,UACA,gBACA,sBACA,WACA,YACA,cACA,aACA,SACA,aACA,YACA,oBAGR,CACID,SAAU,4BACVC,OAAQ,CACJ,WACA,eACA,WACA,iBACA,gBACA,kBACA,UACA,cACA,aACA,WAGR,CACID,SAAU,wBACVC,OAAQ,CAAC,oBAAqB,iBAAkB,gBAEpD,CACID,SAAU,cACVC,OAAQ,CACJ,UACA,eACA,SACA,YACA,mBACA,gBACA,SACA,YACA,SACA,UACA,kBACA,WACA,cACA,YACA,YACA,cACA,mBACA,aACA,UACA,aACA,QACA,oBACA,cACA,UACA,aACA,YACA,WACA,UACA,cAGR,CACID,SAAU,UACVC,OAAQ,CAAC,YAEb,CACID,SAAU,UACVC,OAAQ,CACJ,OACA,SACA,eACA,WACA,eACA,YACA,SACA,WACA,aACA,aACA,qBACA,eACA,qBACA,SACA,gBACA,cACA,aACA,YACA,WACA,YACA,gBACA,QACA,QACA,cACA,YACA,SACA,UACA,QACA,aACA,gBACA,aACA,OACA,SACA,aACA,WACA,mBACA,UACA,gBACA,cACA,YACA,YACA,SACA,eACA,cACA,kCACA,eACA,aACA,eACA,aACA,mBACA,oBACA,UACA,UACA,iBACA,WACA,UACA,aACA,cACA,SACA,eACA,WACA,oBACA,YACA,aACA,UACA,UACA,aACA,gBACA,WACA,SACA,eACA,UACA,SACA,SACA,cACA,SACA,SACA,cACA,YACA,YACA,UACA,mBACA,UACA,UACA,uBACA,gBACA,WACA,QACA,sBACA,UACA,cACA,YACA,YACA,cACA,mBACA,eACA,YACA,iBACA,WACA,eACA,aACA,WACA,YACA,UACA,UACA,WACA,WACA,YACA,YACA,cACA,gBACA,aACA,UACA,eACA,YACA,UACA,SACA,cACA,SACA,SACA,UACA,SACA,UACA,SACA,kBACA,WACA,oBACA,aACA,SAGR,CACID,SAAU,uBACVC,OAAQ,CACJ,WACA,WACA,YACA,gBACA,SACA,aACA,aAGR,CACID,SAAU,SACVC,OAAQ,CACJ,OACA,aACA,YACA,OACA,QACA,aACA,QACA,WACA,cACA,SACA,OACA,WACA,WACA,WACA,kBACA,gBACA,YACA,eACA,YACA,UACA,SACA,cACA,UACA,gBACA,aACA,cACA,aACA,YACA,UACA,QACA,YACA,QACA,iBACA,SACA,cACA,gBACA,gBACA,UAGR,CACID,SAAU,eACVC,OAAQ,CACJ,UACA,UACA,gBACA,WACA,UACA,UACA,QACA,gBACA,QACA,YACA,SACA,UACA,UACA,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","file":"static/js/main.1fa3ad5e.chunk.js","sourcesContent":["import {\r\n    AuthUserAction,\r\n    AuthErrorAction,\r\n    FetchCategoriesForListingAction,\r\n    FetchCategoriesForListingErrorAction,\r\n    UploadImageToCloudinaryAction,\r\n    CreateListingAction,\r\n    ListingErrorAction,\r\n    FetchListingsAction,\r\n    FetchListingDetailAction,\r\n    DeleteListingAction,\r\n} from \"../actions\";\r\nimport { EditListingAction } from \"./listing\";\r\nimport { FetchUserProfileAction, FetchUserProfileErrorAction } from \"./profile\";\r\nexport enum ActionTypes {\r\n    AUTH_USER,\r\n    AUTH_ERROR,\r\n    FETCH_CATEGORIES_FOR_LISTING,\r\n    FETCH_CATEGORIES_FOR_LISTING_ERROR,\r\n    UPLOAD_IMAGE_TO_CLOUDINARY,\r\n    CREATE_LISTING,\r\n    LISTING_ERROR,\r\n    FETCH_LISTINGS,\r\n    FETCH_LISTING_DETAIL,\r\n    FETCH_USER_PROFILE,\r\n    FETCH_USER_PROFILE_ERROR,\r\n    EDIT_LISTING,\r\n    DELETE_LISTING,\r\n}\r\nexport type AuthActions = AuthUserAction | AuthErrorAction;\r\nexport type FetchCategoriesActions =\r\n    | FetchCategoriesForListingAction\r\n    | FetchCategoriesForListingErrorAction;\r\nexport type ListingAction =\r\n    // | UploadImageToCloudinaryAction\r\n    | CreateListingAction\r\n    | ListingErrorAction\r\n    | FetchListingsAction\r\n    | FetchListingDetailAction\r\n    | EditListingAction\r\n    | DeleteListingAction;\r\n\r\nexport type UserProfileAction =\r\n    | FetchUserProfileAction\r\n    | FetchUserProfileErrorAction;\r\n","import { createBrowserHistory } from \"history\";\r\nexport default createBrowserHistory();\r\n","import Cookies from \"js-cookie\";\r\n\r\nconst ACCESS_TOKEN = \"ACCESS_TOKEN\";\r\n\r\n//Redudant helper class, but still going to use it for future reference regarding refresh tokens being stored in\r\n//http only cookie\r\nconst CookieService = (function () {\r\n    let _service: any;\r\n    function _getService() {\r\n        if (!_service) {\r\n            // @ts-ignore\r\n            _service = this;\r\n            return _service;\r\n        }\r\n        return _service;\r\n    }\r\n\r\n    function _setToken(tokenObj: any) {\r\n        Cookies.set(ACCESS_TOKEN, tokenObj.ACCESS_TOKEN);\r\n        // Cookies.set(REFRESH_TOKEN, tokenObj.REFRESH_TOKEN);\r\n        //Refresh token needs to be set in headers (as demonstrated in backend's controllers/authentication.ts)\r\n    }\r\n    function _getAccessToken() {\r\n        return Cookies.get(ACCESS_TOKEN);\r\n    }\r\n    // function _getRefreshToken() {\r\n    //Cannot read httponly cookie with JS\r\n    //     return Cookies.get(REFRESH_TOKEN);\r\n    // }\r\n    // function _clearToken() {\r\n    //Removed in backend's controllers/authentication.ts;\r\n    // }\r\n    return {\r\n        getService: _getService,\r\n        setToken: _setToken,\r\n        getAccessToken: _getAccessToken,\r\n        // getRefreshToken: _getRefreshToken,\r\n        //clearToken: _clearToken,\r\n    };\r\n})();\r\n\r\nexport default CookieService;\r\n","import { ActionTypes, AuthActions } from \"../actions\";\r\n\r\nexport interface AuthStateResponse {\r\n    authenticated?: string | null;\r\n    //it can be null if local storage is empty and dosent contain the token (refer to Root.tsx);\r\n    errorMessage?: string;\r\n}\r\n\r\nexport const AUTH_STATE: AuthStateResponse = {\r\n    authenticated: \"\",\r\n    errorMessage: \"\",\r\n};\r\nconst authReducer = (\r\n    state: AuthStateResponse = AUTH_STATE,\r\n    action: AuthActions\r\n) => {\r\n    switch (action.type) {\r\n        case ActionTypes.AUTH_USER:\r\n            return {\r\n                ...state,\r\n                authenticated: action.payload.token,\r\n                errorMessage: \"\",\r\n            };\r\n        case ActionTypes.AUTH_ERROR:\r\n            return {\r\n                ...state,\r\n                authenticated: \"\",\r\n                errorMessage: action.payload,\r\n            };\r\n        default:\r\n            return state;\r\n    }\r\n};\r\n\r\nexport default authReducer;\r\n","import { ActionTypes, FetchCategoriesActions } from \"../actions\";\r\n\r\nconst categoryReducer = (\r\n    state: string[] = [],\r\n    action: FetchCategoriesActions\r\n) => {\r\n    switch (action.type) {\r\n        case ActionTypes.FETCH_CATEGORIES_FOR_LISTING:\r\n            return action.payload;\r\n        case ActionTypes.FETCH_CATEGORIES_FOR_LISTING_ERROR:\r\n            return action.payload;\r\n        default:\r\n            return state;\r\n    }\r\n};\r\n\r\nexport default categoryReducer;\r\n","import { ActionTypes, ListingAction } from \"../actions\";\r\nimport {\r\n    Listing,\r\n    FetchListingResponse,\r\n    ListingDetail,\r\n    ServerError,\r\n} from \"../actions\";\r\nimport _ from \"lodash\";\r\n\r\nexport interface ListingDataResponse {\r\n    data?: Listing | FetchListingResponse | ListingDetail | ServerError;\r\n}\r\n\r\nconst listingReducer = (\r\n    state: ListingDataResponse = {},\r\n    action: ListingAction\r\n) => {\r\n    switch (action.type) {\r\n        case ActionTypes.CREATE_LISTING:\r\n            return { ...state, data: action.payload };\r\n        case ActionTypes.LISTING_ERROR:\r\n            return { ...state, data: action.payload };\r\n        case ActionTypes.FETCH_LISTINGS:\r\n            return { ...state, data: action.payload };\r\n        //    return { ...state, ..._.mapKeys(action.payload, \"listing_id\") };\r\n        case ActionTypes.FETCH_LISTING_DETAIL:\r\n            return { ...state, data: action.payload };\r\n        case ActionTypes.EDIT_LISTING:\r\n            return { ...state, data: action.payload };\r\n        case ActionTypes.DELETE_LISTING:\r\n            // return _.omit(state, action.payload);\r\n            //Since we are re direcitng user that uses a different\r\n            //reducer, it dosent matter what we return\r\n            return { ...state, data: action.payload };\r\n        default:\r\n            return state;\r\n    }\r\n};\r\n\r\nexport default listingReducer;\r\n","import {\r\n    ActionTypes,\r\n    UserProfileAction,\r\n    UserProfile,\r\n    ServerError,\r\n} from \"../actions\";\r\n\r\nimport _ from \"lodash\";\r\n\r\nexport interface UserProfileDataResponse {\r\n    data?: UserProfile | ServerError;\r\n}\r\n\r\nconst listingReducer = (\r\n    state: UserProfileDataResponse = {},\r\n    action: UserProfileAction\r\n) => {\r\n    switch (action.type) {\r\n        case ActionTypes.FETCH_USER_PROFILE:\r\n            return { ...state, data: action.payload };\r\n        case ActionTypes.FETCH_USER_PROFILE_ERROR:\r\n            return { ...state, data: action.payload };\r\n        default:\r\n            return state;\r\n    }\r\n};\r\n\r\nexport default listingReducer;\r\n","import { combineReducers } from \"redux\";\r\nimport { reducer as formReducer, FormStateMap } from \"redux-form\";\r\nimport authReducer from \"./authReducer\";\r\nimport { AuthStateResponse } from \"./authReducer\";\r\nimport categoryReducer from \"./categoryReducer\";\r\nimport listingReducer, { ListingDataResponse } from \"./listingReducer\";\r\nimport profileReducer, { UserProfileDataResponse } from \"./profileReducer\";\r\n\r\nexport interface StoreState {\r\n    authStatus: AuthStateResponse;\r\n    categories: string[];\r\n    listingInfo: ListingDataResponse;\r\n    profileInfo: UserProfileDataResponse;\r\n    form: FormStateMap;\r\n}\r\nexport default combineReducers<StoreState>({\r\n    authStatus: authReducer,\r\n    categories: categoryReducer,\r\n    listingInfo: listingReducer,\r\n    profileInfo: profileReducer,\r\n    form: formReducer,\r\n});\r\n","//THIS FILE IS USED FOR CORE RE-USABILITY; SPECIFICALLY FOR JEST/ENZYME TESTING\r\nimport React from \"react\";\r\nimport { Provider } from \"react-redux\";\r\nimport { createStore, applyMiddleware } from \"redux\";\r\nimport reducers from \"./reducers\";\r\nimport { composeWithDevTools } from \"redux-devtools-extension\";\r\nimport reduxThunk from \"redux-thunk\";\r\nimport Cookies from \"js-cookie\";\r\n// const composeEnhancers = window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ || compose;\r\n// const store = createStore(\r\n//     reducers,\r\n//     composeEnhancers(applyMiddleware(reduxThunk))\r\n// );\r\n//The above will work if typescript is not integrated. Must use below\r\n// const store = createStore(\r\n//     reducers,\r\n//     composeWithDevTools(applyMiddleware(reduxThunk))\r\n// );\r\n\r\n// export default (props: any) => {\r\n//     return <Provider store={store}>{props.children}</Provider>;\r\n// };\r\n\r\nexport const store = createStore(\r\n    reducers,\r\n    { authStatus: { authenticated: Cookies.get(\"ACCESS_TOKEN\") } },\r\n    //if our inital state (authStauts) has a token from local storage, keep them logged in\r\n    composeWithDevTools(applyMiddleware(reduxThunk))\r\n);\r\n\r\ninterface IProps {\r\n    initialState?: {};\r\n    //Optional property so that not every file has to use initialState (initialState is used for testing)\r\n    children: any;\r\n    // any other props that come into the component\r\n}\r\nconst provider = ({ initialState = {}, children }: IProps) => {\r\n    // const store = createStore(\r\n    //     reducers,\r\n    //     { authStatus: { authenticated: Cookies.get(\"ACCESS_TOKEN\") } },\r\n    //     //if our inital state (authStauts) has a token from local storage, keep them logged in\r\n    //     composeWithDevTools(applyMiddleware(reduxThunk))\r\n    // );\r\n\r\n    return <Provider store={store}>{children}</Provider>;\r\n};\r\nexport default provider;\r\n","import axios from \"axios\";\r\n//Used for onine JSON-store database\r\nimport CookieService from \"../CookieService\";\r\nimport { store } from \"../Root\";\r\nimport { validateToken } from \"./auth\";\r\nconst cookieService = CookieService.getService();\r\nconst axiosConfig = axios.create({\r\n    // .. where we make our configurations\r\n    withCredentials: true, //Without it cookies will not be sent! Also, needs to be first in axios.create(..)!!\r\n    //As mentioned in:\r\n    //https://stackoverflow.com/questions/43002444/make-axios-send-cookies-in-its-requests-automatically\r\n    baseURL: \"http://localhost:5000/api\",\r\n    //baseURL: \"https://kijiji-backend.vercel.app/\",\r\n});\r\n\r\n//Followed article below for axios interceptors:\r\n//https://medium.com/swlh/handling-access-and-refresh-tokens-using-axios-interceptors-3970b601a5da\r\n\r\n//Executes before axios request\r\naxiosConfig.interceptors.request.use(\r\n    (config) => {\r\n        //Create Authorizaiton header for our axios requests\r\n        //Note: this won't affect /token because we are using the http-only cookie not authorization header :) (look at backend)\r\n        // console.log(\"INTERCEPTOR REQ\", config);\r\n        const token = cookieService.getAccessToken();\r\n        if (token) {\r\n            config.headers[\"Authorization\"] = token;\r\n        }\r\n        return config;\r\n    },\r\n    (error) => {\r\n        Promise.reject(error);\r\n    }\r\n);\r\n\r\n//Axios calls response interceptors after it sends the request and receives a response.\r\naxiosConfig.interceptors.response.use(\r\n    //If we have a response from our recent http call\r\n    (response) => {\r\n        return response;\r\n    },\r\n    (error) => {\r\n        //Catches 403 error from our axios request\r\n        // throw error; //Throw error to action creator so it can be caught\r\n        const originalRequest = error.config;\r\n\r\n        //If my refresh token is not valid then my endpoint(/token) will come with 401 status code and\r\n        // If we do not handle it then it will go in an infinite loop.\r\n        // here is my condition to stop going in an infinite loop,\r\n\r\n        //But in this project, our refresh token will not expire to make things simpler :)\r\n        // if (error.response.status === 401 && originalRequest.url === \"/token\") {\r\n        //     return Promise.reject(error);\r\n        // }\r\n        // if (error.response) {\r\n        //Above if block is used so that the app won't crash  in localhost when the backend server is not running and we are testing\r\n        //an axios request (i.e calling an axios request and seeing if a loading component triggers)\r\n        if (error.response.status === 403 && !originalRequest._retry) {\r\n            //ALL 403 errors are because of invalid tokens\r\n            originalRequest._retry = true;\r\n            axiosConfig\r\n                .post(\"/token\")\r\n                .then((res) => {\r\n                    //Call original request again so that we can use the new access token on the original request\r\n                    //We give the new access token by giving it at axios.interceptors.request\r\n                    //return auth(originalRequest);\r\n                    store.dispatch(\r\n                        validateToken(\r\n                            originalRequest.url,\r\n                            originalRequest._retry\r\n                        ) as any\r\n                    );\r\n\r\n                    //flow:\r\n                    //click on post-ad - > validate token in HOC ->  if post-ad with expired token -> returns 403 -> refrsh token is called\r\n                    //use refresh token in Authorization header (via axios interceptor response) -> trigger post-ad again with store.dispatch(validateToken(..))\r\n                })\r\n                .catch((error) => {\r\n                    return Promise.reject(error);\r\n                });\r\n        }\r\n    }\r\n    // }\r\n);\r\n\r\nexport default axiosConfig;\r\n","import { ActionTypes } from \"./types\";\r\nimport auth from \"./axiosConfig\";\r\nimport { Dispatch } from \"redux\";\r\nimport history from \"../browserHistory\";\r\nimport CookieService from \"../CookieService\";\r\n\r\nexport interface JWTType {\r\n    token: string;\r\n}\r\nexport interface AuthUserAction {\r\n    type: ActionTypes.AUTH_USER;\r\n    payload: JWTType;\r\n}\r\nexport interface AuthErrorAction {\r\n    type: ActionTypes.AUTH_ERROR;\r\n    payload: string;\r\n}\r\n\r\nexport const signUp = (formValues: any) => async (dispatch: Dispatch) => {\r\n    try {\r\n        const response = await auth.post<JWTType>(\"/signup\", formValues);\r\n        dispatch<AuthUserAction>({\r\n            type: ActionTypes.AUTH_USER,\r\n            payload: response.data,\r\n        });\r\n        history.push(\"/listings/1\");\r\n    } catch (err) {\r\n        dispatch<AuthErrorAction>({\r\n            type: ActionTypes.AUTH_ERROR,\r\n            payload: \"- Email is in use\",\r\n        });\r\n    }\r\n};\r\nexport const signIn = (formValues: any) => async (dispatch: Dispatch) => {\r\n    try {\r\n        const response = await auth.post<JWTType>(\"/signin\", formValues);\r\n        dispatch<AuthUserAction>({\r\n            type: ActionTypes.AUTH_USER,\r\n            payload: response.data,\r\n        });\r\n        history.push(\"/listings/1\");\r\n    } catch (err) {\r\n        // if (err.message === \"Network Error\") {\r\n        //     console.log(\"check error\", err);\r\n        // }\r\n\r\n        dispatch<AuthErrorAction>({\r\n            type: ActionTypes.AUTH_ERROR,\r\n            payload: \"- Invalid login credentials\",\r\n        });\r\n    }\r\n};\r\n\r\nexport const signOut = () => async (dispatch: Dispatch) => {\r\n    try {\r\n        const response = await auth.post<JWTType>(\"/signout\");\r\n        dispatch<AuthUserAction>({\r\n            type: ActionTypes.AUTH_USER,\r\n            payload: response.data,\r\n        });\r\n        history.push(\"/\");\r\n        alert(\"Logged out succesfully\");\r\n    } catch (err) {\r\n        alert(\"Log out failed, try again\");\r\n    }\r\n};\r\n\r\nexport const validateToken = (path: string, retriedCalling: boolean) => async (\r\n    dispatch: Dispatch\r\n) => {\r\n    try {\r\n        const response = await auth.post<JWTType>(\r\n            path,\r\n            {}\r\n            // { headers: { Authorization: cookieService.getAccessToken() } } //assigned in axios' interceptors.request\r\n        );\r\n        //Ensures that our current access token is the newest one; if a new access token is given,\r\n        //we will update our current access token\r\n\r\n        //requireAuth HOC relies on the dispatch below\r\n        dispatch<AuthUserAction>({\r\n            type: ActionTypes.AUTH_USER,\r\n            payload: response.data,\r\n        });\r\n    } catch (err) {\r\n        if (retriedCalling === true) {\r\n            // If it fails again with the new access token (might be a forged token)\r\n            // Invalid token, kick our users out from a certain resource only accecible to signed in users\r\n            // dispatch<AuthErrorAction>({\r\n            //     type: ActionTypes.AUTH_ERROR,\r\n            //     payload: \"\",\r\n            // });\r\n\r\n            //Log them out\r\n            dispatch(signOut() as any);\r\n        }\r\n    }\r\n};\r\n","//Note: Make sure it's the same as the viewports defined in scss/utilities/_variables\r\n//We could also use this for media queries:\r\n//https://www.npmjs.com/package/react-responsive\r\nexport const SERVER_ERROR_MESSAGE =\r\n    \"Uh oh...something went wrong. Check your internet connection and try again.\";\r\nexport const MED_SCREEN_SIZE = 768;\r\n\r\nexport const CANADIAN_PROVINCES = [\r\n    { name: \"Alberta\", abbreviation: \"AB\" },\r\n    { name: \"British Columbia\", abbreviation: \"BC\" },\r\n    { name: \"Manitoba\", abbreviation: \"MB\" },\r\n    { name: \"New Brunswick\", abbreviation: \"NB\" },\r\n    { name: \"Newfoundland And Labrador\", abbreviation: \"NL\" },\r\n    { name: \"Northwest Territories\", abbreviation: \"NT\" },\r\n    { name: \"Nova Scotia\", abbreviation: \"NS\" },\r\n    { name: \"Nunavut\", abbreviation: \"NU\" },\r\n    { name: \"Ontario\", abbreviation: \"ON\" },\r\n    { name: \"Prince Edward Island\", abbreviation: \"PE\" },\r\n    { name: \"Quebec\", abbreviation: \"QC\" },\r\n    { name: \"Saskatchewan\", abbreviation: \"SK\" },\r\n    { name: \"Yukon Territory\", abbreviation: \"YT\" },\r\n];\r\n\r\nexport const CANADIAN_PROVINCE_AND_CITIES = [\r\n    {\r\n        province: \"Alberta\",\r\n        cities: [\r\n            \"Airdrie\",\r\n            \"Grande Prairie\",\r\n            \"Red Deer\",\r\n            \"Beaumont\",\r\n            \"Hanna\",\r\n            \"St. Albert\",\r\n            \"Bonnyville\",\r\n            \"Hinton\",\r\n            \"Spruce Grove\",\r\n            \"Brazeau\",\r\n            \"Irricana\",\r\n            \"Strathcona County\",\r\n            \"Breton\",\r\n            \"Lacombe\",\r\n            \"Strathmore\",\r\n            \"Calgary\",\r\n            \"Leduc\",\r\n            \"Sylvan Lake\",\r\n            \"Camrose\",\r\n            \"Lethbridge\",\r\n            \"Swan Hills\",\r\n            \"Canmore\",\r\n            \"McLennan\",\r\n            \"Taber\",\r\n            \"Didzbury\",\r\n            \"Medicine Hat\",\r\n            \"Turner Valley\",\r\n            \"Drayton Valley\",\r\n            \"Olds\",\r\n            \"Vermillion\",\r\n            \"Edmonton\",\r\n            \"Onoway\",\r\n            \"Wood Buffalo\",\r\n            \"Ft. Saskatchewan\",\r\n            \"Provost\",\r\n        ],\r\n    },\r\n    {\r\n        province: \"British Columbia\",\r\n        cities: [\r\n            \"Burnaby\",\r\n            \"Lumby\",\r\n            \"City of Port Moody\",\r\n            \"Cache Creek\",\r\n            \"Maple Ridge\",\r\n            \"Prince George\",\r\n            \"Castlegar\",\r\n            \"Merritt\",\r\n            \"Prince Rupert\",\r\n            \"Chemainus\",\r\n            \"Mission\",\r\n            \"Richmond\",\r\n            \"Chilliwack\",\r\n            \"Nanaimo\",\r\n            \"Saanich\",\r\n            \"Clearwater\",\r\n            \"Nelson\",\r\n            \"Sooke\",\r\n            \"Colwood\",\r\n            \"New Westminster\",\r\n            \"Sparwood\",\r\n            \"Coquitlam\",\r\n            \"North Cowichan\",\r\n            \"Surrey\",\r\n            \"Cranbrook\",\r\n            \"Terrace\",\r\n            \"Dawson Creek\",\r\n            \"North Vancouver\",\r\n            \"Tumbler\",\r\n            \"Delta\",\r\n            \"Osoyoos\",\r\n            \"Fernie\",\r\n            \"Parksville\",\r\n            \"Vancouver\",\r\n            \"Invermere\",\r\n            \"Peace River\",\r\n            \"Vernon\",\r\n            \"Kamloops\",\r\n            \"Penticton\",\r\n            \"Victoria\",\r\n            \"Kaslo\",\r\n            \"Port Alberni\",\r\n            \"Whistler\",\r\n            \"Langley\",\r\n            \"Port Hardy\",\r\n        ],\r\n    },\r\n    {\r\n        province: \"Manitoba\",\r\n        cities: [\r\n            \"Birtle\",\r\n            \"Flin Flon\",\r\n            \"Swan River\",\r\n            \"Brandon\",\r\n            \"Snow Lake\",\r\n            \"The Pas\",\r\n            \"Cranberry Portage\",\r\n            \"Steinbach\",\r\n            \"Thompson\",\r\n            \"Dauphin\",\r\n            \"Stonewall\",\r\n            \"Winnipeg\",\r\n        ],\r\n    },\r\n    {\r\n        province: \"New Brunswick\",\r\n        cities: [\r\n            \"Cap-Pele\",\r\n            \"Miramichi\",\r\n            \"Saint John\",\r\n            \"Fredericton\",\r\n            \"Moncton\",\r\n            \"Saint Stephen\",\r\n            \"Grand Bay-Westfield\",\r\n            \"Oromocto\",\r\n            \"Shippagan\",\r\n            \"Grand Falls\",\r\n            \"Port Elgin\",\r\n            \"Sussex\",\r\n            \"Memramcook\",\r\n            \"Sackville\",\r\n            \"Tracadie-Sheila\",\r\n        ],\r\n    },\r\n    {\r\n        province: \"Newfoundland And Labrador\",\r\n        cities: [\r\n            \"Argentia\",\r\n            \"Corner Brook\",\r\n            \"Paradise\",\r\n            \"Bishop's Falls\",\r\n            \"Labrador City\",\r\n            \"Portaux Basques\",\r\n            \"Botwood\",\r\n            \"Mount Pearl\",\r\n            \"St. John's\",\r\n            \"Brigus\",\r\n        ],\r\n    },\r\n    {\r\n        province: \"Northwest Territories\",\r\n        cities: [\"Town of Hay River\", \"Town of Inuvik\", \"Yellowknife\"],\r\n    },\r\n    {\r\n        province: \"Nova Scotia\",\r\n        cities: [\r\n            \"Amherst\",\r\n            \"Hants County\",\r\n            \"Pictou\",\r\n            \"Annapolis\",\r\n            \"Inverness County\",\r\n            \"Pictou County\",\r\n            \"Argyle\",\r\n            \"Kentville\",\r\n            \"Queens\",\r\n            \"Baddeck\",\r\n            \"County of Kings\",\r\n            \"Richmond\",\r\n            \"Bridgewater\",\r\n            \"Lunenburg\",\r\n            \"Shelburne\",\r\n            \"Cape Breton\",\r\n            \"Lunenburg County\",\r\n            \"Stellarton\",\r\n            \"Chester\",\r\n            \"Mahone Bay\",\r\n            \"Truro\",\r\n            \"Cumberland County\",\r\n            \"New Glasgow\",\r\n            \"Windsor\",\r\n            \"East Hants\",\r\n            \"New Minas\",\r\n            \"Yarmouth\",\r\n            \"Halifax\",\r\n            \"Parrsboro\",\r\n        ],\r\n    },\r\n    {\r\n        province: \"Nunavut\",\r\n        cities: [\"Iqaluit\"],\r\n    },\r\n    {\r\n        province: \"Ontario\",\r\n        cities: [\r\n            \"Ajax\",\r\n            \"Halton\",\r\n            \"Peterborough\",\r\n            \"Atikokan\",\r\n            \"Halton Hills\",\r\n            \"Pickering\",\r\n            \"Barrie\",\r\n            \"Hamilton\",\r\n            \"Port Bruce\",\r\n            \"Belleville\",\r\n            \"Hamilton-Wentworth\",\r\n            \"Port Burwell\",\r\n            \"Blandford-Blenheim\",\r\n            \"Hearst\",\r\n            \"Port Colborne\",\r\n            \"Blind River\",\r\n            \"Huntsville\",\r\n            \"Port Hope\",\r\n            \"Brampton\",\r\n            \"Ingersoll\",\r\n            \"Prince Edward\",\r\n            \"Brant\",\r\n            \"James\",\r\n            \"Quinte West\",\r\n            \"Brantford\",\r\n            \"Kanata\",\r\n            \"Renfrew\",\r\n            \"Brock\",\r\n            \"Kincardine\",\r\n            \"Richmond Hill\",\r\n            \"Brockville\",\r\n            \"King\",\r\n            \"Sarnia\",\r\n            \"Burlington\",\r\n            \"Kingston\",\r\n            \"Sault Ste. Marie\",\r\n            \"Caledon\",\r\n            \"Kirkland Lake\",\r\n            \"Scarborough\",\r\n            \"Cambridge\",\r\n            \"Kitchener\",\r\n            \"Scugog\",\r\n            \"Chatham-Kent\",\r\n            \"Larder Lake\",\r\n            \"Souix Lookout CoC Sioux Lookout\",\r\n            \"Chesterville\",\r\n            \"Leamington\",\r\n            \"Smiths Falls\",\r\n            \"Clarington\",\r\n            \"Lennox-Addington\",\r\n            \"South-West Oxford\",\r\n            \"Cobourg\",\r\n            \"Lincoln\",\r\n            \"St. Catharines\",\r\n            \"Cochrane\",\r\n            \"Lindsay\",\r\n            \"St. Thomas\",\r\n            \"Collingwood\",\r\n            \"London\",\r\n            \"Stoney Creek\",\r\n            \"Cornwall\",\r\n            \"Loyalist Township\",\r\n            \"Stratford\",\r\n            \"Cumberland\",\r\n            \"Markham\",\r\n            \"Sudbury\",\r\n            \"Deep River\",\r\n            \"Metro Toronto\",\r\n            \"Temagami\",\r\n            \"Dundas\",\r\n            \"Merrickville\",\r\n            \"Thorold\",\r\n            \"Durham\",\r\n            \"Milton\",\r\n            \"Thunder Bay\",\r\n            \"Dymond\",\r\n            \"Nepean\",\r\n            \"Tillsonburg\",\r\n            \"Ear Falls\",\r\n            \"Newmarket\",\r\n            \"Timmins\",\r\n            \"East Gwillimbury\",\r\n            \"Niagara\",\r\n            \"Toronto\",\r\n            \"East Zorra-Tavistock\",\r\n            \"Niagara Falls\",\r\n            \"Uxbridge\",\r\n            \"Elgin\",\r\n            \"Niagara-on-the-Lake\",\r\n            \"Vaughan\",\r\n            \"Elliot Lake\",\r\n            \"North Bay\",\r\n            \"Wainfleet\",\r\n            \"Flamborough\",\r\n            \"North Dorchester\",\r\n            \"Wasaga Beach\",\r\n            \"Fort Erie\",\r\n            \"North Dumfries\",\r\n            \"Waterloo\",\r\n            \"Fort Frances\",\r\n            \"North York\",\r\n            \"Waterloo\",\r\n            \"Gananoque\",\r\n            \"Norwich\",\r\n            \"Welland\",\r\n            \"Georgina\",\r\n            \"Oakville\",\r\n            \"Wellesley\",\r\n            \"Glanbrook\",\r\n            \"Orangeville\",\r\n            \"West Carleton\",\r\n            \"Gloucester\",\r\n            \"Orillia\",\r\n            \"West Lincoln\",\r\n            \"Goulbourn\",\r\n            \"Osgoode\",\r\n            \"Whitby\",\r\n            \"Gravenhurst\",\r\n            \"Oshawa\",\r\n            \"Wilmot\",\r\n            \"Grimsby\",\r\n            \"Ottawa\",\r\n            \"Windsor\",\r\n            \"Guelph\",\r\n            \"Ottawa-Carleton\",\r\n            \"Woolwich\",\r\n            \"Haldimand-Norfork\",\r\n            \"Owen Sound\",\r\n            \"York\",\r\n        ],\r\n    },\r\n    {\r\n        province: \"Prince Edward Island\",\r\n        cities: [\r\n            \"Alberton\",\r\n            \"Montague\",\r\n            \"Stratford\",\r\n            \"Charlottetown\",\r\n            \"Souris\",\r\n            \"Summerside\",\r\n            \"Cornwall\",\r\n        ],\r\n    },\r\n    {\r\n        province: \"Quebec\",\r\n        cities: [\r\n            \"Alma\",\r\n            \"Fleurimont\",\r\n            \"Longueuil\",\r\n            \"Amos\",\r\n            \"Gaspe\",\r\n            \"Marieville\",\r\n            \"Anjou\",\r\n            \"Gatineau\",\r\n            \"Mount Royal\",\r\n            \"Aylmer\",\r\n            \"Hull\",\r\n            \"Montreal\",\r\n            \"Beauport\",\r\n            \"Joliette\",\r\n            \"Montreal Region\",\r\n            \"Bromptonville\",\r\n            \"Jonquiere\",\r\n            \"Montreal-Est\",\r\n            \"Brosssard\",\r\n            \"Lachine\",\r\n            \"Quebec\",\r\n            \"Chateauguay\",\r\n            \"Lasalle\",\r\n            \"Saint-Leonard\",\r\n            \"Chicoutimi\",\r\n            \"Laurentides\",\r\n            \"Sherbrooke\",\r\n            \"Coaticook\",\r\n            \"LaSalle\",\r\n            \"Sorel\",\r\n            \"Coaticook\",\r\n            \"Laval\",\r\n            \"Thetford Mines\",\r\n            \"Dorval\",\r\n            \"Lennoxville\",\r\n            \"Victoriaville\",\r\n            \"Drummondville\",\r\n            \"Levis\",\r\n        ],\r\n    },\r\n    {\r\n        province: \"Saskatchewan\",\r\n        cities: [\r\n            \"Avonlea\",\r\n            \"Melfort\",\r\n            \"Swift Current\",\r\n            \"Colonsay\",\r\n            \"Nipawin\",\r\n            \"Tisdale\",\r\n            \"Craik\",\r\n            \"Prince Albert\",\r\n            \"Unity\",\r\n            \"Creighton\",\r\n            \"Regina\",\r\n            \"Weyburn\",\r\n            \"Eastend\",\r\n            \"Saskatoon\",\r\n            \"Wynyard\",\r\n            \"Esterhazy\",\r\n            \"Shell Lake\",\r\n            \"Yorkton\",\r\n            \"Gravelbourg\",\r\n        ],\r\n    },\r\n    {\r\n        province: \"Yukon Territory\",\r\n        cities: [\"Carcross\", \"Whitehorse\"],\r\n    },\r\n];\r\n","import { ActionTypes } from \"./types\";\r\nimport axios from \"./axiosConfig\";\r\nimport { Dispatch } from \"redux\";\r\nimport jwt_decode from \"jwt-decode\";\r\nimport CookieService from \"../CookieService\";\r\nimport { SERVER_ERROR_MESSAGE } from \"../constants\";\r\nimport history from \"../browserHistory\";\r\n\r\nexport interface ServerError {\r\n    error: string;\r\n}\r\n\r\nexport interface FetchCategoriesForListingAction {\r\n    type: ActionTypes.FETCH_CATEGORIES_FOR_LISTING;\r\n    payload: string[];\r\n}\r\n\r\nexport interface FetchCategoriesForListingErrorAction {\r\n    type: ActionTypes.FETCH_CATEGORIES_FOR_LISTING_ERROR;\r\n    payload: string[];\r\n}\r\n\r\nexport interface CloudinaryImagePath {\r\n    cloudinaryImagePath: string;\r\n}\r\nexport interface UploadImageToCloudinaryAction {\r\n    type: ActionTypes.UPLOAD_IMAGE_TO_CLOUDINARY;\r\n    payload: CloudinaryImagePath;\r\n}\r\nexport interface Listing {\r\n    listing_id: number;\r\n    listing_name: string;\r\n    listing_description: string;\r\n    category_id: number;\r\n    listing_image: string;\r\n    province: string;\r\n    city: string;\r\n    street: string;\r\n    listing_price: string;\r\n    listing_date: Date;\r\n}\r\n\r\nexport interface DeletedListing {\r\n    listing_id: number;\r\n    listing_name: string;\r\n    listing_description: string;\r\n    category_id: number;\r\n    listing_image: string;\r\n    province: string;\r\n    city: string;\r\n    street: string;\r\n    listing_price: string;\r\n    listing_date: Date;\r\n    name_tokens: string;\r\n}\r\n\r\nexport interface FetchListingResponse {\r\n    totalListings?: number;\r\n    page?: number;\r\n    limitPerPage?: number;\r\n    listings?: Listing[];\r\n}\r\n\r\nexport interface CreateListingAction {\r\n    type: ActionTypes.CREATE_LISTING;\r\n    payload: Listing;\r\n}\r\n\r\nexport interface ListingErrorAction {\r\n    type: ActionTypes.LISTING_ERROR;\r\n    payload: ServerError;\r\n}\r\n\r\nexport interface FetchListingsAction {\r\n    type: ActionTypes.FETCH_LISTINGS;\r\n    payload: FetchListingResponse;\r\n}\r\n\r\nexport interface ValidateListingAndUser {\r\n    user_id: number;\r\n    listing_id: number;\r\n}\r\n\r\nexport interface ListingDetail {\r\n    first_name: string;\r\n    last_name: string;\r\n    member_since: Date;\r\n    email: string;\r\n    listing_id: string;\r\n    listing_name: string;\r\n    listing_price: number;\r\n    listing_description: string;\r\n    category_name: string;\r\n    listing_image: string;\r\n    province: string;\r\n    city: string;\r\n    street: string;\r\n    listing_date: Date;\r\n}\r\n\r\nexport interface FetchListingDetailAction {\r\n    type: ActionTypes.FETCH_LISTING_DETAIL;\r\n    payload: ListingDetail;\r\n}\r\n\r\nexport interface EditListingAction {\r\n    type: ActionTypes.EDIT_LISTING;\r\n    payload: Listing;\r\n}\r\n\r\nexport interface CloudinaryImageDelete {\r\n    result: string;\r\n}\r\n\r\nexport interface DeleteListingAction {\r\n    type: ActionTypes.DELETE_LISTING;\r\n    payload: DeletedListing;\r\n}\r\n\r\nexport const fetchCategoriesForListing = () => async (dispatch: Dispatch) => {\r\n    try {\r\n        const response = await axios.get<[]>(\"/categories-for-listing\");\r\n        dispatch<FetchCategoriesForListingAction>({\r\n            type: ActionTypes.FETCH_CATEGORIES_FOR_LISTING,\r\n            payload: response.data || [],\r\n        });\r\n    } catch (error) {\r\n        dispatch<FetchCategoriesForListingErrorAction>({\r\n            type: ActionTypes.FETCH_CATEGORIES_FOR_LISTING_ERROR,\r\n            payload: [SERVER_ERROR_MESSAGE],\r\n        });\r\n    }\r\n};\r\n\r\nexport const createListing = (formValues: any) => async (\r\n    dispatch: Dispatch\r\n) => {\r\n    try {\r\n        //Distributed transaction takes place here, if an error occurs in uploading to one of the storage systems,\r\n        // we haven't handle it (i.e an image may be uploaded, but the data failed to be inserted; the image wouldn't be deleted)\r\n\r\n        //Form data is used to POST a file (image in our case)\r\n        //https://stackoverflow.com/questions/43013858/how-to-post-a-file-from-a-form-with-axios\r\n\r\n        //We could get the cookie and decode it in node, but doing it in client looks nicer\r\n        const cookieService = CookieService.getService();\r\n        const jwtInfo: Object = jwt_decode(cookieService.getAccessToken());\r\n\r\n        let cloudinaryImagePath = {};\r\n        if (formValues.image) {\r\n            let formData = new FormData();\r\n            formData.append(\"image\", formValues.image[0]);\r\n\r\n            const imagePathResponse = await axios.post<CloudinaryImagePath>(\r\n                \"/upload-image\",\r\n                formData,\r\n                {\r\n                    headers: {\r\n                        \"Content-Type\": \"multipart/form-data\",\r\n                    },\r\n                }\r\n            );\r\n            //Youd ont need to dispatch again\r\n            //But I included it in case we handle errors when failing to\r\n            //upload to cloudinary or the database so we 'backtrack'\r\n\r\n            dispatch<UploadImageToCloudinaryAction>({\r\n                type: ActionTypes.UPLOAD_IMAGE_TO_CLOUDINARY,\r\n                payload: imagePathResponse.data,\r\n            });\r\n\r\n            cloudinaryImagePath = imagePathResponse.data;\r\n        }\r\n\r\n        const listingResponse = await axios.post<Listing>(\"/create-listing\", {\r\n            ...cloudinaryImagePath,\r\n            ...formValues,\r\n            ...jwtInfo,\r\n        });\r\n\r\n        dispatch<CreateListingAction>({\r\n            type: ActionTypes.CREATE_LISTING,\r\n            payload: listingResponse.data,\r\n        });\r\n        history.push(\"/profile\");\r\n    } catch (error) {\r\n        alert(SERVER_ERROR_MESSAGE);\r\n        dispatch<ListingErrorAction>({\r\n            type: ActionTypes.LISTING_ERROR,\r\n            payload: { error: SERVER_ERROR_MESSAGE },\r\n        });\r\n    }\r\n};\r\n\r\nexport const fetchListingsByOldestDate = (\r\n    pageNumber: number,\r\n    queryPath: string\r\n) => async (dispatch: Dispatch) => {\r\n    try {\r\n        const response = await axios.get<FetchListingResponse>(\r\n            `/listing-oldest-date/${pageNumber}${queryPath}`\r\n        );\r\n        dispatch<FetchListingsAction>({\r\n            type: ActionTypes.FETCH_LISTINGS,\r\n            payload: response.data,\r\n        });\r\n    } catch (error) {\r\n        dispatch<ListingErrorAction>({\r\n            type: ActionTypes.LISTING_ERROR,\r\n            payload: { error: SERVER_ERROR_MESSAGE },\r\n        });\r\n    }\r\n};\r\n\r\nexport const fetchListingsByNewestDate = (\r\n    pageNumber: number,\r\n    queryPath: string\r\n) => async (dispatch: Dispatch) => {\r\n    try {\r\n        const response = await axios.get<FetchListingResponse>(\r\n            `/listing-newest-date/${pageNumber}${queryPath}`\r\n        );\r\n        dispatch<FetchListingsAction>({\r\n            type: ActionTypes.FETCH_LISTINGS,\r\n            payload: response.data,\r\n        });\r\n    } catch (error) {\r\n        dispatch<ListingErrorAction>({\r\n            type: ActionTypes.LISTING_ERROR,\r\n            payload: { error: SERVER_ERROR_MESSAGE },\r\n        });\r\n    }\r\n};\r\n\r\nexport const fetchListingsByLowestPrice = (\r\n    pageNumber: number,\r\n    queryPath: string\r\n) => async (dispatch: Dispatch) => {\r\n    try {\r\n        const response = await axios.get<FetchListingResponse>(\r\n            `/listing-lowest-price/${pageNumber}${queryPath}`\r\n        );\r\n        dispatch<FetchListingsAction>({\r\n            type: ActionTypes.FETCH_LISTINGS,\r\n            payload: response.data,\r\n        });\r\n    } catch (error) {\r\n        dispatch<ListingErrorAction>({\r\n            type: ActionTypes.LISTING_ERROR,\r\n            payload: { error: SERVER_ERROR_MESSAGE },\r\n        });\r\n    }\r\n};\r\n\r\nexport const fetchListingsByHighestPrice = (\r\n    pageNumber: number,\r\n    queryPath: string\r\n) => async (dispatch: Dispatch) => {\r\n    try {\r\n        const response = await axios.get<FetchListingResponse>(\r\n            `/listing-highest-price/${pageNumber}${queryPath}`\r\n        );\r\n        dispatch<FetchListingsAction>({\r\n            type: ActionTypes.FETCH_LISTINGS,\r\n            payload: response.data,\r\n        });\r\n    } catch (error) {\r\n        dispatch<ListingErrorAction>({\r\n            type: ActionTypes.LISTING_ERROR,\r\n            payload: { error: SERVER_ERROR_MESSAGE },\r\n        });\r\n    }\r\n};\r\n\r\nexport const fetchListingDetail = (listingId: string) => async (\r\n    dispatch: Dispatch\r\n) => {\r\n    try {\r\n        const response = await axios.get<ListingDetail>(\r\n            `/listing/${listingId}`\r\n        );\r\n        dispatch<FetchListingDetailAction>({\r\n            type: ActionTypes.FETCH_LISTING_DETAIL,\r\n            payload: response.data,\r\n        });\r\n    } catch (error) {\r\n        dispatch<ListingErrorAction>({\r\n            type: ActionTypes.LISTING_ERROR,\r\n            payload: { error: SERVER_ERROR_MESSAGE },\r\n        });\r\n    }\r\n};\r\n\r\nexport const editListing = (\r\n    formValues: any,\r\n    listingId: string,\r\n    cloudinaryPublicId: string | null\r\n) => async (dispatch: Dispatch) => {\r\n    try {\r\n        //Distributed transaction takes place here, if an error occurs in uploading to one of the storage systems,\r\n        // we haven't handle it (i.e an image may be uploaded, but the data failed to be inserted; the image wouldn't be deleted)\r\n\r\n        //Form data is used to POST a file (image in our case)\r\n        //https://stackoverflow.com/questions/43013858/how-to-post-a-file-from-a-form-with-axios\r\n\r\n        let cloudinaryImagePath = {};\r\n        if (\r\n            formValues.image instanceof FileList &&\r\n            cloudinaryPublicId != null\r\n        ) {\r\n            //A cloudinary image already exists, ovveride current cloudinary image\r\n            let formData = new FormData();\r\n            formData.append(\"image\", formValues.image[0]);\r\n            //overrides current image with the current publicid\r\n            const imagePathResponse = await axios.put<CloudinaryImagePath>(\r\n                `/edit-image/${cloudinaryPublicId}`,\r\n                formData,\r\n                {\r\n                    headers: {\r\n                        \"Content-Type\": \"multipart/form-data\",\r\n                    },\r\n                }\r\n            );\r\n            cloudinaryImagePath = imagePathResponse.data;\r\n        } else if (\r\n            formValues.image instanceof FileList &&\r\n            cloudinaryPublicId === null\r\n        ) {\r\n            //cloudinary image does not exist because user did not create a listing with an image or\r\n            //has removed an image in their lisitng\r\n\r\n            let formData = new FormData();\r\n            formData.append(\"image\", formValues.image[0]);\r\n\r\n            const imagePathResponse = await axios.post<CloudinaryImagePath>(\r\n                \"/upload-image\",\r\n                formData,\r\n                {\r\n                    headers: {\r\n                        \"Content-Type\": \"multipart/form-data\",\r\n                    },\r\n                }\r\n            );\r\n\r\n            cloudinaryImagePath = imagePathResponse.data;\r\n        } else if (formValues.image === null) {\r\n            //User wants to remove image\r\n            await axios.delete<CloudinaryImageDelete>(\r\n                `/delete-image/${cloudinaryPublicId}`\r\n            );\r\n        }\r\n\r\n        const listingResponse = await axios.patch<Listing>(\r\n            `/listing/${listingId}/edit`,\r\n            {\r\n                ...cloudinaryImagePath,\r\n                ...formValues,\r\n            }\r\n        );\r\n\r\n        dispatch<EditListingAction>({\r\n            type: ActionTypes.EDIT_LISTING,\r\n            payload: listingResponse.data,\r\n        });\r\n        history.push(`/listing/${listingId}`);\r\n    } catch (error) {\r\n        alert(SERVER_ERROR_MESSAGE);\r\n        // dispatch<ListingErrorAction>({\r\n        //     type: ActionTypes.LISTING_ERROR,\r\n        //     payload: { error: SERVER_ERROR_MESSAGE },\r\n        // });\r\n    }\r\n};\r\n\r\nexport const deleteListing = (\r\n    listingId: string,\r\n    cloudinaryPublicId: string | null\r\n) => async (dispatch: Dispatch) => {\r\n    try {\r\n        //Delete data from database:\r\n        const response = await axios.delete<DeletedListing>(\r\n            `/listing/${listingId}/delete`\r\n        );\r\n        dispatch<DeleteListingAction>({\r\n            type: ActionTypes.DELETE_LISTING,\r\n            payload: response.data,\r\n        });\r\n        if (cloudinaryPublicId) {\r\n            await axios.delete<CloudinaryImageDelete>(\r\n                `/delete-image/${cloudinaryPublicId}`\r\n            );\r\n        }\r\n\r\n        history.push(\"/profile\");\r\n    } catch (error) {\r\n        alert(SERVER_ERROR_MESSAGE);\r\n        // dispatch<ListingErrorAction>({\r\n        //     type: ActionTypes.LISTING_ERROR,\r\n        //     payload: { error: SERVER_ERROR_MESSAGE },\r\n        // });\r\n    }\r\n};\r\n\r\nexport const validateUserAndGetListingDetail = (listingId: string) => async (\r\n    dispatch: Dispatch\r\n) => {\r\n    try {\r\n        const response = await axios.get<ListingDetail>(\r\n            `/listing/${listingId}/validate-user/edit`\r\n        );\r\n        dispatch<FetchListingDetailAction>({\r\n            type: ActionTypes.FETCH_LISTING_DETAIL,\r\n            payload: response.data,\r\n        });\r\n    } catch (error) {\r\n        //User cannot edit a listing that does not belong to them\r\n        history.push(\"/listings/1\");\r\n    }\r\n};\r\n","import React from \"react\";\r\nimport ReactDOM from \"react-dom\";\r\nimport { ModalProps } from \"./Searchbar\";\r\n//We use portals + modals instead of directly creating a component and use it\r\n//inside the component tree structure because if a parent component\r\n//uses position:relative; the z-index of all the child's component\r\n// will be whatever the z-index of the parent component is; whhich can\r\n//cause layout issues\r\nconst Modal: React.FC<ModalProps> = (props) => {\r\n    return ReactDOM.createPortal(\r\n        <div onClick={props.onDismiss} className=\"modal\">\r\n            <div\r\n                onClick={(e) => {\r\n                    e.stopPropagation();\r\n                }}\r\n                className=\"modalBox\"\r\n            >\r\n                <h2>{props.title}</h2>\r\n                {props.content}\r\n                {/*{props.actions} */}\r\n            </div>\r\n        </div>,\r\n        //@ts-ignore\r\n        document.querySelector(\"#modal\")\r\n    );\r\n};\r\n//When you click outside of the modal; histoyr.push() will be triggered.\r\n//When clicking the modal box, history.push(\"/\") will be triggered. But with\r\n//e.stopProgataion(), we don't let the children bubble up to history.push()\r\n//thus, we can now click the modal box without triggering history.push()\r\nexport default Modal;\r\n","import React from \"react\";\r\nimport { StageSpinner } from \"react-spinners-kit\";\r\nconst LoadingDots = (): JSX.Element => {\r\n    return <StageSpinner size={150} color=\"grey\" loading={true} />;\r\n};\r\nexport default LoadingDots;\r\n","import React, { ComponentType, useState, useEffect } from \"react\";\r\nimport {\r\n    Field,\r\n    reduxForm,\r\n    InjectedFormProps,\r\n    formValueSelector,\r\n} from \"redux-form\";\r\n//compose is used to make it easier to \"organize\" mapStateToProps and redux form\r\nimport { StoreState } from \"../reducers\";\r\nimport { connect } from \"react-redux\";\r\nimport { SearchFilterFormProps } from \"./Searchbar\";\r\nimport { fetchCategoriesForListing } from \"../actions\";\r\nimport LoadingDots from \"./LoadingDots\";\r\nimport { CANADIAN_PROVINCES, CANADIAN_PROVINCE_AND_CITIES } from \"../constants\";\r\n\r\n//Typescriptand redux form:\r\n//https://levelup.gitconnected.com/react-js-typescript-redux-redux-form-jest-e522995ebe36\r\n\r\n//Need to hoist render methods up or else it will give error where it will unfocus after first characther is typed\r\n//https://stackoverflow.com/questions/39839051/using-redux-form-im-losing-focus-after-typing-the-first-character\r\n\r\nexport interface SearchFilterFormValues {\r\n    search?: string;\r\n    category?: string;\r\n    province?: string;\r\n    city?: string;\r\n}\r\n\r\nconst SearchFilterForm: React.FC<\r\n    SearchFilterFormProps & InjectedFormProps<{}, SearchFilterFormProps>\r\n> = (props) => {\r\n    const renderDropDown = ({\r\n        name,\r\n        input,\r\n        label,\r\n        meta,\r\n        placeHolder,\r\n        optionValues,\r\n    }: any) => {\r\n        return (\r\n            <select\r\n                className=\"modalFilterCategoriesDropdown\"\r\n                autoComplete=\"off\"\r\n                {...input}\r\n            >\r\n                <option value=\"\"></option>\r\n                {optionValues.map((val: string) => (\r\n                    <option key={val} value={val}>\r\n                        {val}\r\n                    </option>\r\n                ))}\r\n            </select>\r\n        );\r\n    };\r\n\r\n    const onSubmit = (formValues: SearchFilterFormValues, dispatch: any) => {\r\n        if (!formValues.province) {\r\n            //City field does not get reseted to \" \" if user makes province an empty field first\r\n            formValues.city = \"\";\r\n        }\r\n        props.onSubmit(formValues);\r\n    };\r\n\r\n    useEffect(() => {\r\n        props.fetchCategoriesForListing();\r\n    }, []);\r\n\r\n    const renderFields = () => {\r\n        if (props.categories.length === 0) {\r\n            return (\r\n                <div className=\"centerLoadingForModal\">\r\n                    <LoadingDots />\r\n                </div>\r\n            );\r\n        } else {\r\n            return (\r\n                <form onSubmit={props.handleSubmit(onSubmit)}>\r\n                    <h3>Categories</h3>\r\n                    <Field\r\n                        type=\"text\"\r\n                        name=\"category\"\r\n                        label=\"category\"\r\n                        component={renderDropDown}\r\n                        optionValues={props.categories}\r\n                    />\r\n                    <div className=\"modalFilterLocationWrap\">\r\n                        <div className=\"modalLocationDropdownWrap\">\r\n                            <h3>Province</h3>\r\n                            <Field\r\n                                name=\"province\"\r\n                                label=\"province\"\r\n                                type=\"text\"\r\n                                component={renderDropDown}\r\n                                optionValues={CANADIAN_PROVINCES.map(\r\n                                    (province) => {\r\n                                        return province.name;\r\n                                    }\r\n                                )}\r\n                            />\r\n                        </div>\r\n                        <div className=\"modalLocationDropdownWrap\">\r\n                            <h3>City</h3>\r\n                            <Field\r\n                                name=\"city\"\r\n                                label=\"city\"\r\n                                type=\"text\"\r\n                                component={renderDropDown}\r\n                                optionValues={\r\n                                    //@ts-ignore\r\n                                    !props.provinceValue\r\n                                        ? []\r\n                                        : CANADIAN_PROVINCE_AND_CITIES.filter(\r\n                                              (provinceAndCity) =>\r\n                                                  provinceAndCity.province ===\r\n                                                  //@ts-ignore\r\n                                                  props.provinceValue\r\n                                          )[0].cities\r\n                                }\r\n                            />\r\n                        </div>\r\n                    </div>\r\n                    <button className=\"modalAcceptButton\">Accept</button>\r\n                    {/* https://stackoverflow.com/questions/41590766/redux-form-always-validates-even-on-a-normal-button-press */}\r\n                    {/* By adding type=\"button\" the button will not be a \"submit\" button */}\r\n                    <button\r\n                        type=\"button\"\r\n                        className=\"modalCancelButton\"\r\n                        onClick={props.onCancel}\r\n                    >\r\n                        Cancel\r\n                    </button>\r\n                </form>\r\n            );\r\n        }\r\n    };\r\n    return <React.Fragment>{renderFields()}</React.Fragment>;\r\n};\r\n\r\nconst validate = (formValues: SearchFilterFormValues) => {\r\n    //MUST BE NAMED VALIDATE! Other names would be ignored by reduxForm(..)\r\n    const errors = {};\r\n    //If you return an empty object, redux form will assume everything is ok\r\n    return errors;\r\n};\r\n\r\nconst selector = formValueSelector(\"searchFilterForm\");\r\nconst mapStateToProps = (state: StoreState) => {\r\n    return {\r\n        categories: state.categories,\r\n        provinceValue: selector(state, \"province\"),\r\n    };\r\n};\r\n\r\nexport default connect(mapStateToProps, { fetchCategoriesForListing })(\r\n    reduxForm<{}, SearchFilterFormProps>({\r\n        form: \"searchFilterForm\",\r\n        validate,\r\n    })(SearchFilterForm)\r\n);\r\n","import React, { useEffect, useState } from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\nimport history from \"../browserHistory\";\r\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\r\nimport { faSlidersH, faSearch } from \"@fortawesome/free-solid-svg-icons\";\r\nimport Modal from \"./Modal\";\r\nimport SearchFilterForm, { SearchFilterFormValues } from \"./SearchFilterForm\";\r\n\r\nimport queryString from \"query-string\";\r\nimport { useLocation } from \"react-router-dom\";\r\nimport { filter, initial } from \"lodash\";\r\n\r\nexport interface SearchFilterFormProps {\r\n    onSubmit(formValues: SearchFilterFormValues): void;\r\n    onCancel(): void;\r\n    categories: string[];\r\n    fetchCategoriesForListing(): void;\r\n    initialValues?: any;\r\n}\r\n\r\nexport interface ModalProps {\r\n    onDismiss(): void;\r\n    title: string;\r\n    content: JSX.Element;\r\n    actions?: JSX.Element;\r\n}\r\n\r\nconst Searchbar: React.FC<{}> = () => {\r\n    const [showFilterModal, setShowFilterModal] = useState(false);\r\n    const [filterQueries, setFilterQueries] = useState<string | null>(null);\r\n    const [searchValue, setSearchValue] = useState(\"\");\r\n    const [initialLoad, setInitialLoad] = useState(true);\r\n\r\n    const onSubmitFilter = async (formValues: SearchFilterFormValues) => {\r\n        console.log(\"onsubmitfilter\", formValues);\r\n        //If we didn't fill out the city field:\r\n        //{category: \"Sportings Goods\", province: \"Manitoba\"}\r\n\r\n        //If we entered the city field, but then change it back to an empty field\r\n        //{category: \"Sportings Goods\", province: \"Alberta\", city: \"\"}\r\n\r\n        if (formValues.category || formValues.category === \"\") {\r\n            setFilterCategory(formValues.category);\r\n        }\r\n        if (formValues.province || formValues.province === \"\") {\r\n            setFilterProvince(formValues.province);\r\n        }\r\n        if (formValues.city || formValues.city === \"\") {\r\n            setFilterCity(formValues.city);\r\n        }\r\n\r\n        const keyNames = Object.keys(formValues);\r\n        let filterQuery = \"\";\r\n        keyNames.map((name) => {\r\n            //@ts-ignore for formValues[name] dont worry, the ts solution is a bit nasty\r\n            if (formValues[name] !== \"\") {\r\n                //@ts-ignore for formValues[name] dont worry, the ts solution is a bit nasty\r\n                filterQuery += `${name}=${formValues[name]}&`;\r\n            }\r\n        });\r\n        const editedFilterQuery = filterQuery.slice(0, -1); //remove last &\r\n        setFilterQueries(editedFilterQuery);\r\n\r\n        setShowFilterModal(false);\r\n    };\r\n    const onCancelFilter = () => {\r\n        setShowFilterModal(false);\r\n    };\r\n\r\n    const renderModalContent = () => {\r\n        return (\r\n            <SearchFilterForm\r\n                onSubmit={onSubmitFilter}\r\n                onCancel={onCancelFilter}\r\n                initialValues={renderInitialValuesForFilter()}\r\n            />\r\n        );\r\n    };\r\n\r\n    const renderModal = () => {\r\n        if (!showFilterModal) return null;\r\n        else {\r\n            return (\r\n                <Modal\r\n                    title=\"Filter Your Results\"\r\n                    content={renderModalContent()}\r\n                    // actions={renderModalActions()}\r\n                    onDismiss={onCancelFilter}\r\n                />\r\n            );\r\n        }\r\n    };\r\n\r\n    const [filterCategory, setFilterCategory] = useState<string | null>(null);\r\n    const [filterProvince, setFilterProvince] = useState<string | null>(null);\r\n    const [filterCity, setFilterCity] = useState<string | null>(null);\r\n\r\n    //For Query Strings:\r\n    const { search } = useLocation();\r\n    const queryValues: SearchFilterFormValues = queryString.parse(search);\r\n\r\n    useEffect(() => {\r\n        if (queryValues.category) setFilterCategory(queryValues.category);\r\n        if (queryValues.province) setFilterProvince(queryValues.province);\r\n        if (queryValues.city) setFilterCity(queryValues.city);\r\n        if (queryValues.search) setSearchValue(queryValues.search);\r\n    }, []);\r\n\r\n    const renderInitialValuesForFilter = () => {\r\n        console.log(\"renderInitialVal\", filterProvince);\r\n        const initialValues: any = {};\r\n        if (initialLoad) {\r\n            Object.keys(queryValues).map((val) => {\r\n                if (val === \"category\") {\r\n                    initialValues.category = filterCategory;\r\n                } else if (val === \"province\") {\r\n                    initialValues.province = filterProvince;\r\n                } else if (val === \"city\") {\r\n                    initialValues.city = filterCity;\r\n                }\r\n            });\r\n            setInitialLoad(false);\r\n        } else {\r\n            if (filterCategory || filterCategory === \"\") {\r\n                initialValues.category = filterCategory;\r\n            }\r\n            if (filterProvince || filterProvince === \"\") {\r\n                initialValues.province = filterProvince;\r\n            }\r\n            if (filterCity || filterCity === \"\") {\r\n                initialValues.city = filterCity;\r\n            }\r\n        }\r\n        return initialValues;\r\n    };\r\n\r\n    const directToListingsPage = () => {\r\n        if (filterQueries && searchValue !== \"\") {\r\n            // history.push(`/listings/1?search=${searchValue}&${filterQueries}`);\r\n            history.push({\r\n                pathname: \"/listings/1\",\r\n                search: `?search=${searchValue}&${filterQueries}`,\r\n            });\r\n        } else if (filterQueries) {\r\n            // history.push(`/listings/1?${filterQueries}`);\r\n            history.push({\r\n                pathname: \"/listings/1\",\r\n                search: `?${filterQueries}`,\r\n            });\r\n        } else if (searchValue) {\r\n            //history.push(`/listings/1?search=${searchValue}`);\r\n            history.push({\r\n                pathname: \"/listings/1\",\r\n                search: `?search=${searchValue}`,\r\n            });\r\n        } else {\r\n            history.push(`/listings/1`);\r\n        }\r\n    };\r\n\r\n    const handleKeyDown = (event: any) => {\r\n        //https://stackoverflow.com/questions/31272207/to-call-onchange-event-after-pressing-enter-key\r\n        if (event.key === \"Enter\") {\r\n            event.preventDefault(); //so ?search= won't automatically be inserted in the query when enter is clicked\r\n            directToListingsPage();\r\n        }\r\n    };\r\n\r\n    return (\r\n        <form className=\"searchBarForm\">\r\n            <FontAwesomeIcon\r\n                data-testid=\"filterIcon\"\r\n                className=\"searchBarIcons\"\r\n                icon={faSlidersH}\r\n                onClick={() => setShowFilterModal(true)}\r\n            />\r\n            <input\r\n                data-testid=\"searchBarInput\"\r\n                className=\"searchBarInput\"\r\n                type=\"search\"\r\n                placeholder=\"Search...\"\r\n                // aria-label=\"Search\"\r\n                value={searchValue}\r\n                name=\"search\"\r\n                onChange={(event) => setSearchValue(event.target.value.trim())}\r\n                onKeyDown={handleKeyDown}\r\n                autoComplete=\"off\"\r\n            />\r\n            <FontAwesomeIcon\r\n                className=\"searchBarIcons\"\r\n                data-testid=\"searchIcon\"\r\n                icon={faSearch}\r\n                onClick={() => {\r\n                    directToListingsPage();\r\n                }}\r\n            />\r\n            {renderModal()}\r\n        </form>\r\n    );\r\n};\r\n\r\nexport default Searchbar;\r\n","import React from \"react\";\r\n\r\nimport { useState, useEffect } from \"react\";\r\n\r\nconst getWindowDimensions = () => {\r\n    const { innerWidth: width, innerHeight: height } = window;\r\n    return {\r\n        width,\r\n        height,\r\n    };\r\n};\r\n\r\nconst useWindowDimensions = () => {\r\n    const [windowDimensions, setWindowDimensions] = useState(\r\n        getWindowDimensions()\r\n    );\r\n\r\n    useEffect(() => {\r\n        function handleResize() {\r\n            setWindowDimensions(getWindowDimensions());\r\n        }\r\n\r\n        window.addEventListener(\"resize\", handleResize);\r\n        return () => window.removeEventListener(\"resize\", handleResize);\r\n    }, []);\r\n\r\n    return windowDimensions;\r\n};\r\nexport default useWindowDimensions;\r\n","import React from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\nimport history from \"../browserHistory\";\r\nimport { connect } from \"react-redux\";\r\nimport { signOut } from \"../actions\";\r\nimport { StoreState } from \"../reducers\";\r\nimport Searchbar from \"./Searchbar\";\r\nimport useWindowDimensions from \"../windowDimensions\";\r\nimport { MED_SCREEN_SIZE } from \"../constants\";\r\nimport kijijiLogo from \"../img/kijijiLogo.png\";\r\n\r\ninterface IHeader {\r\n    authStatus?: string | null;\r\n    signOut(): void;\r\n}\r\n\r\nconst Header: React.FC<IHeader> = (props) => {\r\n    const { width } = useWindowDimensions();\r\n\r\n    return (\r\n        <nav>\r\n            <div className=\"headerInfoWrap\">\r\n                <img\r\n                    className=\"logo\"\r\n                    src={kijijiLogo}\r\n                    alt=\"logo\"\r\n                    data-testid=\"kijijiLogo\"\r\n                    onClick={() => history.push(\"/listings/1\")}\r\n                />\r\n\r\n                <div\r\n                    className={\r\n                        width > MED_SCREEN_SIZE\r\n                            ? \"displaySearchbar\"\r\n                            : \"hideSearchbar\"\r\n                    }\r\n                >\r\n                    <Searchbar />\r\n                </div>\r\n                {/* {width > MED_SCREEN_SIZE ? <Searchbar /> : null} */}\r\n\r\n                <div className=\"headerProfileAndPostWrap\">\r\n                    <h1\r\n                        data-testid=\"headerRegisterText\"\r\n                        className={\r\n                            props.authStatus\r\n                                ? \"navAuthStatusHide\"\r\n                                : \"navAuthStatus\"\r\n                        }\r\n                        onClick={() => {\r\n                            history.push(\"/signup\");\r\n                        }}\r\n                    >\r\n                        Register\r\n                    </h1>\r\n                    <h1\r\n                        data-testid=\"headerSignInText\"\r\n                        className={\r\n                            props.authStatus\r\n                                ? \"navAuthStatusHide\"\r\n                                : \"navAuthStatus\"\r\n                        }\r\n                        onClick={() => {\r\n                            history.push(\"/signin\");\r\n                        }}\r\n                    >\r\n                        Sign in\r\n                    </h1>\r\n                    <h1\r\n                        className={\r\n                            props.authStatus\r\n                                ? \"navAuthStatus\"\r\n                                : \"navAuthStatusHide\"\r\n                        }\r\n                        onClick={() => {\r\n                            props.signOut();\r\n                        }}\r\n                    >\r\n                        Sign Out\r\n                    </h1>\r\n                    <h1\r\n                        className={\r\n                            props.authStatus\r\n                                ? \"profileText\"\r\n                                : \"navAuthStatusHide\"\r\n                        }\r\n                        onClick={() => {\r\n                            history.push(\"/profile\");\r\n                        }}\r\n                        data-testid=\"headerProfile\"\r\n                    >\r\n                        Profile\r\n                    </h1>\r\n\r\n                    <button\r\n                        data-testid=\"postAdButtotn\"\r\n                        onClick={() => {\r\n                            props.authStatus\r\n                                ? history.push(\"/post-ad\")\r\n                                : history.push(\"/signin\");\r\n                        }}\r\n                        className=\"postAdButton\"\r\n                    >\r\n                        Post Ad\r\n                    </button>\r\n                </div>\r\n\r\n                <div\r\n                    className={\r\n                        width < MED_SCREEN_SIZE\r\n                            ? \"displaySearchbar\"\r\n                            : \"hideSearchbar\"\r\n                    }\r\n                >\r\n                    <Searchbar />\r\n                </div>\r\n\r\n                {/* {width < MED_SCREEN_SIZE ? <Searchbar /> : null} */}\r\n            </div>\r\n        </nav>\r\n    );\r\n};\r\n\r\nconst mapStateToProps = (state: StoreState) => {\r\n    return {\r\n        authStatus: state.authStatus.authenticated,\r\n    };\r\n};\r\n\r\nexport default connect(mapStateToProps, { signOut })(Header);\r\n","export default \"data:image/png;base64,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\"","import React, { ComponentType, useEffect } from \"react\";\r\nimport {\r\n    Field,\r\n    reduxForm,\r\n    reset,\r\n    change,\r\n    FormErrors,\r\n    InjectedFormProps,\r\n} from \"redux-form\";\r\n//compose is used to make it easier to \"organize\" mapStateToProps and redux form\r\nimport { StoreState } from \"../reducers\";\r\nimport { connect } from \"react-redux\";\r\nimport { RegisterFormProps } from \"./Register\";\r\n//Re-usable component\r\nexport interface RegisterFormValues {\r\n    email: string;\r\n    firstName: string;\r\n    lastName: string;\r\n    password: string;\r\n}\r\n\r\n//Typescriptand redux form:\r\n//https://levelup.gitconnected.com/react-js-typescript-redux-redux-form-jest-e522995ebe36\r\n\r\n//Need to hoist render methods up or else it will give error where it will unfocus after first characther is typed\r\n//https://stackoverflow.com/questions/39839051/using-redux-form-im-losing-focus-after-typing-the-first-character\r\n\r\nconst renderError = ({ error, touched }: any) => {\r\n    if (touched && error) {\r\n        //Touched (for input) will be false at first\r\n        //When clicked and then clicked otuside of the input, it will be true\r\n        return <div className=\"errorText\">{error}</div>;\r\n    }\r\n};\r\n\r\nconst renderTextInput = ({ input, label, meta, placeHolder }: any) => {\r\n    //\"component\" property automatically passes props to argument, it has {input properties and meta properties}\r\n    //\"label\" automatically passes props to arguments\r\n    return (\r\n        <div>\r\n            {/* <label>{label}</label> */}\r\n            <input\r\n                data-testid={label}\r\n                className=\"createAuthInputs\"\r\n                {...input}\r\n                autoComplete=\"off\"\r\n            />\r\n            {renderError(meta)}\r\n        </div>\r\n    );\r\n    //{..input} is shortcut for redux-form; where you take all the input from \"component's\" props and pass it as\r\n    //props to <input>\r\n};\r\n\r\nconst renderPasswordInput = ({ input, label, meta, placeHolder }: any) => {\r\n    return (\r\n        <div>\r\n            {/* <label>{label}</label> */}\r\n            <input\r\n                data-testid={label}\r\n                className=\"createAuthInputs\"\r\n                type=\"password\"\r\n                {...input}\r\n                autoComplete=\"off\"\r\n            />\r\n            {renderError(meta)}\r\n        </div>\r\n    );\r\n};\r\n\r\nconst RegisterForm: React.FC<\r\n    RegisterFormProps & InjectedFormProps<{}, RegisterFormProps>\r\n> = (props) => {\r\n    const onSubmit = (formValues: any, dispatch: any) => {\r\n        //onSubmit's default param is any\r\n        //event.preventDefault() is automatically called with handleSubmit, a redux-form property\r\n        //form values are the values from the fields that redux-form automatiacally passes\r\n        //after clicking the submit button\r\n        //dispatch(reset(\"registerForm\"));\r\n        props.onSubmit(formValues);\r\n\r\n        //dispatch(change(\"registerForm\", \"password\", \"\"));\r\n    };\r\n\r\n    return (\r\n        <React.Fragment>\r\n            <form\r\n                className=\"authForm\"\r\n                data-testid=\"registerForm\"\r\n                onSubmit={props.handleSubmit(onSubmit)}\r\n            >\r\n                <h1>Register</h1>\r\n                <div className=\"authFieldSection\">\r\n                    <div className=\"authFormFieldTitleWrap\">\r\n                        <h1>Email</h1>\r\n                        <h3 className=\"authFormFieldTitleEmailInUse\">\r\n                            {props.authStatus}\r\n                        </h3>\r\n                    </div>\r\n                    <Field\r\n                        name=\"email\"\r\n                        label=\"email\"\r\n                        type=\"text\"\r\n                        component={renderTextInput}\r\n                    />\r\n                </div>\r\n                <div className=\"authFieldSection\">\r\n                    <div className=\"authFormFieldTitleWrap\">\r\n                        <h1>First Name</h1>\r\n                        <h3 className=\"authFormFieldTitleEmailInUse\">\r\n                            {props.authStatus}\r\n                        </h3>\r\n                    </div>\r\n                    <Field\r\n                        name=\"firstName\"\r\n                        label=\"firstName\"\r\n                        type=\"text\"\r\n                        component={renderTextInput}\r\n                    />\r\n                </div>\r\n                <div className=\"authFieldSection\">\r\n                    <div className=\"authFormFieldTitleWrap\">\r\n                        <h1>Last Name</h1>\r\n                        <h3 className=\"authFormFieldTitleEmailInUse\">\r\n                            {props.authStatus}\r\n                        </h3>\r\n                    </div>\r\n                    <Field\r\n                        name=\"lastName\"\r\n                        label=\"lastName\"\r\n                        type=\"text\"\r\n                        component={renderTextInput}\r\n                    />\r\n                </div>\r\n                <div className=\"authFieldSection\">\r\n                    <div className=\"authFormFieldTitleWrap\">\r\n                        <h1>Password</h1>\r\n                        <h3 className=\"authFormFieldTitleEmailInUse\">\r\n                            {props.authStatus}\r\n                        </h3>\r\n                    </div>\r\n                    <Field\r\n                        name=\"password\"\r\n                        label=\"password\"\r\n                        type=\"password\"\r\n                        component={renderPasswordInput}\r\n                    />\r\n                </div>\r\n\r\n                <button data-testid=\"registerButton\" className=\"authButton\">\r\n                    Register\r\n                </button>\r\n            </form>\r\n        </React.Fragment>\r\n    );\r\n};\r\n\r\nconst validate = (\r\n    formValues: RegisterFormValues\r\n): FormErrors<RegisterFormValues> => {\r\n    //MUST BE NAMED VALIDATE! Other names would be ignored by reduxForm(..)\r\n    const errors: FormErrors<RegisterFormValues> = {};\r\n    //If you return an empty object, redux form will assume everything is ok\r\n    if (!formValues.email) {\r\n        //user did not enter title, so undefined\r\n        errors.email = \"You must enter an email\";\r\n        //Must be the same name as field name! The \"error\" property in {meta} would receive this\r\n    }\r\n\r\n    if (!formValues.firstName) {\r\n        errors.firstName = \"You must enter your first name\";\r\n    }\r\n\r\n    if (!formValues.lastName) {\r\n        errors.lastName = \"You must enter your last name\";\r\n    }\r\n    if (!formValues.password) {\r\n        errors.password = \"You must enter a password\";\r\n    }\r\n\r\n    return errors;\r\n    //Erors is going to be passed to renderInput's meta\r\n};\r\n\r\n// const mapStateToProps = (state: StoreState) => {\r\n//     return {\r\n//         authStatus: state.authStatus.errorMessage,\r\n//     };\r\n// };\r\n\r\nexport default connect()(\r\n    reduxForm<{}, RegisterFormProps>({\r\n        form: \"registerForm\",\r\n        validate,\r\n    })(RegisterForm)\r\n);\r\n","import React, { useEffect } from \"react\";\r\nimport RegisterForm, { RegisterFormValues } from \"./RegisterForm\";\r\nimport { StoreState } from \"../reducers\";\r\nimport { signUp } from \"../actions\";\r\nimport { connect } from \"react-redux\";\r\nimport history from \"../browserHistory\";\r\n\r\nexport interface RegisterFormProps {\r\n    onSubmit(formValues: any): void;\r\n    authStatus?: string | null;\r\n}\r\n\r\nexport interface RegisterProps {\r\n    signUp(formValues: any): void;\r\n    authStatus?: string | null;\r\n}\r\n\r\nconst Register: React.FC<RegisterProps> = (props) => {\r\n    //const history = useHistory();\r\n    const onSubmitRegister = async (formValues: RegisterFormValues) => {\r\n        props.signUp(formValues);\r\n    };\r\n\r\n    useEffect(() => {\r\n        //If user is already logged in, they should be unable to visit this page\r\n        if (props.authStatus) {\r\n            history.push(\"/listings/1\");\r\n        }\r\n    }, []);\r\n\r\n    return (\r\n        <div className=\"registerContainer\">\r\n            <div className=\"registerFormWrap\">\r\n                <RegisterForm\r\n                    onSubmit={(formValues: any) => onSubmitRegister(formValues)}\r\n                />\r\n            </div>\r\n            <div className=\"registerMiscWrap\">\r\n                <div className=\"alreadyRegisteredContainer\">\r\n                    <h1>Already Registered?</h1>\r\n                    <p>Sign in to post your ad</p>\r\n                    <button\r\n                        data-testid=\"alreadyRegisteredButton\"\r\n                        className=\"alreadyRegisteredButton\"\r\n                        onClick={() => history.push(\"/signin\")}\r\n                    >\r\n                        Sign in\r\n                    </button>\r\n                </div>\r\n                <div className=\"whyRegisterContainer\">\r\n                    <h1>Why Register?</h1>\r\n                    <p>\r\n                        To enhance your Kijiji experience and help you stay safe\r\n                        and secure, you now need to register to:\r\n                    </p>\r\n                    <ul>\r\n                        <li>Post, edit and manage ads</li>\r\n                        <li>\r\n                            Access saved ads in your Favourites from all of your\r\n                            devices\r\n                        </li>\r\n                        <li>\r\n                            Easily promote multiple ads to gain more visibility\r\n                            and view order history\r\n                        </li>\r\n                        <li>Reserve your own nickname</li>\r\n                        <li>And much more!</li>\r\n                    </ul>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nconst mapStateToProps = (state: StoreState) => {\r\n    return {\r\n        authStatus: state.authStatus.authenticated,\r\n    };\r\n};\r\nexport default connect(mapStateToProps, { signUp })(Register);\r\n","import React, { ComponentType, useEffect } from \"react\";\r\nimport {\r\n    Field,\r\n    reduxForm,\r\n    reset,\r\n    change,\r\n    FormErrors,\r\n    InjectedFormProps,\r\n} from \"redux-form\";\r\n//compose is used to make it easier to \"organize\" mapStateToProps and redux form\r\nimport { StoreState } from \"../reducers\";\r\nimport { connect } from \"react-redux\";\r\nimport { SignInFormProps } from \"./SignIn\";\r\n//Re-usable component\r\nexport interface SignInFormValues {\r\n    email: string;\r\n    password: string;\r\n}\r\n\r\n//Typescriptand redux form:\r\n//https://levelup.gitconnected.com/react-js-typescript-redux-redux-form-jest-e522995ebe36\r\n\r\n//Need to hoist render methods up or else it will give error where it will unfocus after first characther is typed\r\n//https://stackoverflow.com/questions/39839051/using-redux-form-im-losing-focus-after-typing-the-first-character\r\n\r\nconst renderError = ({ error, touched }: any) => {\r\n    if (touched && error) {\r\n        //Touched (for input) will be false at first\r\n        //When clicked and then clicked otuside of the input, it will be true\r\n        return <div className=\"errorText\">{error}</div>;\r\n    }\r\n};\r\n\r\nconst renderTextInput = ({ input, label, meta, placeHolder }: any) => {\r\n    //\"component\" property automatically passes props to argument, it has {input properties and meta properties}\r\n    //\"label\" automatically passes props to arguments\r\n    return (\r\n        <div>\r\n            {/* <label>{label}</label> */}\r\n            <input\r\n                className=\"createAuthInputs\"\r\n                data-testid={label}\r\n                {...input}\r\n                autoComplete=\"off\"\r\n            />\r\n            {renderError(meta)}\r\n        </div>\r\n    );\r\n    //{..input} is shortcut for redux-form; where you take all the input from \"component's\" props and pass it as\r\n    //props to <input>\r\n};\r\n\r\nconst renderPasswordInput = ({ input, label, meta, placeHolder }: any) => {\r\n    return (\r\n        <div>\r\n            {/* <label>{label}</label> */}\r\n            <input\r\n                className=\"createAuthInputs\"\r\n                data-testid={label}\r\n                type=\"password\"\r\n                {...input}\r\n                autoComplete=\"off\"\r\n            />\r\n            {renderError(meta)}\r\n        </div>\r\n    );\r\n};\r\n\r\nconst SignInForm: React.FC<\r\n    SignInFormProps & InjectedFormProps<{}, SignInFormProps>\r\n> = (props) => {\r\n    const onSubmit = (formValues: any, dispatch: any) => {\r\n        //onSubmit's default param is any\r\n        //event.preventDefault() is automatically called with handleSubmit, a redux-form property\r\n        //form values are the values from the fields that redux-form automatiacally passes\r\n        //after clicking the submit button\r\n        //dispatch(reset(\"registerForm\"));\r\n        props.onSubmit(formValues);\r\n        // dispatch(change(\"signInForm\", \"password\", \"\"));\r\n    };\r\n\r\n    return (\r\n        <React.Fragment>\r\n            <form\r\n                className=\"authForm\"\r\n                data-testid=\"signInForm\"\r\n                onSubmit={props.handleSubmit(onSubmit)}\r\n            >\r\n                <h1>Sign In</h1>\r\n                <div className=\"authFieldSection\">\r\n                    <div className=\"authFormFieldTitleWrap\">\r\n                        <h1>Email</h1>\r\n                        <h3 className=\"authFormFieldTitleEmailInUse\">\r\n                            {props.authStatus}\r\n                        </h3>\r\n                    </div>\r\n                    <Field\r\n                        name=\"email\"\r\n                        label=\"email\"\r\n                        type=\"text\"\r\n                        component={renderTextInput}\r\n                    />\r\n                </div>\r\n                <div className=\"authFieldSection\">\r\n                    <div className=\"authFormFieldTitleWrap\">\r\n                        <h1>Password</h1>\r\n                        <h3 className=\"authFormFieldTitleEmailInUse\">\r\n                            {props.authStatus}\r\n                        </h3>\r\n                    </div>\r\n                    <Field\r\n                        name=\"password\"\r\n                        label=\"password\"\r\n                        type=\"password\"\r\n                        component={renderPasswordInput}\r\n                    />\r\n                </div>\r\n\r\n                <button className=\"authButton\" data-testid=\"signInButton\">\r\n                    Sign In\r\n                </button>\r\n            </form>\r\n        </React.Fragment>\r\n    );\r\n};\r\n\r\nconst validate = (\r\n    formValues: SignInFormValues\r\n): FormErrors<SignInFormValues> => {\r\n    //MUST BE NAMED VALIDATE! Other names would be ignored by reduxForm(..)\r\n    const errors: FormErrors<SignInFormValues> = {};\r\n    //If you return an empty object, redux form will assume everything is ok\r\n    if (!formValues.email) {\r\n        //user did not enter title, so undefined\r\n        errors.email = \"You must enter an email\";\r\n        //Must be the same name as field name! The \"error\" property in {meta} would receive this\r\n    }\r\n    if (!formValues.password) {\r\n        errors.password = \"You must enter a password\";\r\n    }\r\n    return errors;\r\n    //Erors is going to be passed to renderInput's meta\r\n};\r\n\r\nconst mapStateToProps = (state: StoreState) => {\r\n    return {\r\n        authStatus: state.authStatus.errorMessage,\r\n    };\r\n};\r\n\r\nexport default connect(\r\n    mapStateToProps,\r\n    {}\r\n)(\r\n    reduxForm<{}, SignInFormProps>({\r\n        form: \"signInForm\",\r\n        validate,\r\n    })(SignInForm)\r\n);\r\n","import React, { useEffect } from \"react\";\r\nimport SignInForm, { SignInFormValues } from \"./SignInForm\";\r\nimport { signIn } from \"../actions\";\r\nimport { StoreState } from \"../reducers\";\r\nimport { connect } from \"react-redux\";\r\nimport history from \"../browserHistory\";\r\nexport interface SignInFormProps {\r\n    onSubmit(formValues: any): void;\r\n    authStatus?: string | null;\r\n}\r\n\r\nexport interface SignInProps {\r\n    signIn(formValues: any): void;\r\n    authStatus?: string | null;\r\n}\r\n\r\nconst SignIn: React.FC<SignInProps> = (props) => {\r\n    //const history = useHistory();\r\n    const onSubmitSignIn = async (formValues: SignInFormValues) => {\r\n        props.signIn(formValues);\r\n    };\r\n\r\n    useEffect(() => {\r\n        //If user is already logged in, they should be unable to visit this page\r\n        if (props.authStatus) {\r\n            history.push(\"/listings/1\");\r\n        }\r\n    }, []);\r\n\r\n    return (\r\n        <div className=\"signInContainer\">\r\n            <div className=\"signInFormWrap\">\r\n                <SignInForm\r\n                    onSubmit={(formValues: any) => onSubmitSignIn(formValues)}\r\n                />\r\n            </div>\r\n            <div className=\"signInMiscWrap\">\r\n                <div className=\"registerNowContainer\">\r\n                    <h1>Not registered yet?</h1>\r\n                    <p>\r\n                        Register now to post, edit, and manage ads. Its quick,\r\n                        easy, and free!\r\n                    </p>\r\n                    <button\r\n                        data-testid=\"registerNowButton\"\r\n                        className=\"registerNowButton\"\r\n                        onClick={() => history.push(\"/\")}\r\n                    >\r\n                        Register Now\r\n                    </button>\r\n                </div>\r\n                <div>\r\n                    <h1>Protect Your Account</h1>\r\n                    <p>\r\n                        Ensure that whenever you sign in to Kijiji, the web\r\n                        address in your browser starts with\r\n                        https://www.kijiji.ca/\r\n                    </p>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nconst mapStateToProps = (state: StoreState) => {\r\n    return {\r\n        authStatus: state.authStatus.authenticated,\r\n    };\r\n};\r\n\r\nexport default connect(mapStateToProps, { signIn })(SignIn);\r\n","import React, { Component } from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport { StoreState } from \"../reducers\";\r\nimport { History } from \"history\";\r\nimport { validateToken } from \"../actions\";\r\nimport { useLocation } from \"react-router-dom\";\r\n\r\nimport history from \"../browserHistory\";\r\n\r\nexport interface IHoc {\r\n    authStatus?: string | null;\r\n    history: History;\r\n    validateToken(path: string, retriedCalling: boolean): void;\r\n}\r\n\r\nconst hoc = (ChildComponent: any) => {\r\n    class ComposedComponent extends Component<IHoc> {\r\n        // Our component just got rendered\r\n        //Check for redux store's authStatus\r\n        componentDidMount() {\r\n            this.shouldNavigateAway();\r\n        }\r\n\r\n        // Our component just got updated\r\n        //If our redux store's authStatus changes\r\n        componentDidUpdate() {\r\n            this.shouldNavigateAway();\r\n        }\r\n\r\n        shouldNavigateAway() {\r\n            if (!this.props.authStatus) {\r\n                //if authStatus is empty string\r\n                //history is automatically passed due to React-router\r\n                //If done loading\r\n                this.props.history.push(\"/\");\r\n            } else {\r\n                //When user enter a page,\r\n                //validate access token, if it's not valid, redux's authStatus would be empty\r\n\r\n                this.props.validateToken(history.location.pathname, false);\r\n            }\r\n        }\r\n\r\n        render() {\r\n            return <ChildComponent {...this.props} />;\r\n        }\r\n    }\r\n\r\n    function mapStateToProps(state: StoreState) {\r\n        return {\r\n            authStatus: state.authStatus.authenticated,\r\n        };\r\n    }\r\n\r\n    return connect(mapStateToProps, { validateToken })(ComposedComponent);\r\n};\r\n\r\nexport default hoc;\r\n","export default \"data:image/png;base64,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\"","import React from \"react\";\r\nimport { css } from \"@emotion/core\";\r\nimport ClipLoader from \"react-spinners/ClipLoader\";\r\nconst Loading = (): JSX.Element => {\r\n    return <ClipLoader color={\"grey\"} loading={true} />;\r\n};\r\nexport default Loading;\r\n","import React, { useRef, useEffect, useState } from \"react\";\r\nimport {\r\n    Field,\r\n    reduxForm,\r\n    reset,\r\n    change,\r\n    FormErrors,\r\n    InjectedFormProps,\r\n} from \"redux-form\";\r\n//compose is used to make it easier to \"organize\" mapStateToProps and redux form\r\nimport { StoreState } from \"../reducers\";\r\nimport { connect } from \"react-redux\";\r\nimport { EditOrPostAdFormProps } from \"./PostAd\";\r\nimport postAdListingImagePlaceHolder from \"../img/postAdListingImagePlaceHolder.png\";\r\nimport { CANADIAN_PROVINCES, CANADIAN_PROVINCE_AND_CITIES } from \"../constants\";\r\nimport { formValueSelector } from \"redux-form\";\r\nimport { fetchCategoriesForListing } from \"../actions\";\r\nimport Loading from \"./Loading\";\r\nimport { SERVER_ERROR_MESSAGE } from \"../constants\";\r\n\r\nimport { useLocation } from \"react-router-dom\";\r\n\r\nexport interface EditOrPostAdFormValues {\r\n    title: string;\r\n    description: string;\r\n    category: string;\r\n    image: any;\r\n    province: string;\r\n    city: string;\r\n    street: string;\r\n    price: number;\r\n}\r\n\r\nconst renderError = ({ error, touched }: any) => {\r\n    if (touched && error) {\r\n        //Touched (for input) will be false at first\r\n        //When clicked and then clicked otuside of the input, it will be true\r\n        return <div className=\"errorText\">{error}</div>;\r\n    }\r\n};\r\n\r\nconst renderAutoFocusTextInput = ({ input, label, meta, placeHolder }: any) => {\r\n    //I think there's a bug with the librrary\r\n    //If we have initialValues set for the form and then we don't have an autofocs on for a field\r\n    //refs such as openFileExplorer will not be generated until a text is actualy focused.\r\n    //If we remove the initialValues, refs will be rendered.\r\n    return (\r\n        <div>\r\n            {/* <label>{label}</label> */}\r\n            <input\r\n                className=\"createPostAdInputs\"\r\n                {...input}\r\n                autoComplete=\"off\"\r\n                autoFocus\r\n            />\r\n            {renderError(meta)}\r\n        </div>\r\n    );\r\n};\r\n\r\nconst renderTextInput = ({ input, label, meta, placeHolder }: any) => {\r\n    //\"component\" property automatically passes props to argument, it has {input properties and meta properties}\r\n    //\"label\" automatically passes props to arguments\r\n    return (\r\n        <div>\r\n            {/* <label>{label}</label> */}\r\n            <input\r\n                className=\"createPostAdInputs\"\r\n                {...input}\r\n                autoComplete=\"off\"\r\n            />\r\n            {renderError(meta)}\r\n        </div>\r\n    );\r\n    //{..input} is shortcut for redux-form; where you take all the input from \"component's\" props and pass it as\r\n    //props to <input>\r\n};\r\n\r\nconst renderTextArea = ({ input, label, meta, placeHolder }: any) => {\r\n    return (\r\n        <div className=\"postAdTextAreaWrap\">\r\n            {/* <label>{label}</label> */}\r\n            <textarea\r\n                className=\"createPostAdTextArea\"\r\n                {...input}\r\n                autoComplete=\"off\"\r\n            />\r\n            {renderError(meta)}\r\n        </div>\r\n    );\r\n};\r\n\r\nconst renderDropDown = ({\r\n    input,\r\n    label,\r\n    meta,\r\n    placeHolder,\r\n    optionValues,\r\n}: any) => {\r\n    return (\r\n        <div>\r\n            {/* <label>{label}</label> */}\r\n            <select\r\n                className=\"createPostAdDropDown\"\r\n                {...input}\r\n                autoComplete=\"off\"\r\n            >\r\n                <option></option>\r\n                {optionValues.map((val: string) => (\r\n                    <option key={val} value={val}>\r\n                        {val}\r\n                    </option>\r\n                ))}\r\n            </select>\r\n\r\n            {renderError(meta)}\r\n        </div>\r\n    );\r\n};\r\n\r\nconst formatAmount = (input: string) => {\r\n    //For price input, from: https://blog.harveydelaney.com/redux-form-lifecycle-example/\r\n    if (!input) return;\r\n    if (isNaN(parseInt(input[input.length - 1], 10))) {\r\n        return input.slice(0, -1);\r\n    }\r\n    return input.replace(/,/g, \"\").replace(/\\B(?=(\\d{3})+(?!\\d))/g, \",\");\r\n};\r\n\r\nconst normalizeAmount = (val: string) => {\r\n    //For price input, from: https://blog.harveydelaney.com/redux-form-lifecycle-example/\r\n    return val.replace(/,/g, \"\");\r\n};\r\n\r\nconst renderFieldSectionLayout = (title: string, children: JSX.Element) => {\r\n    return (\r\n        <div className=\"postAdFieldSection\">\r\n            <div className=\"postAdFieldTitleWrap\">\r\n                <h1>{title}</h1>\r\n            </div>\r\n            {children}\r\n        </div>\r\n    );\r\n};\r\nconst PostAdForm: React.FC<\r\n    EditOrPostAdFormProps & InjectedFormProps<{}, EditOrPostAdFormProps>\r\n> = (props) => {\r\n    const location = useLocation();\r\n    const openFileExplorer = useRef(null);\r\n    const [listingImage, setListingImage] = useState<string | null>(null);\r\n    const [cloudinaryImage, setCloudinaryImage] = useState<string | null>(null);\r\n    useEffect(() => {\r\n        props.fetchCategoriesForListing();\r\n        if (props.cloudinaryImage) setCloudinaryImage(props.cloudinaryImage);\r\n        //  props.dispatch(change(\"postAdForm\", \"price\", props.listingPrice));\r\n        // props.dispatch(change(\"postAdForm\", \"description\", \"hi\"));\r\n    }, []);\r\n\r\n    const onSubmit = (formValues: any, dispatch: any) => {\r\n        props.onSubmit(formValues);\r\n    };\r\n\r\n    const renderImageUpload = ({\r\n        input,\r\n        label,\r\n        meta,\r\n        placeHolder,\r\n        optionValues,\r\n    }: any) => {\r\n        //We cannot pass in {...input} (so that the input is submited when onSubmit button is clicked) like our other renders because <input> has type=\"file\"\r\n        //Must do this instead: https://github.com/redux-form/redux-form/issues/3686\r\n        //We do not have a name in <input> so that redux won't complain with validate (thus making this input optional)\r\n\r\n        return (\r\n            <input\r\n                type=\"file\"\r\n                accept=\"image/*\"\r\n                style={{ display: \"none\" }}\r\n                ref={openFileExplorer}\r\n                onChange={(...args) => {\r\n                    //The input's text dosen't change but the input is actually inserted (do formValues.image below)\r\n                    //  let event = args.map((val) => val.nativeEvent)[0];\r\n                    input.onChange(...args);\r\n                    //@ts-ignore\r\n                    // setListingImage(URL.createObjectURL(event.target.files[0]));\r\n                    //chagne also dosen't change the textbox input\r\n                    // props.dispatch(\r\n                    //     change(\"postAdForm\", \"image\", event.target.files[0])\r\n                    // );\r\n                }}\r\n            />\r\n        );\r\n    };\r\n\r\n    const renderImage = () => {\r\n        if (cloudinaryImage) {\r\n            return {\r\n                backgroundImage: `url(${cloudinaryImage}), url(${postAdListingImagePlaceHolder})`,\r\n                backgroundPosition: \"center\",\r\n                backgroundSize: \"cover\",\r\n                backgroundColor: \"white\",\r\n            };\r\n        } else if (!cloudinaryImage && listingImage) {\r\n            return {\r\n                backgroundImage: `url(${listingImage}), url(${postAdListingImagePlaceHolder})`,\r\n                backgroundPosition: \"center\",\r\n                backgroundSize: \"cover\",\r\n                backgroundColor: \"white\",\r\n            };\r\n        } else {\r\n            return {\r\n                backgroundImage: `url(${postAdListingImagePlaceHolder})`,\r\n            };\r\n        }\r\n    };\r\n\r\n    const renderFields = (): JSX.Element => {\r\n        if (props.categories.length === 0) {\r\n            return (\r\n                <div className=\"loadingCenter\">\r\n                    <Loading />\r\n                </div>\r\n            );\r\n        } else if (props.categories[0] === SERVER_ERROR_MESSAGE) {\r\n            return (\r\n                <div className=\"serverErrorContainer\">\r\n                    <h3 className=\"serverErrorText\">{props.categories[0]}</h3>\r\n                </div>\r\n            );\r\n        } else {\r\n            return (\r\n                <form\r\n                    className=\"postAdForm\"\r\n                    onSubmit={props.handleSubmit(onSubmit)}\r\n                >\r\n                    {renderFieldSectionLayout(\r\n                        \"Ad Title\",\r\n                        <Field\r\n                            name=\"title\"\r\n                            type=\"text\"\r\n                            // label=\"Ad Title\"\r\n\r\n                            component={renderAutoFocusTextInput}\r\n                        />\r\n                    )}\r\n                    {renderFieldSectionLayout(\r\n                        \"Description\",\r\n                        <Field\r\n                            name=\"description\"\r\n                            type=\"text\"\r\n                            component={renderTextArea}\r\n                        />\r\n                    )}\r\n                    {renderFieldSectionLayout(\r\n                        \"Category\",\r\n                        <Field\r\n                            name=\"category\"\r\n                            component={renderDropDown}\r\n                            optionValues={props.categories}\r\n                        ></Field>\r\n                    )}\r\n\r\n                    {renderFieldSectionLayout(\r\n                        \"Add a photo for your ad\",\r\n                        <React.Fragment>\r\n                            <Field\r\n                                name=\"image\"\r\n                                type=\"file\"\r\n                                component={renderImageUpload}\r\n                                //@ts-ignore dont worry\r\n                                value={listingImage}\r\n                                ref={openFileExplorer}\r\n                                withRef\r\n                                onChange={(event: any) => {\r\n                                    //For some reason,\r\n                                    //The input's text dosen't change but the input is actually inserted (do formValues.image below)\r\n                                    setCloudinaryImage(null);\r\n                                    setListingImage(\r\n                                        URL.createObjectURL(\r\n                                            event.target.files[0]\r\n                                        )\r\n                                    );\r\n\r\n                                    // console.log(\r\n                                    //     `Selected file - ${event.target.files[0].name}`\r\n                                    // );\r\n                                    //https://medium.com/@650egor/react-30-day-challenge-day-2-image-upload-preview-2d534f8eaaa\r\n                                }}\r\n                            />\r\n                            <div className=\"imageUploadWrapper\">\r\n                                <input\r\n                                    type=\"button\"\r\n                                    value={\r\n                                        listingImage || cloudinaryImage\r\n                                            ? \"\"\r\n                                            : \"Choose Files!\"\r\n                                    }\r\n                                    className=\"postAdChooseListingImage\"\r\n                                    onClick={() => {\r\n                                        // @ts-ignore\r\n                                        openFileExplorer.current.click();\r\n                                    }}\r\n                                    style={renderImage()}\r\n                                />\r\n\r\n                                {(listingImage || props.cloudinaryImage) && (\r\n                                    <h3\r\n                                        className=\"removeUploadedImage\"\r\n                                        onClick={() => {\r\n                                            setListingImage(null);\r\n                                            setCloudinaryImage(null);\r\n                                            props.dispatch(\r\n                                                change(\r\n                                                    \"postAdForm\",\r\n                                                    \"image\",\r\n                                                    null\r\n                                                )\r\n                                            );\r\n                                        }}\r\n                                    >\r\n                                        Remove\r\n                                    </h3>\r\n                                )}\r\n                            </div>\r\n                        </React.Fragment>\r\n                    )}\r\n                    {renderFieldSectionLayout(\r\n                        \"Province\",\r\n                        <Field\r\n                            name=\"province\"\r\n                            type=\"text\"\r\n                            component={renderDropDown}\r\n                            optionValues={CANADIAN_PROVINCES.map((province) => {\r\n                                return province.name;\r\n                            })}\r\n                        />\r\n                    )}\r\n                    {renderFieldSectionLayout(\r\n                        \"City\",\r\n                        <Field\r\n                            name=\"city\"\r\n                            type=\"text\"\r\n                            component={renderDropDown}\r\n                            optionValues={\r\n                                !props.provinceValue\r\n                                    ? []\r\n                                    : CANADIAN_PROVINCE_AND_CITIES.filter(\r\n                                          (provinceAndCity) =>\r\n                                              provinceAndCity.province ===\r\n                                              props.provinceValue\r\n                                      )[0].cities\r\n                            }\r\n                        />\r\n                    )}\r\n                    {renderFieldSectionLayout(\r\n                        \"Street\",\r\n                        <Field\r\n                            name=\"street\"\r\n                            type=\"text\"\r\n                            component={renderTextInput}\r\n                        />\r\n                    )}\r\n\r\n                    {renderFieldSectionLayout(\r\n                        \"Price ($ CAD)\",\r\n                        <Field\r\n                            name=\"price\"\r\n                            type=\"text\"\r\n                            component={renderTextInput}\r\n                            format={formatAmount}\r\n                            normalize={normalizeAmount}\r\n                        />\r\n                    )}\r\n\r\n                    <button className=\"postAdFormSubmit\">\r\n                        {location.pathname === \"/post-ad\"\r\n                            ? \"Post Your Ad\"\r\n                            : \"Edit Your Ad\"}\r\n                    </button>\r\n                    {location.pathname === \"/post-ad\" ? (\r\n                        \"\"\r\n                    ) : (\r\n                        <button\r\n                            className=\"deleteAd\"\r\n                            type=\"button\"\r\n                            onClick={props.onDelete}\r\n                        >\r\n                            Delete Ad\r\n                        </button>\r\n                    )}\r\n                </form>\r\n            );\r\n        }\r\n    };\r\n\r\n    return <React.Fragment>{renderFields()}</React.Fragment>;\r\n};\r\n\r\nconst validate = (\r\n    formValues: EditOrPostAdFormValues\r\n): FormErrors<EditOrPostAdFormValues> => {\r\n    //MUST BE NAMED VALIDATE! Other names would be ignored by reduxForm(..)\r\n    const errors: FormErrors<EditOrPostAdFormValues> = {};\r\n    //If you return an empty object, redux form will assume everything is ok\r\n    // console.log(\"FILE UPLOAD VALUE\", formValues.image);\r\n    if (!formValues.title) {\r\n        //user did not enter title, so undefined\r\n        errors.title = \"You must enter a title\";\r\n        //Must be the same name as field name! The \"error\" property in {meta} would receive this\r\n    }\r\n\r\n    if (!formValues.description) {\r\n        errors.description = \"You must enter a description\";\r\n    }\r\n\r\n    if (!formValues.category) {\r\n        errors.category = \"You must enter a category\";\r\n    }\r\n\r\n    if (!formValues.province) {\r\n        errors.province = \"You must enter a province\";\r\n    }\r\n\r\n    if (!formValues.city) {\r\n        errors.city = \"You must enter a city\";\r\n    }\r\n\r\n    if (!formValues.street) {\r\n        errors.street = \"You must enter a street\";\r\n    }\r\n    if (!formValues.price) {\r\n        errors.price = \"You must enter a price\";\r\n    }\r\n\r\n    return errors;\r\n    //Erors is going to be passed to renderInput's meta\r\n};\r\nconst selector = formValueSelector(\"postAdForm\");\r\n//get form values with formvalueSelector\r\n//https://redux-form.com/6.6.0/docs/api/formvalueselector.md/\r\nconst mapStateToProps = (state: StoreState) => {\r\n    return {\r\n        categories: state.categories,\r\n        provinceValue: selector(state, \"province\"),\r\n    };\r\n};\r\n\r\nexport default connect(mapStateToProps, { fetchCategoriesForListing })(\r\n    reduxForm<{}, EditOrPostAdFormProps>({\r\n        form: \"postAdForm\",\r\n        validate,\r\n        enableReinitialize: true,\r\n    })(PostAdForm)\r\n);\r\n\r\n//enableReinitialize: true is fo:\r\n//initialState does not re-render unless we eable enableReinitialize: true (pretty sure it has to do with the current redux version because\r\n//our music video stream project work without it)\r\n//https://stackoverflow.com/questions/38881324/redux-form-initialvalues-not-updating-with-state\r\n","import React, { useEffect, useState } from \"react\";\r\nimport { Link, useLocation } from \"react-router-dom\";\r\nimport requireAuth from \"./requireAuth\";\r\nimport EditOrPostAdForm from \"./EditOrPostAdForm\";\r\nimport { connect } from \"react-redux\";\r\nimport { StoreState } from \"../reducers\";\r\nimport { createListing, Listing } from \"../actions/listing\";\r\nimport jwt_decode from \"jwt-decode\";\r\nimport CookieService from \"../CookieService\";\r\nimport { ListingDataResponse } from \"../reducers/listingReducer\";\r\nimport Loading from \"./Loading\";\r\n\r\nexport interface EditOrPostAdFormProps {\r\n    onSubmit(formValues: any): void;\r\n    onDelete?(formValues: any): void;\r\n    fetchCategoriesForListing(): void;\r\n    initialValues?: any;\r\n    provinceValue?: string;\r\n    categories: string[];\r\n    dispatch?: any;\r\n    cloudinaryImage?: string;\r\n}\r\n\r\nexport interface PostAdProps {\r\n    createListing(formValues: any): void;\r\n    listingInfo: ListingDataResponse;\r\n}\r\n\r\nconst PostAd: React.FC<PostAdProps> = (props) => {\r\n    // useEffect(() => {\r\n    //     const cookieService = CookieService.getService();\r\n    //     console.log(\"JWT DECODE\", jwt_decode(cookieService.getAccessToken()));\r\n    // }, []);\r\n    const onSubmitPostListing = async (formValues: any) => {\r\n        props.createListing(formValues);\r\n    };\r\n    return (\r\n        <div className=\"postAdPageContainer\">\r\n            <h1>Post Your Ad, it's fast and easy</h1>\r\n            <EditOrPostAdForm\r\n                onSubmit={onSubmitPostListing}\r\n                // initialValues={{\r\n                //     title: \"bye\",\r\n                //     image: \"\",\r\n                // }}\r\n            />\r\n        </div>\r\n    );\r\n};\r\n\r\nconst mapStateToProps = (state: StoreState) => {\r\n    return {\r\n        listingInfo: state.listingInfo,\r\n    };\r\n};\r\n\r\nexport default connect(mapStateToProps, { createListing })(requireAuth(PostAd));\r\n","import React from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\nimport history from \"../browserHistory\";\r\nimport { connect } from \"react-redux\";\r\nimport { StoreState } from \"../reducers\";\r\nimport { Listing as ListingType } from \"../actions\";\r\nimport moment from \"moment\";\r\nimport postAdListingImagePlaceHolder from \"../img/postAdListingImagePlaceHolder.png\";\r\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\r\nimport { faPencilAlt } from \"@fortawesome/free-solid-svg-icons\";\r\n\r\nimport { useLocation } from \"react-router-dom\";\r\n\r\nconst Listing: React.FC<ListingType> = ({\r\n    listing_id,\r\n    listing_name,\r\n    listing_image,\r\n    listing_price,\r\n    listing_description,\r\n    listing_date,\r\n    province,\r\n    city,\r\n    street,\r\n}) => {\r\n    const location = useLocation();\r\n    return (\r\n        <div\r\n            className=\"listingPreviewContainer\"\r\n            onClick={() => {\r\n                history.push(`/listing/${listing_id}`);\r\n            }}\r\n        >\r\n            {location.pathname === \"/profile\" ? (\r\n                <FontAwesomeIcon\r\n                    className=\"pencilIcon\"\r\n                    icon={faPencilAlt}\r\n                    onClick={(event) => {\r\n                        event.stopPropagation(); //stops bubbling for history.push\r\n                        history.push(`/listing/${listing_id}/edit`);\r\n                    }}\r\n                />\r\n            ) : (\r\n                \"\"\r\n            )}\r\n            <div className=\"listingPreviewImageContainer\">\r\n                <img\r\n                    src={\r\n                        !listing_image\r\n                            ? postAdListingImagePlaceHolder\r\n                            : listing_image\r\n                    }\r\n                    //If image that we get from cloudinary is no longer valid / broken for some reason, resort to default image\r\n                    onError={(e: any) => {\r\n                        e.target.src = postAdListingImagePlaceHolder; // some replacement image\r\n                        // e.target.style = 'padding: 8px; margin: 16px' // inline styles in html format\r\n                    }}\r\n                    alt=\"listing\"\r\n                />\r\n            </div>\r\n            <div className=\"listingPreviewInfoWrap\">\r\n                <div className=\"titleAndPriceWrap\">\r\n                    <h1 className=\"title\">{listing_name}</h1>\r\n                    <h1 className=\"price\">${listing_price}</h1>\r\n                </div>\r\n                <div className=\"locationAndDateWrap\">\r\n                    <h3 className=\"location\">{`${city}, ${province} at ${street} `}</h3>\r\n\r\n                    <h3 className=\"date\">\r\n                        {moment(listing_date).format(\"YYYY/MM/DD\")}\r\n                    </h3>\r\n                </div>\r\n                <p className=\"listingDescription\">{listing_description}</p>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nconst mapStateToProps = (state: StoreState) => {\r\n    return {};\r\n};\r\n\r\nexport default connect(mapStateToProps, {})(Listing);\r\n","import React, { useState } from \"react\";\r\nimport history from \"../browserHistory\";\r\n\r\ninterface PaginationProps {\r\n    totalItems: number;\r\n    itemLimit: number;\r\n    currentPage: number;\r\n    onClickCallback(pageNumber: number): void;\r\n    query: string;\r\n}\r\n\r\nconst Pagination: React.FC<PaginationProps> = (props) => {\r\n    const renderPageItems = (totalItems: number, itemLimit: number) => {\r\n        let numberOfPageItems = Math.ceil(totalItems / itemLimit); //rounds up\r\n        let pageItems = [];\r\n        for (let i = 0; i < numberOfPageItems; i++) {\r\n            pageItems.push(i + 1);\r\n        }\r\n\r\n        return (\r\n            <ul className=\"pagination\">\r\n                {pageItems.map((pageNumber) => {\r\n                    return (\r\n                        <li\r\n                            key={pageNumber}\r\n                            onClick={() => {\r\n                                props.onClickCallback(pageNumber);\r\n                                history.push({\r\n                                    pathname: `/listings/${pageNumber}`,\r\n                                    search: `${props.query}`,\r\n                                });\r\n                            }}\r\n                            className={\r\n                                props.currentPage == pageNumber\r\n                                    ? \"pageItemSelected\"\r\n                                    : \"pageItem\"\r\n                            }\r\n                        >\r\n                            {pageNumber}\r\n                        </li>\r\n                    );\r\n                })}\r\n            </ul>\r\n        );\r\n    };\r\n    return (\r\n        <React.Fragment>\r\n            {renderPageItems(props.totalItems, props.itemLimit)}\r\n        </React.Fragment>\r\n    );\r\n};\r\n\r\nexport default Pagination;\r\n","import React, { useEffect, useState } from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\nimport history from \"../browserHistory\";\r\nimport { connect } from \"react-redux\";\r\nimport {\r\n    fetchListingsByOldestDate,\r\n    fetchListingsByNewestDate,\r\n    fetchListingsByLowestPrice,\r\n    fetchListingsByHighestPrice,\r\n    Listing as ListingType,\r\n} from \"../actions\";\r\nimport { StoreState } from \"../reducers\";\r\nimport Listing from \"./Listing\";\r\nimport Loading from \"./Loading\";\r\nimport Pagination from \"./Pagination\";\r\nimport queryString from \"query-string\";\r\nimport { useLocation, useParams } from \"react-router-dom\";\r\nexport const ORDER_BY_OLDEST_DATE = \"Posted: oldest first\";\r\nexport const ORDER_BY_NEWEST_DATE = \"Posted: newest first\";\r\nexport const ORDER_BY_LOWEST_PRICE = \" Price: lowest first\";\r\nexport const ORDER_BY_HIGHEST_PRICE = \"Price: highest first\";\r\n\r\ninterface IListings {\r\n    fetchListingsByOldestDate(pageNumber: number, queryPath: string): void;\r\n    fetchListingsByNewestDate(pageNumber: number, queryPath: string): void;\r\n    fetchListingsByLowestPrice(pageNumber: number, queryPath: string): void;\r\n    fetchListingsByHighestPrice(pageNumber: number, queryPath: string): void;\r\n    listingInfo: any;\r\n    match: any;\r\n}\r\n\r\nconst Listings: React.FC<IListings> = (props) => {\r\n    const [currentPage, setCurrentPage] = useState(props.match.params.page);\r\n    const [selectedSort, setSelectedSort] = useState(ORDER_BY_OLDEST_DATE);\r\n    //For Query Strings:\r\n    const { search } = useLocation();\r\n\r\n    const renderShowingText = () => {\r\n        if (props.listingInfo.totalListings < props.listingInfo.limitPerPage) {\r\n            return props.listingInfo.totalListings;\r\n        } else if (\r\n            props.listingInfo.limitPerPage * props.listingInfo.page >\r\n            props.listingInfo.totalListings\r\n        ) {\r\n            return props.listingInfo.totalListings;\r\n        } else {\r\n            return props.listingInfo.limitPerPage * props.listingInfo.page;\r\n        }\r\n    };\r\n\r\n    const handleDropdownChange = (event: any) => {\r\n        let valueOfSelectedOption = event.target.value;\r\n        if (valueOfSelectedOption === ORDER_BY_OLDEST_DATE) {\r\n            setSelectedSort(ORDER_BY_OLDEST_DATE);\r\n            props.fetchListingsByOldestDate(currentPage, search);\r\n        } else if (valueOfSelectedOption === ORDER_BY_NEWEST_DATE) {\r\n            setSelectedSort(ORDER_BY_NEWEST_DATE);\r\n            props.fetchListingsByNewestDate(currentPage, search);\r\n        } else if (valueOfSelectedOption === ORDER_BY_LOWEST_PRICE) {\r\n            setSelectedSort(ORDER_BY_LOWEST_PRICE);\r\n            props.fetchListingsByLowestPrice(currentPage, search);\r\n        } else if (valueOfSelectedOption === ORDER_BY_HIGHEST_PRICE) {\r\n            setSelectedSort(ORDER_BY_HIGHEST_PRICE);\r\n            props.fetchListingsByHighestPrice(currentPage, search);\r\n        }\r\n    };\r\n    const pageNumberClicked = (pageNumber: number) => {\r\n        //We don't use currentPage becaause oru useEffect does not has [currentPage]\r\n        //setting it to currentPage causes rendering issues where the page is not updating properly\r\n\r\n        if (selectedSort === ORDER_BY_OLDEST_DATE) {\r\n            props.fetchListingsByOldestDate(pageNumber, search);\r\n        } else if (selectedSort === ORDER_BY_NEWEST_DATE) {\r\n            props.fetchListingsByNewestDate(pageNumber, search);\r\n        } else if (selectedSort === ORDER_BY_LOWEST_PRICE) {\r\n            props.fetchListingsByLowestPrice(pageNumber, search);\r\n        } else if (selectedSort === ORDER_BY_HIGHEST_PRICE) {\r\n            props.fetchListingsByHighestPrice(pageNumber, search);\r\n        }\r\n    };\r\n\r\n    const renderListings = () => {\r\n        if (!props.listingInfo) {\r\n            return (\r\n                <div className=\"loadingCenter\">\r\n                    <Loading />\r\n                </div>\r\n            );\r\n        } else if (props.listingInfo.error) {\r\n            return (\r\n                <div className=\"serverErrorContainer\">\r\n                    <h3 className=\"serverErrorText\">\r\n                        {props.listingInfo.error}\r\n                    </h3>\r\n                </div>\r\n            );\r\n        } else if (!props.listingInfo.listings) {\r\n            //Important: we use .listings here because listingInfo change it's state\r\n            //if user clicks the listing (<ListingDetail> is triggered); there is no .listings\r\n            //when it's triggered, so it will cause an undefined error at the else statement if we click back button\r\n            return (\r\n                <div className=\"loadingCenter\">\r\n                    <Loading />\r\n                </div>\r\n            );\r\n        } else {\r\n            if (props.listingInfo.listings.length === 0) {\r\n                //When users enter an invalid page number in the url\r\n                return (\r\n                    <h2 className=\"nothingToShow\">\r\n                        There seems to be nothing to show here...\r\n                    </h2>\r\n                );\r\n            }\r\n\r\n            return (\r\n                <React.Fragment>\r\n                    <div className=\"listingsContainer\">\r\n                        <div className=\"showingAdsTitleAndDropdownWrap\">\r\n                            <h1 className=\"showingAdsTitle\">{`Showing ${renderShowingText()} out of ${\r\n                                props.listingInfo.totalListings\r\n                            } ads:`}</h1>\r\n                            <div className=\"dropdownWrap\">\r\n                                <h3>Sort by</h3>\r\n                                <select\r\n                                    className=\"sortByDropdown\"\r\n                                    onChange={handleDropdownChange}\r\n                                >\r\n                                    <option value={ORDER_BY_OLDEST_DATE}>\r\n                                        {ORDER_BY_OLDEST_DATE}\r\n                                    </option>\r\n                                    <option value={ORDER_BY_NEWEST_DATE}>\r\n                                        {ORDER_BY_NEWEST_DATE}\r\n                                    </option>\r\n                                    <option value={ORDER_BY_LOWEST_PRICE}>\r\n                                        {ORDER_BY_LOWEST_PRICE}\r\n                                    </option>\r\n                                    <option value={ORDER_BY_HIGHEST_PRICE}>\r\n                                        {ORDER_BY_HIGHEST_PRICE}\r\n                                    </option>\r\n                                </select>\r\n                            </div>\r\n                        </div>\r\n                        {props.listingInfo.listings.map(\r\n                            (listing: ListingType) => (\r\n                                <Listing\r\n                                    key={listing.listing_id}\r\n                                    {...listing}\r\n                                />\r\n                            )\r\n                        )}\r\n                        <Pagination\r\n                            totalItems={props.listingInfo.totalListings}\r\n                            itemLimit={props.listingInfo.limitPerPage}\r\n                            currentPage={currentPage}\r\n                            onClickCallback={pageNumberClicked}\r\n                            query={search}\r\n                        />\r\n                    </div>\r\n                </React.Fragment>\r\n            );\r\n        }\r\n    };\r\n\r\n    useEffect(() => {\r\n        //When we click the back button, fetchListing does not get rendered\r\n        //So we intercept the back button and forward button with:\r\n        let backAndForwardButtonClicked = false;\r\n        window.onpopstate = (e: Event) => {\r\n            backAndForwardButtonClicked = true;\r\n            console.log(\"back button\", selectedSort);\r\n            if (selectedSort === ORDER_BY_OLDEST_DATE) {\r\n                props.fetchListingsByOldestDate(currentPage, search);\r\n            } else if (selectedSort === ORDER_BY_NEWEST_DATE) {\r\n                props.fetchListingsByNewestDate(currentPage, search);\r\n            } else if (selectedSort === ORDER_BY_LOWEST_PRICE) {\r\n                props.fetchListingsByLowestPrice(currentPage, search);\r\n            } else if (selectedSort === ORDER_BY_HIGHEST_PRICE) {\r\n                props.fetchListingsByHighestPrice(currentPage, search);\r\n            }\r\n        };\r\n        if (backAndForwardButtonClicked === false) {\r\n            if (selectedSort === ORDER_BY_OLDEST_DATE) {\r\n                props.fetchListingsByOldestDate(\r\n                    props.match.params.page,\r\n                    search\r\n                );\r\n            } else if (selectedSort === ORDER_BY_NEWEST_DATE) {\r\n                props.fetchListingsByNewestDate(\r\n                    props.match.params.page,\r\n                    search\r\n                );\r\n            } else if (selectedSort === ORDER_BY_LOWEST_PRICE) {\r\n                props.fetchListingsByLowestPrice(\r\n                    props.match.params.page,\r\n                    search\r\n                );\r\n            } else if (selectedSort === ORDER_BY_HIGHEST_PRICE) {\r\n                props.fetchListingsByHighestPrice(\r\n                    props.match.params.page,\r\n                    search\r\n                );\r\n            }\r\n        }\r\n        setCurrentPage(props.match.params.page); //hook renders after everything in useffect is executed\r\n    }, [props.match.params.page, search]);\r\n\r\n    return <React.Fragment>{renderListings()}</React.Fragment>;\r\n};\r\n\r\nconst mapStateToProps = (state: StoreState) => {\r\n    // return { listings: Object.values(state.listings) };\r\n    return { listingInfo: state.listingInfo.data };\r\n};\r\n\r\nexport default connect(mapStateToProps, {\r\n    fetchListingsByOldestDate,\r\n    fetchListingsByNewestDate,\r\n    fetchListingsByLowestPrice,\r\n    fetchListingsByHighestPrice,\r\n})(Listings);\r\n","export default \"data:image/jpeg;base64,/9j/4AAQSkZJRgABAQEBLAEsAAD/4QBWRXhpZgAATU0AKgAAAAgABAEaAAUAAAABAAAAPgEbAAUAAAABAAAARgEoAAMAAAABAAIAAAITAAMAAAABAAEAAAAAAAAAAAEsAAAAAQAAASwAAAAB/+0ALFBob3Rvc2hvcCAzLjAAOEJJTQQEAAAAAAAPHAFaAAMbJUccAQAAAgAEAP/hDIFodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvADw/eHBhY2tldCBiZWdpbj0n77u/JyBpZD0nVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkJz8+Cjx4OnhtcG1ldGEgeG1sbnM6eD0nYWRvYmU6bnM6bWV0YS8nIHg6eG1wdGs9J0ltYWdlOjpFeGlmVG9vbCAxMC4xMCc+CjxyZGY6UkRGIHhtbG5zOnJkZj0naHR0cDovL3d3dy53My5vcmcvMTk5OS8wMi8yMi1yZGYtc3ludGF4LW5zIyc+CgogPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9JycKICB4bWxuczp0aWZmPSdodHRwOi8vbnMuYWRvYmUuY29tL3RpZmYvMS4wLyc+CiAgPHRpZmY6UmVzb2x1dGlvblVuaXQ+MjwvdGlmZjpSZXNvbHV0aW9uVW5pdD4KICA8dGlmZjpYUmVzb2x1dGlvbj4zMDAvMTwvdGlmZjpYUmVzb2x1dGlvbj4KICA8dGlmZjpZUmVzb2x1dGlvbj4zMDAvMTwvdGlmZjpZUmVzb2x1dGlvbj4KIDwvcmRmOkRlc2NyaXB0aW9uPgoKIDxyZGY6RGVzY3JpcHRpb24gcmRmOmFib3V0PScnCiAgeG1sbnM6eG1wTU09J2h0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8nPgogIDx4bXBNTTpEb2N1bWVudElEPmFkb2JlOmRvY2lkOnN0b2NrOjQ5ZDRhN2FlLTI1NjYtNDY5Yi05NmI5LWUxYzAxM2JiNmEwYzwveG1wTU06RG9jdW1lbnRJRD4KICA8eG1wTU06SW5zdGFuY2VJRD54bXAuaWlkOjUxYWY0OTY0LWE4MjQtNDk1Yy04MzgzLTQ3OTYxMzNjMzY2YjwveG1wTU06SW5zdGFuY2VJRD4KIDwvcmRmOkRlc2NyaXB0aW9uPgo8L3JkZjpSREY+CjwveDp4bXBtZXRhPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAo8P3hwYWNrZXQgZW5kPSd3Jz8+/9sAQwAFAwQEBAMFBAQEBQUFBgcMCAcHBwcPCwsJDBEPEhIRDxERExYcFxMUGhURERghGBodHR8fHxMXIiQiHiQcHh8e/8AACwgBaAFoAQERAP/EABsAAQADAQEBAQAAAAAAAAAAAAAFBgcEAgMB/8QAPhABAAEDAgIECA0EAgMAAAAAAAECAwQFBhEhEjFBUQcTNmFzgbHRFSIkMkJSU2JxcpGhwRQjk+GC8RY0Vf/aAAgBAQAAPwDXQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA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\"","import React, { useEffect, useState } from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\nimport history from \"../browserHistory\";\r\nimport { connect } from \"react-redux\";\r\nimport { StoreState } from \"../reducers\";\r\nimport {\r\n    ListingDetail as ListingDetailType,\r\n    fetchListingDetail,\r\n} from \"../actions\";\r\nimport postAdListingImagePlaceHolder from \"../img/postAdListingImagePlaceHolder.png\";\r\nimport defaultProfilePic from \"../img/defaultProfilePic.jpg\";\r\nimport Loading from \"./Loading\";\r\nimport moment from \"moment\";\r\n\r\ninterface ListingDetailProps {\r\n    fetchListingDetail(listingId: string): void;\r\n    listingDetail: any;\r\n    match: any;\r\n}\r\nconst ListingDetail: React.FC<ListingDetailProps> = (props) => {\r\n    const [showMore, setShowMore] = useState(false);\r\n    useEffect(() => {\r\n        props.fetchListingDetail(props.match.params.id);\r\n    }, []);\r\n\r\n    const renderListingDetail = () => {\r\n        if (!props.listingDetail) {\r\n            return (\r\n                <div className=\"loadingCenter\">\r\n                    <Loading />\r\n                </div>\r\n            );\r\n            //@ts-ignore too lazy to fix ts error, but I get the idea\r\n        } else if (props.listingDetail.error) {\r\n            return (\r\n                <div className=\"serverErrorContainer\">\r\n                    <h3 className=\"serverErrorText\">\r\n                        {\r\n                            //@ts-ignore too lazy to fix ts error, but I get the idea\r\n                            props.listingDetail.error\r\n                        }\r\n                    </h3>\r\n                </div>\r\n            );\r\n        } else {\r\n            const {\r\n                first_name,\r\n                last_name,\r\n                member_since,\r\n                email,\r\n                listing_id,\r\n                listing_name,\r\n                listing_price,\r\n                listing_description,\r\n                category_name,\r\n                listing_image,\r\n                province,\r\n                city,\r\n                street,\r\n                listing_date,\r\n            } = props.listingDetail;\r\n\r\n            return (\r\n                <React.Fragment>\r\n                    <div className=\"listingDetailCategories\">\r\n                        <h3>{`${province} > ${city} > ${street} > ${category_name}`}</h3>\r\n                    </div>\r\n                    <div className=\"listingDetailTitleAndPriceContainer\">\r\n                        <h3 className=\"listingDetailTitle\">{listing_name}</h3>\r\n                        <h3 className=\"listingDetailPrice\">{`$${listing_price}`}</h3>\r\n                    </div>\r\n                    <div className=\"listingDetailInfoAndContactContainer\">\r\n                        <div className=\"listingDetailContainer\">\r\n                            <div className=\"listingDetailImageContainer\">\r\n                                <img\r\n                                    // src={postAdListingImagePlaceHolder}\r\n                                    src={\r\n                                        !listing_image\r\n                                            ? postAdListingImagePlaceHolder\r\n                                            : listing_image\r\n                                    }\r\n                                    onError={(e: any) => {\r\n                                        e.target.src = postAdListingImagePlaceHolder;\r\n                                    }}\r\n                                    alt=\"listing\"\r\n                                />\r\n                            </div>\r\n                            <div className=\"listingDetailDescriptionContainer\">\r\n                                <div className=\"listingDescriptionTextWrap\">\r\n                                    <h3 className=\"listingDetailPostedOn\">\r\n                                        {`Posted On:  ${moment(\r\n                                            listing_date\r\n                                        ).format(\"YYYY/MM/DD\")}`}\r\n                                    </h3>\r\n                                    <h3 className=\"locationOfPost\">{`${province}, ${city}, ${street}`}</h3>\r\n                                    <h3 className=\"listingDetailDescriptionTitle\">\r\n                                        Description\r\n                                    </h3>\r\n\r\n                                    <p>{listing_description}</p>\r\n                                </div>\r\n                                <div\r\n                                    className={\r\n                                        showMore\r\n                                            ? \"\"\r\n                                            : \"listingDetailDescriptionFade\"\r\n                                    }\r\n                                ></div>\r\n                                <h3\r\n                                    className={\r\n                                        showMore\r\n                                            ? \"listingDetailShowMoreTextHide\"\r\n                                            : \"listingDetailShowMoreText\"\r\n                                    }\r\n                                    onClick={() => setShowMore(true)}\r\n                                >\r\n                                    Show More\r\n                                </h3>\r\n                            </div>\r\n                        </div>\r\n                        <div className=\"listingDetailContactContainer\">\r\n                            <div className=\"listingDetailProfileImageAndNameWrap\">\r\n                                <img src={defaultProfilePic} alt=\"profile\" />\r\n                                <h3>\r\n                                    {`${first_name}\r\n                                    ${last_name}`}\r\n                                </h3>\r\n                            </div>\r\n                            <div className=\"contactAndMemberWrap\">\r\n                                <h3>{`Contact at: ${email}`}</h3>\r\n                                <h3>{`Member Since: ${moment(\r\n                                    member_since\r\n                                ).format(\"YYYY/MM/DD\")} `}</h3>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </React.Fragment>\r\n            );\r\n        }\r\n    };\r\n    return <React.Fragment>{renderListingDetail()}</React.Fragment>;\r\n};\r\n\r\nconst mapStateToProps = (state: StoreState) => {\r\n    return { listingDetail: state.listingInfo.data };\r\n};\r\n\r\nexport default connect(mapStateToProps, { fetchListingDetail })(ListingDetail);\r\n","export default __webpack_public_path__ + \"static/media/emptyBox.f7f6ab23.svg\";","import React, { useEffect, useState } from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\nimport history from \"../browserHistory\";\r\nimport { connect } from \"react-redux\";\r\nimport { StoreState } from \"../reducers\";\r\nimport { ListingDetail as ListingDetailType } from \"../actions\";\r\nimport postAdListingImagePlaceHolder from \"../img/postAdListingImagePlaceHolder.png\";\r\nimport defaultProfilePic from \"../img/defaultProfilePic.jpg\";\r\nimport Loading from \"./Loading\";\r\nimport moment from \"moment\";\r\nimport emptyBox from \"../img/emptyBox.svg\";\r\nimport { fetchUserProfile } from \"../actions\";\r\nimport Listing from \"./Listing\";\r\nimport { Listing as ListingType } from \"../actions\";\r\nimport requireAuth from \"./requireAuth\";\r\ninterface ProfileProps {\r\n    fetchUserProfile(): void;\r\n    profileInfo: any;\r\n}\r\nconst Profile: React.FC<ProfileProps> = (props) => {\r\n    useEffect(() => {\r\n        props.fetchUserProfile();\r\n    }, []);\r\n\r\n    const renderListings = (listings: ListingType[]) => {\r\n        if (listings.length === 0) {\r\n            return (\r\n                <div className=\"userListingContainerEmpty\">\r\n                    <h3 className=\"userListingText\">0 listings</h3>\r\n\r\n                    <img className=\"emptyBox\" src={emptyBox} alt=\"empty box\" />\r\n                </div>\r\n            );\r\n        } else {\r\n            return (\r\n                <div className=\"userListingContainerFilled\">\r\n                    <h3>Your Listings :</h3>\r\n                    {listings.map((listing: ListingType) => {\r\n                        return (\r\n                            <Listing key={listing.listing_id} {...listing} />\r\n                        );\r\n                    })}\r\n                </div>\r\n            );\r\n        }\r\n    };\r\n    const renderListingDetail = () => {\r\n        if (!props.profileInfo) {\r\n            return (\r\n                <div className=\"loadingCenter\">\r\n                    <Loading />\r\n                </div>\r\n            );\r\n        } else if (props.profileInfo.error) {\r\n            return (\r\n                <div className=\"serverErrorContainer\">\r\n                    <h3 className=\"serverErrorText\">\r\n                        {props.profileInfo.error}\r\n                    </h3>\r\n                </div>\r\n            );\r\n        } else {\r\n            const {\r\n                first_name,\r\n                last_name,\r\n                member_since,\r\n                listings,\r\n            } = props.profileInfo;\r\n\r\n            return (\r\n                <React.Fragment>\r\n                    <div className=\"profileInfoAndListingContainer\">\r\n                        <div className=\"profileInfoContainer\">\r\n                            <div className=\"profileBannerContainer\">\r\n                                <div className=\"purpleBanner\"></div>\r\n                                <img src={defaultProfilePic} alt=\"profie\"></img>\r\n                                <div className=\"whiteBanner\"></div>\r\n                            </div>\r\n                            <h3>{` ${first_name} ${last_name}`}</h3>\r\n                            <h3>\r\n                                {`Member Since: ${moment(member_since).format(\r\n                                    \"YYYY/MM/DD\"\r\n                                )}`}\r\n                            </h3>\r\n                        </div>\r\n                        {renderListings(listings)}\r\n                    </div>\r\n                </React.Fragment>\r\n            );\r\n        }\r\n    };\r\n    return <React.Fragment>{renderListingDetail()}</React.Fragment>;\r\n};\r\n\r\nconst mapStateToProps = (state: StoreState) => {\r\n    return { profileInfo: state.profileInfo.data };\r\n};\r\n\r\nexport default connect(mapStateToProps, { fetchUserProfile })(\r\n    requireAuth(Profile)\r\n);\r\n","import { ActionTypes } from \"./types\";\r\nimport axios from \"./axiosConfig\";\r\nimport { Dispatch } from \"redux\";\r\nimport { SERVER_ERROR_MESSAGE } from \"../constants\";\r\nimport { ServerError } from \"./listing\";\r\nexport interface UserProfileListing {\r\n    listing_id: number;\r\n    listing_name: string;\r\n    listing_price: string;\r\n    listing_description: string;\r\n    category_id: number;\r\n    listing_image: string;\r\n    province: string;\r\n    city: string;\r\n    street: string;\r\n    listing_date: Date;\r\n}\r\n\r\nexport interface UserProfile {\r\n    user_id: number;\r\n    first_name: string;\r\n    last_name: string;\r\n    member_since: string;\r\n    listings: UserProfileListing[];\r\n}\r\n\r\nexport interface FetchUserProfileAction {\r\n    type: ActionTypes.FETCH_USER_PROFILE;\r\n    payload: UserProfile;\r\n}\r\n\r\nexport interface FetchUserProfileErrorAction {\r\n    type: ActionTypes.FETCH_USER_PROFILE_ERROR;\r\n    payload: ServerError;\r\n}\r\nexport const fetchUserProfile = () => async (dispatch: Dispatch) => {\r\n    try {\r\n        const response = await axios.get<UserProfile>(`/profile`);\r\n        dispatch<FetchUserProfileAction>({\r\n            type: ActionTypes.FETCH_USER_PROFILE,\r\n            payload: response.data,\r\n        });\r\n    } catch (error) {\r\n        dispatch<FetchUserProfileErrorAction>({\r\n            type: ActionTypes.FETCH_USER_PROFILE_ERROR,\r\n            payload: { error: SERVER_ERROR_MESSAGE },\r\n        });\r\n    }\r\n};\r\n","import React, { useEffect, useState } from \"react\";\r\nimport { Link, useLocation } from \"react-router-dom\";\r\nimport requireAuth from \"./requireAuth\";\r\nimport EditOrPostAdForm, { EditOrPostAdFormValues } from \"./EditOrPostAdForm\";\r\nimport { connect } from \"react-redux\";\r\nimport { StoreState } from \"../reducers\";\r\nimport jwt_decode from \"jwt-decode\";\r\nimport CookieService from \"../CookieService\";\r\nimport {\r\n    deleteListing,\r\n    editListing,\r\n    validateUserAndGetListingDetail,\r\n} from \"../actions/listing\";\r\nimport { ListingDataResponse } from \"../reducers/listingReducer\";\r\nimport Loading from \"./Loading\";\r\n\r\nimport { ListingDetail as ListingDetailType } from \"../actions\";\r\n\r\nexport interface EditAdProps {\r\n    fetchListingDetail(listingId: string): void;\r\n    editListing(\r\n        formValues: any,\r\n        listingId: string,\r\n        cloudinaryPublicId: string | null\r\n    ): void;\r\n    deleteListing(listingId: string, cloudinaryPublicId: string | null): void;\r\n    validateUserAndGetListingDetail(listingId: string): void;\r\n    match: any;\r\n    listingDetail: ListingDetailType;\r\n}\r\n\r\nconst EditAd: React.FC<EditAdProps> = (props) => {\r\n    useEffect(() => {\r\n        //We should validate if the listing actualy belongs to the user\r\n        props.validateUserAndGetListingDetail(props.match.params.id);\r\n    }, []);\r\n\r\n    const renderContent = () => {\r\n        if (!props.listingDetail) {\r\n            return (\r\n                <div className=\"loadingCenter\">\r\n                    <Loading />\r\n                </div>\r\n            );\r\n        }\r\n        // //too lazy to fix ts error, but I get the idea\r\n        //@ts-ignore\r\n        else if (props.listingDetail.error) {\r\n            return (\r\n                <div className=\"serverErrorContainer\">\r\n                    <h3 className=\"serverErrorText\">\r\n                        {\r\n                            //@ts-ignore\r\n                            props.listingDetail.error\r\n                        }\r\n                    </h3>\r\n                </div>\r\n            );\r\n        } else {\r\n            const {\r\n                listing_name,\r\n                listing_description,\r\n                category_name,\r\n                listing_image,\r\n                province,\r\n                city,\r\n                street,\r\n                listing_price,\r\n            } = props.listingDetail;\r\n\r\n            return (\r\n                <div className=\"editAdPageContainer\">\r\n                    <h1>`Edit Your Ad</h1>\r\n                    <EditOrPostAdForm\r\n                        onSubmit={(formValues: any) =>\r\n                            onEditListing(formValues)\r\n                        }\r\n                        onDelete={onDeleteListing}\r\n                        initialValues={{\r\n                            title: listing_name,\r\n                            description: listing_description,\r\n                            category: category_name,\r\n                            province,\r\n                            city,\r\n                            street,\r\n                            price: listing_price,\r\n                        }}\r\n                        cloudinaryImage={listing_image}\r\n                    />\r\n                </div>\r\n            );\r\n        }\r\n    };\r\n\r\n    const onEditListing = async (formValues: EditOrPostAdFormValues) => {\r\n        console.log(\"editAds\", formValues);\r\n\r\n        if (props.listingDetail.listing_image && formValues.image) {\r\n            let cloudinaryPaths = props.listingDetail.listing_image.split(\"/\");\r\n\r\n            let cloudinaryLastPath = cloudinaryPaths.pop();\r\n            //@ts-ignore, catch block will catch it at editListing, dont worry\r\n            let cloudinaryPublicId = cloudinaryLastPath.split(\".\")[0];\r\n            console.log(\"cloudinaryPublicId\", cloudinaryPublicId);\r\n            props.editListing(\r\n                formValues,\r\n                props.match.params.id,\r\n                cloudinaryPublicId\r\n            );\r\n        } else {\r\n            //If listing does not have initial cloudinary image link (because they made a listing without a picture beforehand\r\n            //or they removed their picture and want to edit their listing picture again)\r\n            //Upload cloudinary image\r\n            props.editListing(formValues, props.match.params.id, null);\r\n        }\r\n    };\r\n\r\n    const onDeleteListing = () => {\r\n        if (props.listingDetail.listing_image) {\r\n            let cloudinaryPaths = props.listingDetail.listing_image.split(\"/\");\r\n            let cloudinaryLastPath = cloudinaryPaths.pop();\r\n            //@ts-ignore\r\n            let cloudinaryPublicId = cloudinaryLastPath.split(\".\")[0];\r\n            props.deleteListing(props.match.params.id, cloudinaryPublicId);\r\n        } else {\r\n            props.deleteListing(props.match.params.id, null);\r\n        }\r\n    };\r\n\r\n    return renderContent();\r\n};\r\n\r\nconst mapStateToProps = (state: StoreState) => {\r\n    return {\r\n        listingDetail: state.listingInfo.data,\r\n    };\r\n};\r\n\r\nexport default connect(mapStateToProps, {\r\n    validateUserAndGetListingDetail,\r\n    deleteListing,\r\n    editListing,\r\n})(requireAuth(EditAd));\r\n","import React from \"react\";\r\nconst NotFound = () => (\r\n    <div className=\"serverErrorContainer\">\r\n        <h3>404 - Not Found!</h3>\r\n    </div>\r\n);\r\n\r\nexport default NotFound;\r\n","import React from \"react\";\r\nimport { Route, Switch } from \"react-router-dom\";\r\nimport Header from \"./Header\";\r\nimport Register from \"./Register\";\r\nimport SignIn from \"./SignIn\";\r\nimport PostAd from \"./PostAd\";\r\nimport Listings from \"./Listings\";\r\nimport ListingDetail from \"./ListingDetail\";\r\nimport Profile from \"./Profile\";\r\nimport EditAd from \"./EditAd\";\r\nimport NotFound from \"./NotFound\";\r\nconst Routes: React.FC<{}> = () => {\r\n    return (\r\n        <React.Fragment>\r\n            <Header />\r\n            <Switch>\r\n                <Route path=\"/\" exact component={Register} />\r\n                <Route path=\"/signin\" exact component={SignIn} />\r\n                <Route path=\"/post-ad\" exact component={PostAd} />\r\n                <Route path=\"/listings/:page\" exact component={Listings} />\r\n                <Route path=\"/listing/:id\" exact component={ListingDetail} />\r\n                <Route path=\"/profile\" exact component={Profile} />\r\n                <Route path=\"/listing/:id/edit\" exact component={EditAd} />\r\n                <Route component={NotFound} />\r\n            </Switch>\r\n        </React.Fragment>\r\n    );\r\n};\r\n\r\nexport default Routes;\r\n","import React from \"react\";\nimport { Router } from \"react-router-dom\";\nimport history from \"../browserHistory\";\nimport Routes from \"./Routes\";\n\nconst App: React.FC<{}> = () => {\n    history.listen((_) => {\n        window.scrollTo(0, 0);\n    });\n    return (\n        <Router history={history}>\n            <Routes />\n        </Router>\n    );\n};\n\nexport default App;\n","import React from \"react\";\r\nimport ReactDOM from \"react-dom\";\r\nimport App from \"./components/App\";\r\nimport \"./css/main.css\";\r\nimport Root from \"./Root\";\r\nReactDOM.render(\r\n    <React.StrictMode>\r\n        <Root>\r\n            <App />\r\n        </Root>\r\n    </React.StrictMode>,\r\n    document.getElementById(\"root\")\r\n);\r\n"],"sourceRoot":""}