(this.webpackJsonpkijiji=this.webpackJsonpkijiji||[]).push([[0],{308:function(e,t,n){},309:function(e,t,n){"use strict";n.r(t);var a,A=n(0),i=n(1),r=n.n(i),c=n(36),s=n.n(c),o=n(311),g=n(22),l=Object(g.a)(),C=n(8);!function(e){e[e.AUTH_USER=0]="AUTH_USER",e[e.AUTH_ERROR=1]="AUTH_ERROR",e[e.FETCH_CATEGORIES_FOR_LISTING=2]="FETCH_CATEGORIES_FOR_LISTING",e[e.FETCH_CATEGORIES_FOR_LISTING_ERROR=3]="FETCH_CATEGORIES_FOR_LISTING_ERROR",e[e.UPLOAD_IMAGE_TO_CLOUDINARY=4]="UPLOAD_IMAGE_TO_CLOUDINARY",e[e.CREATE_LISTING=5]="CREATE_LISTING",e[e.LISTING_ERROR=6]="LISTING_ERROR",e[e.FETCH_LISTINGS=7]="FETCH_LISTINGS",e[e.FETCH_LISTING_DETAIL=8]="FETCH_LISTING_DETAIL",e[e.FETCH_USER_PROFILE=9]="FETCH_USER_PROFILE",e[e.FETCH_USER_PROFILE_ERROR=10]="FETCH_USER_PROFILE_ERROR",e[e.EDIT_LISTING=11]="EDIT_LISTING",e[e.DELETE_LISTING=12]="DELETE_LISTING"}(a||(a={}));var I=n(6),u=n.n(I),d=n(10),h=n(125),j=n.n(h),b=n(47),m=n.n(b),p="ACCESS_TOKEN",O=function(){var e;return{getService:function(){return e||(e=this)},setToken:function(e){m.a.set(p,e.ACCESS_TOKEN)},getAccessToken:function(){return m.a.get(p)}}}(),f=n(12),v=n(122),x=n(4),E={authenticated:"",errorMessage:""},w=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:E,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case a.AUTH_USER:return Object(x.a)(Object(x.a)({},e),{},{authenticated:t.payload.token,errorMessage:""});case a.AUTH_ERROR:return Object(x.a)(Object(x.a)({},e),{},{authenticated:"",errorMessage:t.payload});default:return e}},y=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case a.FETCH_CATEGORIES_FOR_LISTING:case a.FETCH_CATEGORIES_FOR_LISTING_ERROR:return t.payload;default:return e}},N=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case a.CREATE_LISTING:case a.LISTING_ERROR:case a.FETCH_LISTINGS:case a.FETCH_LISTING_DETAIL:case a.EDIT_LISTING:case a.DELETE_LISTING:return Object(x.a)(Object(x.a)({},e),{},{data:t.payload});default:return e}},S=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case a.FETCH_USER_PROFILE:case a.FETCH_USER_PROFILE_ERROR:return Object(x.a)(Object(x.a)({},e),{},{data:t.payload});default:return e}},B=Object(f.combineReducers)({authStatus:w,categories:y,listingInfo:N,profileInfo:S,form:v.a}),L=n(127),T=n(128),R=Object(f.createStore)(B,{authStatus:{authenticated:m.a.get("ACCESS_TOKEN")}},Object(L.composeWithDevTools)(Object(f.applyMiddleware)(T.a))),D=function(e){e.initialState;var t=e.children;return Object(A.jsx)(C.a,{store:R,children:t})},F=O.getService(),Q=j.a.create({withCredentials:!0,baseURL:"http://localhost:5000/api"});Q.interceptors.request.use((function(e){var t=F.getAccessToken();return t&&(e.headers.Authorization=t),e}),(function(e){Promise.reject(e)})),Q.interceptors.response.use((function(e){return e}),(function(e){var t=e.config;403!==e.response.status||t._retry||(t._retry=!0,Q.post("/token").then((function(e){R.dispatch(G(t.url,t._retry))})).catch((function(e){return Promise.reject(e)})))}));var P=Q,k=function(){return function(){var e=Object(d.a)(u.a.mark((function e(t){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,P.post("/signout");case 3:n=e.sent,t({type:a.AUTH_USER,payload:n.data}),l.push("/"),alert("Logged out succesfully"),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),alert("Log out failed, try again");case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}()},G=function(e,t){return function(){var n=Object(d.a)(u.a.mark((function n(A){var i;return u.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,P.post(e,{});case 3:i=n.sent,A({type:a.AUTH_USER,payload:i.data}),n.next=10;break;case 7:n.prev=7,n.t0=n.catch(0),!0===t&&A(k());case 10:case"end":return n.stop()}}),n,null,[[0,7]])})));return function(e){return n.apply(this,arguments)}}()},H=n(129),M="Uh oh...something went wrong. Check your internet connection and try again.",Y=[{name:"Alberta",abbreviation:"AB"},{name:"British Columbia",abbreviation:"BC"},{name:"Manitoba",abbreviation:"MB"},{name:"New Brunswick",abbreviation:"NB"},{name:"Newfoundland And Labrador",abbreviation:"NL"},{name:"Northwest Territories",abbreviation:"NT"},{name:"Nova Scotia",abbreviation:"NS"},{name:"Nunavut",abbreviation:"NU"},{name:"Ontario",abbreviation:"ON"},{name:"Prince Edward Island",abbreviation:"PE"},{name:"Quebec",abbreviation:"QC"},{name:"Saskatchewan",abbreviation:"SK"},{name:"Yukon Territory",abbreviation:"YT"}],W=[{province:"Alberta",cities:["Airdrie","Grande Prairie","Red Deer","Beaumont","Hanna","St. Albert","Bonnyville","Hinton","Spruce Grove","Brazeau","Irricana","Strathcona County","Breton","Lacombe","Strathmore","Calgary","Leduc","Sylvan Lake","Camrose","Lethbridge","Swan Hills","Canmore","McLennan","Taber","Didzbury","Medicine Hat","Turner Valley","Drayton Valley","Olds","Vermillion","Edmonton","Onoway","Wood Buffalo","Ft. Saskatchewan","Provost"]},{province:"British Columbia",cities:["Burnaby","Lumby","City of Port Moody","Cache Creek","Maple Ridge","Prince George","Castlegar","Merritt","Prince Rupert","Chemainus","Mission","Richmond","Chilliwack","Nanaimo","Saanich","Clearwater","Nelson","Sooke","Colwood","New Westminster","Sparwood","Coquitlam","North Cowichan","Surrey","Cranbrook","Terrace","Dawson Creek","North Vancouver","Tumbler","Delta","Osoyoos","Fernie","Parksville","Vancouver","Invermere","Peace River","Vernon","Kamloops","Penticton","Victoria","Kaslo","Port Alberni","Whistler","Langley","Port Hardy"]},{province:"Manitoba",cities:["Birtle","Flin Flon","Swan River","Brandon","Snow Lake","The Pas","Cranberry Portage","Steinbach","Thompson","Dauphin","Stonewall","Winnipeg"]},{province:"New Brunswick",cities:["Cap-Pele","Miramichi","Saint John","Fredericton","Moncton","Saint Stephen","Grand Bay-Westfield","Oromocto","Shippagan","Grand Falls","Port Elgin","Sussex","Memramcook","Sackville","Tracadie-Sheila"]},{province:"Newfoundland And Labrador",cities:["Argentia","Corner Brook","Paradise","Bishop's Falls","Labrador City","Portaux Basques","Botwood","Mount Pearl","St. John's","Brigus"]},{province:"Northwest Territories",cities:["Town of Hay River","Town of Inuvik","Yellowknife"]},{province:"Nova Scotia",cities:["Amherst","Hants County","Pictou","Annapolis","Inverness County","Pictou County","Argyle","Kentville","Queens","Baddeck","County of Kings","Richmond","Bridgewater","Lunenburg","Shelburne","Cape Breton","Lunenburg County","Stellarton","Chester","Mahone Bay","Truro","Cumberland County","New Glasgow","Windsor","East Hants","New Minas","Yarmouth","Halifax","Parrsboro"]},{province:"Nunavut",cities:["Iqaluit"]},{province:"Ontario",cities:["Ajax","Halton","Peterborough","Atikokan","Halton Hills","Pickering","Barrie","Hamilton","Port Bruce","Belleville","Hamilton-Wentworth","Port Burwell","Blandford-Blenheim","Hearst","Port Colborne","Blind River","Huntsville","Port Hope","Brampton","Ingersoll","Prince Edward","Brant","James","Quinte West","Brantford","Kanata","Renfrew","Brock","Kincardine","Richmond Hill","Brockville","King","Sarnia","Burlington","Kingston","Sault Ste. Marie","Caledon","Kirkland Lake","Scarborough","Cambridge","Kitchener","Scugog","Chatham-Kent","Larder Lake","Souix Lookout CoC Sioux Lookout","Chesterville","Leamington","Smiths Falls","Clarington","Lennox-Addington","South-West Oxford","Cobourg","Lincoln","St. Catharines","Cochrane","Lindsay","St. Thomas","Collingwood","London","Stoney Creek","Cornwall","Loyalist Township","Stratford","Cumberland","Markham","Sudbury","Deep River","Metro Toronto","Temagami","Dundas","Merrickville","Thorold","Durham","Milton","Thunder Bay","Dymond","Nepean","Tillsonburg","Ear Falls","Newmarket","Timmins","East Gwillimbury","Niagara","Toronto","East Zorra-Tavistock","Niagara Falls","Uxbridge","Elgin","Niagara-on-the-Lake","Vaughan","Elliot Lake","North Bay","Wainfleet","Flamborough","North Dorchester","Wasaga Beach","Fort Erie","North Dumfries","Waterloo","Fort Frances","North York","Waterloo","Gananoque","Norwich","Welland","Georgina","Oakville","Wellesley","Glanbrook","Orangeville","West Carleton","Gloucester","Orillia","West Lincoln","Goulbourn","Osgoode","Whitby","Gravenhurst","Oshawa","Wilmot","Grimsby","Ottawa","Windsor","Guelph","Ottawa-Carleton","Woolwich","Haldimand-Norfork","Owen Sound","York"]},{province:"Prince Edward Island",cities:["Alberton","Montague","Stratford","Charlottetown","Souris","Summerside","Cornwall"]},{province:"Quebec",cities:["Alma","Fleurimont","Longueuil","Amos","Gaspe","Marieville","Anjou","Gatineau","Mount Royal","Aylmer","Hull","Montreal","Beauport","Joliette","Montreal Region","Bromptonville","Jonquiere","Montreal-Est","Brosssard","Lachine","Quebec","Chateauguay","Lasalle","Saint-Leonard","Chicoutimi","Laurentides","Sherbrooke","Coaticook","LaSalle","Sorel","Coaticook","Laval","Thetford Mines","Dorval","Lennoxville","Victoriaville","Drummondville","Levis"]},{province:"Saskatchewan",cities:["Avonlea","Melfort","Swift Current","Colonsay","Nipawin","Tisdale","Craik","Prince Albert","Unity","Creighton","Regina","Weyburn","Eastend","Saskatoon","Wynyard","Esterhazy","Shell Lake","Yorkton","Gravelbourg"]},{province:"Yukon Territory",cities:["Carcross","Whitehorse"]}],U=function(){return function(){var e=Object(d.a)(u.a.mark((function e(t){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,P.get("/categories-for-listing");case 3:n=e.sent,t({type:a.FETCH_CATEGORIES_FOR_LISTING,payload:n.data||[]}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),t({type:a.FETCH_CATEGORIES_FOR_LISTING_ERROR,payload:[M]});case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}()},J=n(13),z=n(49),V=n(50),X=function(e){return s.a.createPortal(Object(A.jsx)("div",{onClick:e.onDismiss,className:"modal",children:Object(A.jsxs)("div",{onClick:function(e){e.stopPropagation()},className:"modalBox",children:[Object(A.jsx)("h2",{children:e.title}),e.content]})}),document.querySelector("#modal"))},Z=n(120),K=n(123),q=n(121),_=n(130),$=function(){return Object(A.jsx)(_.StageSpinner,{size:150,color:"grey",loading:!0})},ee=Object(K.a)("searchFilterForm"),te=Object(C.b)((function(e){return{categories:e.categories,provinceValue:ee(e,"province")}}),{fetchCategoriesForListing:U})(Object(q.a)({form:"searchFilterForm",validate:function(e){return{}}})((function(e){var t=function(e){e.name;var t=e.input,n=(e.label,e.meta,e.placeHolder,e.optionValues);return Object(A.jsxs)("select",Object(x.a)(Object(x.a)({className:"modalFilterCategoriesDropdown",autoComplete:"off"},t),{},{children:[Object(A.jsx)("option",{value:""}),n.map((function(e){return Object(A.jsx)("option",{value:e,children:e},e)}))]}))},n=function(t,n){t.province||(t.city=""),e.onSubmit(t)};Object(i.useEffect)((function(){e.fetchCategoriesForListing()}),[]);return Object(A.jsx)(r.a.Fragment,{children:0===e.categories.length?Object(A.jsx)("div",{className:"centerLoadingForModal",children:Object(A.jsx)($,{})}):Object(A.jsxs)("form",{onSubmit:e.handleSubmit(n),children:[Object(A.jsx)("h3",{children:"Categories"}),Object(A.jsx)(Z.a,{type:"text",name:"category",label:"category",component:t,optionValues:e.categories}),Object(A.jsxs)("div",{className:"modalFilterLocationWrap",children:[Object(A.jsxs)("div",{className:"modalLocationDropdownWrap",children:[Object(A.jsx)("h3",{children:"Province"}),Object(A.jsx)(Z.a,{name:"province",label:"province",type:"text",component:t,optionValues:Y.map((function(e){return e.name}))})]}),Object(A.jsxs)("div",{className:"modalLocationDropdownWrap",children:[Object(A.jsx)("h3",{children:"City"}),Object(A.jsx)(Z.a,{name:"city",label:"city",type:"text",component:t,optionValues:e.provinceValue?W.filter((function(t){return t.province===e.provinceValue}))[0].cities:[]})]})]}),Object(A.jsx)("button",{className:"modalAcceptButton",children:"Accept"}),Object(A.jsx)("button",{type:"button",className:"modalCancelButton",onClick:e.onCancel,children:"Cancel"})]})})}))),ne=n(133),ae=n.n(ne),Ae=function(){var e=Object(i.useState)(!1),t=Object(J.a)(e,2),n=t[0],a=t[1],r=Object(i.useState)(null),c=Object(J.a)(r,2),s=c[0],g=c[1],C=Object(i.useState)(""),I=Object(J.a)(C,2),h=I[0],j=I[1],b=Object(i.useState)(!0),m=Object(J.a)(b,2),p=m[0],O=m[1],f=function(){var e=Object(d.a)(u.a.mark((function e(t){var n,A,i;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log("onsubmitfilter",t),(t.category||""===t.category)&&y(t.category),(t.province||""===t.province)&&L(t.province),(t.city||""===t.city)&&F(t.city),n=Object.keys(t),A="",n.map((function(e){""!==t[e]&&(A+="".concat(e,"=").concat(t[e],"&"))})),i=A.slice(0,-1),g(i),a(!1);case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),v=function(){a(!1)},x=Object(i.useState)(null),E=Object(J.a)(x,2),w=E[0],y=E[1],N=Object(i.useState)(null),S=Object(J.a)(N,2),B=S[0],L=S[1],T=Object(i.useState)(null),R=Object(J.a)(T,2),D=R[0],F=R[1],Q=Object(o.d)().search,P=ae.a.parse(Q);Object(i.useEffect)((function(){P.category&&y(P.category),P.province&&L(P.province),P.city&&F(P.city),P.search&&j(P.search)}),[]);var k=function(){console.log("renderInitialVal",B);var e={};return p?(Object.keys(P).map((function(t){"category"===t?e.category=w:"province"===t?e.province=B:"city"===t&&(e.city=D)})),O(!1)):((w||""===w)&&(e.category=w),(B||""===B)&&(e.province=B),(D||""===D)&&(e.city=D)),e},G=function(){s&&""!==h?l.push({pathname:"/listings/1",search:"?search=".concat(h,"&").concat(s)}):s?l.push({pathname:"/listings/1",search:"?".concat(s)}):h?l.push({pathname:"/listings/1",search:"?search=".concat(h)}):l.push("/listings/1")};return Object(A.jsxs)("form",{className:"searchBarForm",children:[Object(A.jsx)(z.a,{"data-testid":"filterIcon",className:"searchBarIcons",icon:V.c,onClick:function(){return a(!0)}}),Object(A.jsx)("input",{"data-testid":"searchBarInput",className:"searchBarInput",type:"search",placeholder:"Search...",value:h,name:"search",onChange:function(e){return j(e.target.value.trim())},onKeyDown:function(e){"Enter"===e.key&&(e.preventDefault(),G())},autoComplete:"off"}),Object(A.jsx)(z.a,{className:"searchBarIcons","data-testid":"searchIcon",icon:V.b,onClick:function(){G()}}),n?Object(A.jsx)(X,{title:"Filter Your Results",content:Object(A.jsx)(te,{onSubmit:f,onCancel:v,initialValues:k()}),onDismiss:v}):null]})},ie=function(){var e=window;return{width:e.innerWidth,height:e.innerHeight}},re=function(){var e=Object(i.useState)(ie()),t=Object(J.a)(e,2),n=t[0],a=t[1];return Object(i.useEffect)((function(){function e(){a(ie())}return window.addEventListener("resize",e),function(){return window.removeEventListener("resize",e)}}),[]),n},ce=Object(C.b)((function(e){return{authStatus:e.authStatus.authenticated}}),{signOut:k})((function(e){var t=re().width;return Object(A.jsx)("nav",{children:Object(A.jsxs)("div",{className:"headerInfoWrap",children:[Object(A.jsx)("img",{className:"logo",src:"data:image/png;base64,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",alt:"logo","data-testid":"kijijiLogo",onClick:function(){return l.push("/listings/1")}}),Object(A.jsx)("div",{className:t>768?"displaySearchbar":"hideSearchbar",children:Object(A.jsx)(Ae,{})}),Object(A.jsxs)("div",{className:"headerProfileAndPostWrap",children:[Object(A.jsx)("h1",{"data-testid":"headerRegisterText",className:e.authStatus?"navAuthStatusHide":"navAuthStatus",onClick:function(){l.push("/signup")},children:"Register"}),Object(A.jsx)("h1",{"data-testid":"headerSignInText",className:e.authStatus?"navAuthStatusHide":"navAuthStatus",onClick:function(){l.push("/signin")},children:"Sign in"}),Object(A.jsx)("h1",{className:e.authStatus?"navAuthStatus":"navAuthStatusHide",onClick:function(){e.signOut()},children:"Sign Out"}),Object(A.jsx)("h1",{className:e.authStatus?"profileText":"navAuthStatusHide",onClick:function(){l.push("/profile")},"data-testid":"headerProfile",children:"Profile"}),Object(A.jsx)("button",{"data-testid":"postAdButtotn",onClick:function(){e.authStatus?l.push("/post-ad"):l.push("/signin")},className:"postAdButton",children:"Post Ad"})]}),Object(A.jsx)("div",{className:t<768?"displaySearchbar":"hideSearchbar",children:Object(A.jsx)(Ae,{})})]})})})),se=function(e){var t=e.error;if(e.touched&&t)return Object(A.jsx)("div",{className:"errorText",children:t})},oe=function(e){var t=e.input,n=e.label,a=e.meta;e.placeHolder;return Object(A.jsxs)("div",{children:[Object(A.jsx)("input",Object(x.a)(Object(x.a)({"data-testid":n,className:"createAuthInputs"},t),{},{autoComplete:"off"})),se(a)]})},ge=function(e){var t=e.input,n=e.label,a=e.meta;e.placeHolder;return Object(A.jsxs)("div",{children:[Object(A.jsx)("input",Object(x.a)(Object(x.a)({"data-testid":n,className:"createAuthInputs",type:"password"},t),{},{autoComplete:"off"})),se(a)]})},le=Object(C.b)()(Object(q.a)({form:"registerForm",validate:function(e){var t={};return e.email||(t.email="You must enter an email"),e.firstName||(t.firstName="You must enter your first name"),e.lastName||(t.lastName="You must enter your last name"),e.password||(t.password="You must enter a password"),t}})((function(e){return Object(A.jsx)(r.a.Fragment,{children:Object(A.jsxs)("form",{className:"authForm","data-testid":"registerForm",onSubmit:e.handleSubmit((function(t,n){e.onSubmit(t)})),children:[Object(A.jsx)("h1",{children:"Register"}),Object(A.jsxs)("div",{className:"authFieldSection",children:[Object(A.jsxs)("div",{className:"authFormFieldTitleWrap",children:[Object(A.jsx)("h1",{children:"Email"}),Object(A.jsx)("h3",{className:"authFormFieldTitleEmailInUse",children:e.authStatus})]}),Object(A.jsx)(Z.a,{name:"email",label:"email",type:"text",component:oe})]}),Object(A.jsxs)("div",{className:"authFieldSection",children:[Object(A.jsxs)("div",{className:"authFormFieldTitleWrap",children:[Object(A.jsx)("h1",{children:"First Name"}),Object(A.jsx)("h3",{className:"authFormFieldTitleEmailInUse",children:e.authStatus})]}),Object(A.jsx)(Z.a,{name:"firstName",label:"firstName",type:"text",component:oe})]}),Object(A.jsxs)("div",{className:"authFieldSection",children:[Object(A.jsxs)("div",{className:"authFormFieldTitleWrap",children:[Object(A.jsx)("h1",{children:"Last Name"}),Object(A.jsx)("h3",{className:"authFormFieldTitleEmailInUse",children:e.authStatus})]}),Object(A.jsx)(Z.a,{name:"lastName",label:"lastName",type:"text",component:oe})]}),Object(A.jsxs)("div",{className:"authFieldSection",children:[Object(A.jsxs)("div",{className:"authFormFieldTitleWrap",children:[Object(A.jsx)("h1",{children:"Password"}),Object(A.jsx)("h3",{className:"authFormFieldTitleEmailInUse",children:e.authStatus})]}),Object(A.jsx)(Z.a,{name:"password",label:"password",type:"password",component:ge})]}),Object(A.jsx)("button",{"data-testid":"registerButton",className:"authButton",children:"Register"})]})})}))),Ce=Object(C.b)((function(e){return{authStatus:e.authStatus.authenticated}}),{signUp:function(e){return function(){var t=Object(d.a)(u.a.mark((function t(n){var A;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,P.post("/signup",e);case 3:A=t.sent,n({type:a.AUTH_USER,payload:A.data}),l.push("/listings/1"),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),n({type:a.AUTH_ERROR,payload:"- Email is in use"});case 11:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(e){return t.apply(this,arguments)}}()}})((function(e){var t=function(){var t=Object(d.a)(u.a.mark((function t(n){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.signUp(n);case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return Object(i.useEffect)((function(){e.authStatus&&l.push("/listings/1")}),[]),Object(A.jsxs)("div",{className:"registerContainer",children:[Object(A.jsx)("div",{className:"registerFormWrap",children:Object(A.jsx)(le,{onSubmit:function(e){return t(e)}})}),Object(A.jsxs)("div",{className:"registerMiscWrap",children:[Object(A.jsxs)("div",{className:"alreadyRegisteredContainer",children:[Object(A.jsx)("h1",{children:"Already Registered?"}),Object(A.jsx)("p",{children:"Sign in to post your ad"}),Object(A.jsx)("button",{"data-testid":"alreadyRegisteredButton",className:"alreadyRegisteredButton",onClick:function(){return l.push("/signin")},children:"Sign in"})]}),Object(A.jsxs)("div",{className:"whyRegisterContainer",children:[Object(A.jsx)("h1",{children:"Why Register?"}),Object(A.jsx)("p",{children:"To enhance your Kijiji experience and help you stay safe and secure, you now need to register to:"}),Object(A.jsxs)("ul",{children:[Object(A.jsx)("li",{children:"Post, edit and manage ads"}),Object(A.jsx)("li",{children:"Access saved ads in your Favourites from all of your devices"}),Object(A.jsx)("li",{children:"Easily promote multiple ads to gain more visibility and view order history"}),Object(A.jsx)("li",{children:"Reserve your own nickname"}),Object(A.jsx)("li",{children:"And much more!"})]})]})]})]})})),Ie=function(e){var t=e.error;if(e.touched&&t)return Object(A.jsx)("div",{className:"errorText",children:t})},ue=function(e){var t=e.input,n=e.label,a=e.meta;e.placeHolder;return Object(A.jsxs)("div",{children:[Object(A.jsx)("input",Object(x.a)(Object(x.a)({className:"createAuthInputs","data-testid":n},t),{},{autoComplete:"off"})),Ie(a)]})},de=function(e){var t=e.input,n=e.label,a=e.meta;e.placeHolder;return Object(A.jsxs)("div",{children:[Object(A.jsx)("input",Object(x.a)(Object(x.a)({className:"createAuthInputs","data-testid":n,type:"password"},t),{},{autoComplete:"off"})),Ie(a)]})},he=Object(C.b)((function(e){return{authStatus:e.authStatus.errorMessage}}),{})(Object(q.a)({form:"signInForm",validate:function(e){var t={};return e.email||(t.email="You must enter an email"),e.password||(t.password="You must enter a password"),t}})((function(e){return Object(A.jsx)(r.a.Fragment,{children:Object(A.jsxs)("form",{className:"authForm","data-testid":"signInForm",onSubmit:e.handleSubmit((function(t,n){e.onSubmit(t)})),children:[Object(A.jsx)("h1",{children:"Sign In"}),Object(A.jsxs)("div",{className:"authFieldSection",children:[Object(A.jsxs)("div",{className:"authFormFieldTitleWrap",children:[Object(A.jsx)("h1",{children:"Email"}),Object(A.jsx)("h3",{className:"authFormFieldTitleEmailInUse",children:e.authStatus})]}),Object(A.jsx)(Z.a,{name:"email",label:"email",type:"text",component:ue})]}),Object(A.jsxs)("div",{className:"authFieldSection",children:[Object(A.jsxs)("div",{className:"authFormFieldTitleWrap",children:[Object(A.jsx)("h1",{children:"Password"}),Object(A.jsx)("h3",{className:"authFormFieldTitleEmailInUse",children:e.authStatus})]}),Object(A.jsx)(Z.a,{name:"password",label:"password",type:"password",component:de})]}),Object(A.jsx)("button",{className:"authButton","data-testid":"signInButton",children:"Sign In"})]})})}))),je=Object(C.b)((function(e){return{authStatus:e.authStatus.authenticated}}),{signIn:function(e){return function(){var t=Object(d.a)(u.a.mark((function t(n){var A;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,P.post("/signin",e);case 3:A=t.sent,n({type:a.AUTH_USER,payload:A.data}),l.push("/listings/1"),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),n({type:a.AUTH_ERROR,payload:"- Invalid login credentials"});case 11:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(e){return t.apply(this,arguments)}}()}})((function(e){var t=function(){var t=Object(d.a)(u.a.mark((function t(n){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.signIn(n);case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return Object(i.useEffect)((function(){e.authStatus&&l.push("/listings/1")}),[]),Object(A.jsxs)("div",{className:"signInContainer",children:[Object(A.jsx)("div",{className:"signInFormWrap",children:Object(A.jsx)(he,{onSubmit:function(e){return t(e)}})}),Object(A.jsxs)("div",{className:"signInMiscWrap",children:[Object(A.jsxs)("div",{className:"registerNowContainer",children:[Object(A.jsx)("h1",{children:"Not registered yet?"}),Object(A.jsx)("p",{children:"Register now to post, edit, and manage ads. It\u2019s quick, easy, and free!"}),Object(A.jsx)("button",{"data-testid":"registerNowButton",className:"registerNowButton",onClick:function(){return l.push("/")},children:"Register Now"})]}),Object(A.jsxs)("div",{children:[Object(A.jsx)("h1",{children:"Protect Your Account"}),Object(A.jsx)("p",{children:"Ensure that whenever you sign in to Kijiji, the web address in your browser starts with https://www.kijiji.ca/"})]})]})]})})),be=n(134),me=n(135),pe=n(138),Oe=n(137),fe=function(e){var t=function(t){Object(pe.a)(a,t);var n=Object(Oe.a)(a);function a(){return Object(be.a)(this,a),n.apply(this,arguments)}return Object(me.a)(a,[{key:"componentDidMount",value:function(){this.shouldNavigateAway()}},{key:"componentDidUpdate",value:function(){this.shouldNavigateAway()}},{key:"shouldNavigateAway",value:function(){this.props.authStatus?this.props.validateToken(l.location.pathname,!1):this.props.history.push("/")}},{key:"render",value:function(){return Object(A.jsx)(e,Object(x.a)({},this.props))}}]),a}(i.Component);return Object(C.b)((function(e){return{authStatus:e.authStatus.authenticated}}),{validateToken:G})(t)},ve=n(31),xe="data:image/png;base64,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",Ee=n(136),we=n.n(Ee),ye=function(){return Object(A.jsx)(we.a,{color:"grey",loading:!0})},Ne=function(e){var t=e.error;if(e.touched&&t)return Object(A.jsx)("div",{className:"errorText",children:t})},Se=function(e){var t=e.input,n=(e.label,e.meta);e.placeHolder;return Object(A.jsxs)("div",{children:[Object(A.jsx)("input",Object(x.a)(Object(x.a)({className:"createPostAdInputs"},t),{},{autoComplete:"off",autoFocus:!0})),Ne(n)]})},Be=function(e){var t=e.input,n=(e.label,e.meta);e.placeHolder;return Object(A.jsxs)("div",{children:[Object(A.jsx)("input",Object(x.a)(Object(x.a)({className:"createPostAdInputs"},t),{},{autoComplete:"off"})),Ne(n)]})},Le=function(e){var t=e.input,n=(e.label,e.meta);e.placeHolder;return Object(A.jsxs)("div",{className:"postAdTextAreaWrap",children:[Object(A.jsx)("textarea",Object(x.a)(Object(x.a)({className:"createPostAdTextArea"},t),{},{autoComplete:"off"})),Ne(n)]})},Te=function(e){var t=e.input,n=(e.label,e.meta),a=(e.placeHolder,e.optionValues);return Object(A.jsxs)("div",{children:[Object(A.jsxs)("select",Object(x.a)(Object(x.a)({className:"createPostAdDropDown"},t),{},{autoComplete:"off",children:[Object(A.jsx)("option",{}),a.map((function(e){return Object(A.jsx)("option",{value:e,children:e},e)}))]})),Ne(n)]})},Re=function(e){if(e)return isNaN(parseInt(e[e.length-1],10))?e.slice(0,-1):e.replace(/,/g,"").replace(/\B(?=(\d{3})+(?!\d))/g,",")},De=function(e){return e.replace(/,/g,"")},Fe=function(e,t){return Object(A.jsxs)("div",{className:"postAdFieldSection",children:[Object(A.jsx)("div",{className:"postAdFieldTitleWrap",children:Object(A.jsx)("h1",{children:e})}),t]})},Qe=Object(K.a)("postAdForm"),Pe=Object(C.b)((function(e){return{categories:e.categories,provinceValue:Qe(e,"province")}}),{fetchCategoriesForListing:U})(Object(q.a)({form:"postAdForm",validate:function(e){var t={};return e.title||(t.title="You must enter a title"),e.description||(t.description="You must enter a description"),e.category||(t.category="You must enter a category"),e.province||(t.province="You must enter a province"),e.city||(t.city="You must enter a city"),e.street||(t.street="You must enter a street"),e.price||(t.price="You must enter a price"),t},enableReinitialize:!0})((function(e){var t=Object(o.d)(),n=Object(i.useRef)(null),a=Object(i.useState)(null),c=Object(J.a)(a,2),s=c[0],g=c[1],l=Object(i.useState)(null),C=Object(J.a)(l,2),I=C[0],u=C[1];Object(i.useEffect)((function(){e.fetchCategoriesForListing(),e.cloudinaryImage&&u(e.cloudinaryImage)}),[]);var d=function(t,n){e.onSubmit(t)},h=function(e){var t=e.input;e.label,e.meta,e.placeHolder,e.optionValues;return Object(A.jsx)("input",{type:"file",accept:"image/*",style:{display:"none"},ref:n,onChange:function(){t.onChange.apply(t,arguments)}})};return Object(A.jsx)(r.a.Fragment,{children:0===e.categories.length?Object(A.jsx)("div",{className:"loadingCenter",children:Object(A.jsx)(ye,{})}):e.categories[0]===M?Object(A.jsx)("div",{className:"serverErrorContainer",children:Object(A.jsx)("h3",{className:"serverErrorText",children:e.categories[0]})}):Object(A.jsxs)("form",{className:"postAdForm",onSubmit:e.handleSubmit(d),children:[Fe("Ad Title",Object(A.jsx)(Z.a,{name:"title",type:"text",component:Se})),Fe("Description",Object(A.jsx)(Z.a,{name:"description",type:"text",component:Le})),Fe("Category",Object(A.jsx)(Z.a,{name:"category",component:Te,optionValues:e.categories})),Fe("Add a photo for your ad",Object(A.jsxs)(r.a.Fragment,{children:[Object(A.jsx)(Z.a,{name:"image",type:"file",component:h,value:s,ref:n,withRef:!0,onChange:function(e){u(null),g(URL.createObjectURL(e.target.files[0]))}}),Object(A.jsxs)("div",{className:"imageUploadWrapper",children:[Object(A.jsx)("input",{type:"button",value:s||I?"":"Choose Files!",className:"postAdChooseListingImage",onClick:function(){n.current.click()},style:I?{backgroundImage:"url(".concat(I,"), url(").concat(xe,")"),backgroundPosition:"center",backgroundSize:"cover",backgroundColor:"white"}:!I&&s?{backgroundImage:"url(".concat(s,"), url(").concat(xe,")"),backgroundPosition:"center",backgroundSize:"cover",backgroundColor:"white"}:{backgroundImage:"url(".concat(xe,")")}}),(s||e.cloudinaryImage)&&Object(A.jsx)("h3",{className:"removeUploadedImage",onClick:function(){g(null),u(null),e.dispatch(Object(ve.a)("postAdForm","image",null))},children:"Remove"})]})]})),Fe("Province",Object(A.jsx)(Z.a,{name:"province",type:"text",component:Te,optionValues:Y.map((function(e){return e.name}))})),Fe("City",Object(A.jsx)(Z.a,{name:"city",type:"text",component:Te,optionValues:e.provinceValue?W.filter((function(t){return t.province===e.provinceValue}))[0].cities:[]})),Fe("Street",Object(A.jsx)(Z.a,{name:"street",type:"text",component:Be})),Fe("Price ($ CAD)",Object(A.jsx)(Z.a,{name:"price",type:"text",component:Be,format:Re,normalize:De})),Object(A.jsx)("button",{className:"postAdFormSubmit",children:"/post-ad"===t.pathname?"Post Your Ad":"Edit Your Ad"}),"/post-ad"===t.pathname?"":Object(A.jsx)("button",{className:"deleteAd",type:"button",onClick:e.onDelete,children:"Delete Ad"})]})})}))),ke=Object(C.b)((function(e){return{listingInfo:e.listingInfo}}),{createListing:function(e){return function(){var t=Object(d.a)(u.a.mark((function t(n){var A,i,r,c,s,o;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,A=O.getService(),i=Object(H.a)(A.getAccessToken()),r={},!e.image){t.next=12;break}return(c=new FormData).append("image",e.image[0]),t.next=9,P.post("/upload-image",c,{headers:{"Content-Type":"multipart/form-data"}});case 9:s=t.sent,n({type:a.UPLOAD_IMAGE_TO_CLOUDINARY,payload:s.data}),r=s.data;case 12:return t.next=14,P.post("/create-listing",Object(x.a)(Object(x.a)(Object(x.a)({},r),e),i));case 14:o=t.sent,n({type:a.CREATE_LISTING,payload:o.data}),l.push("/profile"),t.next=23;break;case 19:t.prev=19,t.t0=t.catch(0),alert(M),n({type:a.LISTING_ERROR,payload:{error:M}});case 23:case"end":return t.stop()}}),t,null,[[0,19]])})));return function(e){return t.apply(this,arguments)}}()}})(fe((function(e){var t=function(){var t=Object(d.a)(u.a.mark((function t(n){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.createListing(n);case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return Object(A.jsxs)("div",{className:"postAdPageContainer",children:[Object(A.jsx)("h1",{children:"Post Your Ad, it's fast and easy"}),Object(A.jsx)(Pe,{onSubmit:t})]})}))),Ge=n(33),He=n.n(Ge),Me=Object(C.b)((function(e){return{}}),{})((function(e){var t=e.listing_id,n=e.listing_name,a=e.listing_image,i=e.listing_price,r=e.listing_description,c=e.listing_date,s=e.province,g=e.city,C=e.street,I=Object(o.d)();return Object(A.jsxs)("div",{className:"listingPreviewContainer",onClick:function(){l.push("/listing/".concat(t))},children:["/profile"===I.pathname?Object(A.jsx)(z.a,{className:"pencilIcon",icon:V.a,onClick:function(e){e.stopPropagation(),l.push("/listing/".concat(t,"/edit"))}}):"",Object(A.jsx)("div",{className:"listingPreviewImageContainer",children:Object(A.jsx)("img",{src:a||xe,onError:function(e){e.target.src=xe},alt:"listing"})}),Object(A.jsxs)("div",{className:"listingPreviewInfoWrap",children:[Object(A.jsxs)("div",{className:"titleAndPriceWrap",children:[Object(A.jsx)("h1",{className:"title",children:n}),Object(A.jsxs)("h1",{className:"price",children:["$",i]})]}),Object(A.jsxs)("div",{className:"locationAndDateWrap",children:[Object(A.jsx)("h3",{className:"location",children:"".concat(g,", ").concat(s," at ").concat(C," ")}),Object(A.jsx)("h3",{className:"date",children:He()(c).format("YYYY/MM/DD")})]}),Object(A.jsx)("p",{className:"listingDescription",children:r})]})]})})),Ye=function(e){return Object(A.jsx)(r.a.Fragment,{children:function(t,n){for(var a=Math.ceil(t/n),i=[],r=0;r<a;r++)i.push(r+1);return Object(A.jsx)("ul",{className:"pagination",children:i.map((function(t){return Object(A.jsx)("li",{onClick:function(){e.onClickCallback(t),l.push({pathname:"/listings/".concat(t),search:"".concat(e.query)})},className:e.currentPage==t?"pageItemSelected":"pageItem",children:t},t)}))})}(e.totalItems,e.itemLimit)})},We="Posted: oldest first",Ue="Posted: newest first",Je=" Price: lowest first",ze="Price: highest first",Ve=Object(C.b)((function(e){return{listingInfo:e.listingInfo.data}}),{fetchListingsByOldestDate:function(e,t){return function(){var n=Object(d.a)(u.a.mark((function n(A){var i;return u.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,P.get("/listing-oldest-date/".concat(e).concat(t));case 3:i=n.sent,A({type:a.FETCH_LISTINGS,payload:i.data}),n.next=10;break;case 7:n.prev=7,n.t0=n.catch(0),A({type:a.LISTING_ERROR,payload:{error:M}});case 10:case"end":return n.stop()}}),n,null,[[0,7]])})));return function(e){return n.apply(this,arguments)}}()},fetchListingsByNewestDate:function(e,t){return function(){var n=Object(d.a)(u.a.mark((function n(A){var i;return u.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,P.get("/listing-newest-date/".concat(e).concat(t));case 3:i=n.sent,A({type:a.FETCH_LISTINGS,payload:i.data}),n.next=10;break;case 7:n.prev=7,n.t0=n.catch(0),A({type:a.LISTING_ERROR,payload:{error:M}});case 10:case"end":return n.stop()}}),n,null,[[0,7]])})));return function(e){return n.apply(this,arguments)}}()},fetchListingsByLowestPrice:function(e,t){return function(){var n=Object(d.a)(u.a.mark((function n(A){var i;return u.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,P.get("/listing-lowest-price/".concat(e).concat(t));case 3:i=n.sent,A({type:a.FETCH_LISTINGS,payload:i.data}),n.next=10;break;case 7:n.prev=7,n.t0=n.catch(0),A({type:a.LISTING_ERROR,payload:{error:M}});case 10:case"end":return n.stop()}}),n,null,[[0,7]])})));return function(e){return n.apply(this,arguments)}}()},fetchListingsByHighestPrice:function(e,t){return function(){var n=Object(d.a)(u.a.mark((function n(A){var i;return u.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,P.get("/listing-highest-price/".concat(e).concat(t));case 3:i=n.sent,A({type:a.FETCH_LISTINGS,payload:i.data}),n.next=10;break;case 7:n.prev=7,n.t0=n.catch(0),A({type:a.LISTING_ERROR,payload:{error:M}});case 10:case"end":return n.stop()}}),n,null,[[0,7]])})));return function(e){return n.apply(this,arguments)}}()}})((function(e){var t=Object(i.useState)(e.match.params.page),n=Object(J.a)(t,2),a=n[0],c=n[1],s=Object(i.useState)(We),g=Object(J.a)(s,2),l=g[0],C=g[1],I=Object(o.d)().search,u=function(t){var n=t.target.value;n===We?(C(We),e.fetchListingsByOldestDate(a,I)):n===Ue?(C(Ue),e.fetchListingsByNewestDate(a,I)):n===Je?(C(Je),e.fetchListingsByLowestPrice(a,I)):n===ze&&(C(ze),e.fetchListingsByHighestPrice(a,I))},d=function(t){l===We?e.fetchListingsByOldestDate(t,I):l===Ue?e.fetchListingsByNewestDate(t,I):l===Je?e.fetchListingsByLowestPrice(t,I):l===ze&&e.fetchListingsByHighestPrice(t,I)};return Object(i.useEffect)((function(){var t=!1;window.onpopstate=function(n){t=!0,console.log("back button",l),l===We?e.fetchListingsByOldestDate(a,I):l===Ue?e.fetchListingsByNewestDate(a,I):l===Je?e.fetchListingsByLowestPrice(a,I):l===ze&&e.fetchListingsByHighestPrice(a,I)},!1===t&&(l===We?e.fetchListingsByOldestDate(e.match.params.page,I):l===Ue?e.fetchListingsByNewestDate(e.match.params.page,I):l===Je?e.fetchListingsByLowestPrice(e.match.params.page,I):l===ze&&e.fetchListingsByHighestPrice(e.match.params.page,I)),c(e.match.params.page)}),[e.match.params.page,I]),Object(A.jsx)(r.a.Fragment,{children:e.listingInfo?e.listingInfo.error?Object(A.jsx)("div",{className:"serverErrorContainer",children:Object(A.jsx)("h3",{className:"serverErrorText",children:e.listingInfo.error})}):e.listingInfo.listings?0===e.listingInfo.listings.length?Object(A.jsx)("h2",{className:"nothingToShow",children:"There seems to be nothing to show here..."}):Object(A.jsx)(r.a.Fragment,{children:Object(A.jsxs)("div",{className:"listingsContainer",children:[Object(A.jsxs)("div",{className:"showingAdsTitleAndDropdownWrap",children:[Object(A.jsx)("h1",{className:"showingAdsTitle",children:"Showing ".concat(e.listingInfo.totalListings<e.listingInfo.limitPerPage||e.listingInfo.limitPerPage*e.listingInfo.page>e.listingInfo.totalListings?e.listingInfo.totalListings:e.listingInfo.limitPerPage*e.listingInfo.page," out of ").concat(e.listingInfo.totalListings," ads:")}),Object(A.jsxs)("div",{className:"dropdownWrap",children:[Object(A.jsx)("h3",{children:"Sort by"}),Object(A.jsxs)("select",{className:"sortByDropdown",onChange:u,children:[Object(A.jsx)("option",{value:We,children:We}),Object(A.jsx)("option",{value:Ue,children:Ue}),Object(A.jsx)("option",{value:Je,children:Je}),Object(A.jsx)("option",{value:ze,children:ze})]})]})]}),e.listingInfo.listings.map((function(e){return Object(A.jsx)(Me,Object(x.a)({},e),e.listing_id)})),Object(A.jsx)(Ye,{totalItems:e.listingInfo.totalListings,itemLimit:e.listingInfo.limitPerPage,currentPage:a,onClickCallback:d,query:I})]})}):Object(A.jsx)("div",{className:"loadingCenter",children:Object(A.jsx)(ye,{})}):Object(A.jsx)("div",{className:"loadingCenter",children:Object(A.jsx)(ye,{})})})})),Xe="data:image/jpeg;base64,/9j/4AAQSkZJRgABAQEBLAEsAAD/4QBWRXhpZgAATU0AKgAAAAgABAEaAAUAAAABAAAAPgEbAAUAAAABAAAARgEoAAMAAAABAAIAAAITAAMAAAABAAEAAAAAAAAAAAEsAAAAAQAAASwAAAAB/+0ALFBob3Rvc2hvcCAzLjAAOEJJTQQEAAAAAAAPHAFaAAMbJUccAQAAAgAEAP/hDIFodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvADw/eHBhY2tldCBiZWdpbj0n77u/JyBpZD0nVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkJz8+Cjx4OnhtcG1ldGEgeG1sbnM6eD0nYWRvYmU6bnM6bWV0YS8nIHg6eG1wdGs9J0ltYWdlOjpFeGlmVG9vbCAxMC4xMCc+CjxyZGY6UkRGIHhtbG5zOnJkZj0naHR0cDovL3d3dy53My5vcmcvMTk5OS8wMi8yMi1yZGYtc3ludGF4LW5zIyc+CgogPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9JycKICB4bWxuczp0aWZmPSdodHRwOi8vbnMuYWRvYmUuY29tL3RpZmYvMS4wLyc+CiAgPHRpZmY6UmVzb2x1dGlvblVuaXQ+MjwvdGlmZjpSZXNvbHV0aW9uVW5pdD4KICA8dGlmZjpYUmVzb2x1dGlvbj4zMDAvMTwvdGlmZjpYUmVzb2x1dGlvbj4KICA8dGlmZjpZUmVzb2x1dGlvbj4zMDAvMTwvdGlmZjpZUmVzb2x1dGlvbj4KIDwvcmRmOkRlc2NyaXB0aW9uPgoKIDxyZGY6RGVzY3JpcHRpb24gcmRmOmFib3V0PScnCiAgeG1sbnM6eG1wTU09J2h0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8nPgogIDx4bXBNTTpEb2N1bWVudElEPmFkb2JlOmRvY2lkOnN0b2NrOjQ5ZDRhN2FlLTI1NjYtNDY5Yi05NmI5LWUxYzAxM2JiNmEwYzwveG1wTU06RG9jdW1lbnRJRD4KICA8eG1wTU06SW5zdGFuY2VJRD54bXAuaWlkOjUxYWY0OTY0LWE4MjQtNDk1Yy04MzgzLTQ3OTYxMzNjMzY2YjwveG1wTU06SW5zdGFuY2VJRD4KIDwvcmRmOkRlc2NyaXB0aW9uPgo8L3JkZjpSREY+CjwveDp4bXBtZXRhPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAo8P3hwYWNrZXQgZW5kPSd3Jz8+/9sAQwAFAwQEBAMFBAQEBQUFBgcMCAcHBwcPCwsJDBEPEhIRDxERExYcFxMUGhURERghGBodHR8fHxMXIiQiHiQcHh8e/8AACwgBaAFoAQERAP/EABsAAQADAQEBAQAAAAAAAAAAAAAFBgcEAgMB/8QAPhABAAEDAgIECA0EAgMAAAAAAAECAwQFBhEhEjFBUQcTNmFzgbHRFSIkMkJSU2JxcpGhwRQjk+GC8RY0Vf/aAAgBAQAAPwDXQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA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",Ze=Object(C.b)((function(e){return{listingDetail:e.listingInfo.data}}),{fetchListingDetail:function(e){return function(){var t=Object(d.a)(u.a.mark((function t(n){var A;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,P.get("/listing/".concat(e));case 3:A=t.sent,n({type:a.FETCH_LISTING_DETAIL,payload:A.data}),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),n({type:a.LISTING_ERROR,payload:{error:M}});case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}()}})((function(e){var t=Object(i.useState)(!1),n=Object(J.a)(t,2),a=n[0],c=n[1];Object(i.useEffect)((function(){e.fetchListingDetail(e.match.params.id)}),[]);return Object(A.jsx)(r.a.Fragment,{children:function(){if(e.listingDetail){if(e.listingDetail.error)return Object(A.jsx)("div",{className:"serverErrorContainer",children:Object(A.jsx)("h3",{className:"serverErrorText",children:e.listingDetail.error})});var t=e.listingDetail,n=t.first_name,i=t.last_name,s=t.member_since,o=t.email,g=(t.listing_id,t.listing_name),l=t.listing_price,C=t.listing_description,I=t.category_name,u=t.listing_image,d=t.province,h=t.city,j=t.street,b=t.listing_date;return Object(A.jsxs)(r.a.Fragment,{children:[Object(A.jsx)("div",{className:"listingDetailCategories",children:Object(A.jsx)("h3",{children:"".concat(d," > ").concat(h," > ").concat(j," > ").concat(I)})}),Object(A.jsxs)("div",{className:"listingDetailTitleAndPriceContainer",children:[Object(A.jsx)("h3",{className:"listingDetailTitle",children:g}),Object(A.jsx)("h3",{className:"listingDetailPrice",children:"$".concat(l)})]}),Object(A.jsxs)("div",{className:"listingDetailInfoAndContactContainer",children:[Object(A.jsxs)("div",{className:"listingDetailContainer",children:[Object(A.jsx)("div",{className:"listingDetailImageContainer",children:Object(A.jsx)("img",{src:u||xe,onError:function(e){e.target.src=xe},alt:"listing"})}),Object(A.jsxs)("div",{className:"listingDetailDescriptionContainer",children:[Object(A.jsxs)("div",{className:"listingDescriptionTextWrap",children:[Object(A.jsx)("h3",{className:"listingDetailPostedOn",children:"Posted On:  ".concat(He()(b).format("YYYY/MM/DD"))}),Object(A.jsx)("h3",{className:"locationOfPost",children:"".concat(d,", ").concat(h,", ").concat(j)}),Object(A.jsx)("h3",{className:"listingDetailDescriptionTitle",children:"Description"}),Object(A.jsx)("p",{children:C})]}),Object(A.jsx)("div",{className:a?"":"listingDetailDescriptionFade"}),Object(A.jsx)("h3",{className:a?"listingDetailShowMoreTextHide":"listingDetailShowMoreText",onClick:function(){return c(!0)},children:"Show More"})]})]}),Object(A.jsxs)("div",{className:"listingDetailContactContainer",children:[Object(A.jsxs)("div",{className:"listingDetailProfileImageAndNameWrap",children:[Object(A.jsx)("img",{src:Xe,alt:"profile"}),Object(A.jsx)("h3",{children:"".concat(n,"\n                                    ").concat(i)})]}),Object(A.jsxs)("div",{className:"contactAndMemberWrap",children:[Object(A.jsx)("h3",{children:"Contact at: ".concat(o)}),Object(A.jsx)("h3",{children:"Member Since: ".concat(He()(s).format("YYYY/MM/DD")," ")})]})]})]})]})}return Object(A.jsx)("div",{className:"loadingCenter",children:Object(A.jsx)(ye,{})})}()})})),Ke=n.p+"static/media/emptyBox.f7f6ab23.svg",qe=Object(C.b)((function(e){return{profileInfo:e.profileInfo.data}}),{fetchUserProfile:function(){return function(){var e=Object(d.a)(u.a.mark((function e(t){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,P.get("/profile");case 3:n=e.sent,t({type:a.FETCH_USER_PROFILE,payload:n.data}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),t({type:a.FETCH_USER_PROFILE_ERROR,payload:{error:M}});case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}()}})(fe((function(e){Object(i.useEffect)((function(){e.fetchUserProfile()}),[]);var t=function(e){return 0===e.length?Object(A.jsxs)("div",{className:"userListingContainerEmpty",children:[Object(A.jsx)("h3",{className:"userListingText",children:"0 listings"}),Object(A.jsx)("img",{className:"emptyBox",src:Ke,alt:"empty box"})]}):Object(A.jsxs)("div",{className:"userListingContainerFilled",children:[Object(A.jsx)("h3",{children:"Your Listings :"}),e.map((function(e){return Object(A.jsx)(Me,Object(x.a)({},e),e.listing_id)}))]})};return Object(A.jsx)(r.a.Fragment,{children:function(){if(e.profileInfo){if(e.profileInfo.error)return Object(A.jsx)("div",{className:"serverErrorContainer",children:Object(A.jsx)("h3",{className:"serverErrorText",children:e.profileInfo.error})});var n=e.profileInfo,a=n.first_name,i=n.last_name,c=n.member_since,s=n.listings;return Object(A.jsx)(r.a.Fragment,{children:Object(A.jsxs)("div",{className:"profileInfoAndListingContainer",children:[Object(A.jsxs)("div",{className:"profileInfoContainer",children:[Object(A.jsxs)("div",{className:"profileBannerContainer",children:[Object(A.jsx)("div",{className:"purpleBanner"}),Object(A.jsx)("img",{src:Xe,alt:"profie"}),Object(A.jsx)("div",{className:"whiteBanner"})]}),Object(A.jsx)("h3",{children:" ".concat(a," ").concat(i)}),Object(A.jsx)("h3",{children:"Member Since: ".concat(He()(c).format("YYYY/MM/DD"))})]}),t(s)]})})}return Object(A.jsx)("div",{className:"loadingCenter",children:Object(A.jsx)(ye,{})})}()})}))),_e=Object(C.b)((function(e){return{listingDetail:e.listingInfo.data}}),{validateUserAndGetListingDetail:function(e){return function(){var t=Object(d.a)(u.a.mark((function t(n){var A;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,P.get("/listing/".concat(e,"/validate-user/edit"));case 3:A=t.sent,n({type:a.FETCH_LISTING_DETAIL,payload:A.data}),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),l.push("/listings/1");case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}()},deleteListing:function(e,t){return function(){var n=Object(d.a)(u.a.mark((function n(A){var i;return u.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,P.delete("/listing/".concat(e,"/delete"));case 3:if(i=n.sent,A({type:a.DELETE_LISTING,payload:i.data}),!t){n.next=8;break}return n.next=8,P.delete("/delete-image/".concat(t));case 8:l.push("/profile"),n.next=14;break;case 11:n.prev=11,n.t0=n.catch(0),alert(M);case 14:case"end":return n.stop()}}),n,null,[[0,11]])})));return function(e){return n.apply(this,arguments)}}()},editListing:function(e,t,n){return function(){var A=Object(d.a)(u.a.mark((function A(i){var r,c,s,o,g,C;return u.a.wrap((function(A){for(;;)switch(A.prev=A.next){case 0:if(A.prev=0,r={},!(e.image instanceof FileList&&null!=n)){A.next=11;break}return(c=new FormData).append("image",e.image[0]),A.next=7,P.put("/edit-image/".concat(n),c,{headers:{"Content-Type":"multipart/form-data"}});case 7:s=A.sent,r=s.data,A.next=23;break;case 11:if(!(e.image instanceof FileList&&null===n)){A.next=20;break}return(o=new FormData).append("image",e.image[0]),A.next=16,P.post("/upload-image",o,{headers:{"Content-Type":"multipart/form-data"}});case 16:g=A.sent,r=g.data,A.next=23;break;case 20:if(null!==e.image){A.next=23;break}return A.next=23,P.delete("/delete-image/".concat(n));case 23:return A.next=25,P.patch("/listing/".concat(t,"/edit"),Object(x.a)(Object(x.a)({},r),e));case 25:C=A.sent,i({type:a.EDIT_LISTING,payload:C.data}),l.push("/listing/".concat(t)),A.next=33;break;case 30:A.prev=30,A.t0=A.catch(0),alert(M);case 33:case"end":return A.stop()}}),A,null,[[0,30]])})));return function(e){return A.apply(this,arguments)}}()}})(fe((function(e){Object(i.useEffect)((function(){e.validateUserAndGetListingDetail(e.match.params.id)}),[]);var t=function(){var t=Object(d.a)(u.a.mark((function t(n){var a,A,i;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:console.log("editAds",n),e.listingDetail.listing_image&&n.image?(a=e.listingDetail.listing_image.split("/"),A=a.pop(),i=A.split(".")[0],console.log("cloudinaryPublicId",i),e.editListing(n,e.match.params.id,i)):e.editListing(n,e.match.params.id,null);case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),n=function(){if(e.listingDetail.listing_image){var t=e.listingDetail.listing_image.split("/").pop().split(".")[0];e.deleteListing(e.match.params.id,t)}else e.deleteListing(e.match.params.id,null)};return function(){if(e.listingDetail){if(e.listingDetail.error)return Object(A.jsx)("div",{className:"serverErrorContainer",children:Object(A.jsx)("h3",{className:"serverErrorText",children:e.listingDetail.error})});var a=e.listingDetail,i=a.listing_name,r=a.listing_description,c=a.category_name,s=a.listing_image,o=a.province,g=a.city,l=a.street,C=a.listing_price;return Object(A.jsxs)("div",{className:"editAdPageContainer",children:[Object(A.jsx)("h1",{children:"`Edit Your Ad"}),Object(A.jsx)(Pe,{onSubmit:function(e){return t(e)},onDelete:n,initialValues:{title:i,description:r,category:c,province:o,city:g,street:l,price:C},cloudinaryImage:s})]})}return Object(A.jsx)("div",{className:"loadingCenter",children:Object(A.jsx)(ye,{})})}()}))),$e=function(){return Object(A.jsx)("div",{className:"serverErrorContainer",children:Object(A.jsx)("h3",{children:"404 - Not Found!"})})},et=function(){return Object(A.jsxs)(r.a.Fragment,{children:[Object(A.jsx)(ce,{}),Object(A.jsxs)(o.c,{children:[Object(A.jsx)(o.a,{path:"/",exact:!0,component:Ce}),Object(A.jsx)(o.a,{path:"/signin",exact:!0,component:je}),Object(A.jsx)(o.a,{path:"/post-ad",exact:!0,component:ke}),Object(A.jsx)(o.a,{path:"/listings/:page",exact:!0,component:Ve}),Object(A.jsx)(o.a,{path:"/listing/:id",exact:!0,component:Ze}),Object(A.jsx)(o.a,{path:"/profile",exact:!0,component:qe}),Object(A.jsx)(o.a,{path:"/listing/:id/edit",exact:!0,component:_e}),Object(A.jsx)(o.a,{component:$e})]})]})},tt=function(){return l.listen((function(e){window.scrollTo(0,0)})),Object(A.jsx)(o.b,{history:l,children:Object(A.jsx)(et,{})})};n(308);s.a.render(Object(A.jsx)(r.a.StrictMode,{children:Object(A.jsx)(D,{children:Object(A.jsx)(tt,{})})}),document.getElementById("root"))}},[[309,1,2]]]);
//# sourceMappingURL=main.1fa3ad5e.chunk.js.map